<div>
<ul>
<li>
<a href='#MIGXdb.ManageEvents-ResourcesinaCMPwithhelpofMIGXdb-ManageEventsResourcesinaCMPwithhelpofMIGXdb'>Manage Events-Resources in a CMP with help of MIGXdb</a>
</li>

<li>
<a href='#MIGXdb.ManageEvents-ResourcesinaCMPwithhelpofMIGXdb-Requirements'>Requirements</a>
</li>

<li>
<a href='#MIGXdb.ManageEvents-ResourcesinaCMPwithhelpofMIGXdb-CreatetheConfiguration'>Create the Configuration</a>
</li>

<li>
<a href='#MIGXdb.ManageEvents-ResourcesinaCMPwithhelpofMIGXdb-Createaparentresourceforourevents.'>Create a parent-resource for our events.</a>
</li>

<li>
<a href='#MIGXdb.ManageEvents-ResourcesinaCMPwithhelpofMIGXdb-CreatesomeeventTVs'>Create some event-TVs</a>
</li>

<li>
<a href='#MIGXdb.ManageEvents-ResourcesinaCMPwithhelpofMIGXdb-CreateaTemplateforourevents.'>Create a Template for our events.</a>
</li>

<li>
<a href='#MIGXdb.ManageEvents-ResourcesinaCMPwithhelpofMIGXdb-SettheTemplateforourevents.'>Set the Template for our events.</a>
</li>

<li>
<a href='#MIGXdb.ManageEvents-ResourcesinaCMPwithhelpofMIGXdb-RegistertheTVsforourprocessors%28getlist%2Cfields%29'>Register the TVs for our processors (getlist,fields)</a>
</li>

<li>
<a href='#MIGXdb.ManageEvents-ResourcesinaCMPwithhelpofMIGXdb-dropdownTVforoureventsfilter'>dropdown-TV for our events-filter</a>
</li>

<li>
<a href='#MIGXdb.ManageEvents-ResourcesinaCMPwithhelpofMIGXdb-snippetforoureventsfilter'>snippet for our events-filter</a>
</li>

<li>
<a href='#MIGXdb.ManageEvents-ResourcesinaCMPwithhelpofMIGXdb-Filters'>Filters</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href='#MIGXdb.ManageEvents-ResourcesinaCMPwithhelpofMIGXdb-DropdownFilterforfilteringcurrent%2Cupcoming%2Cexpiredevents'>Dropdown Filter for filtering current,upcoming,expired events</a>
</li>

<li>
<a href='#MIGXdb.ManageEvents-ResourcesinaCMPwithhelpofMIGXdb-TextboxFilterforsearchinginsomefields'>Textbox Filter for searching in some fields</a>
</li>
</ul>
</li>

<li>
<a href='#MIGXdb.ManageEvents-ResourcesinaCMPwithhelpofMIGXdb-Hidingchildsfromtree'>Hiding childs from tree</a>
</li>

<li>
<a href='#MIGXdb.ManageEvents-ResourcesinaCMPwithhelpofMIGXdb-CreateamenutoyourCMP'>Create a menu to your CMP</a>
</li>
</ul>
</div>

<h2>
<a name="MIGXdb.ManageEvents-ResourcesinaCMPwithhelpofMIGXdb-ManageEventsResourcesinaCMPwithhelpofMIGXdb"></a>Manage Events-Resources in a CMP with help of MIGXdb
</h2>

<p>
Often we have the problem with lots of Resources, in the Resource-Tree to be very confused at some point and we wish, we would have a better way to manage them in a paginated grid view.
</p>

<p>
In this Tuorial we will learn how to create a CMP (custom manager page),
<br />
where you can manage events, which are child-resources of a resource-folder.
</p>

<h2>
<a name="MIGXdb.ManageEvents-ResourcesinaCMPwithhelpofMIGXdb-Requirements"></a>Requirements
</h2>

<p>
First off we will need to install <a href="/display/ADDON/MIGX" title="MIGX">MIGX</a> by package-management, if not allready done, and do some <a href="/display/ADDON/MIGXdb.Configuration" title="MIGXdb.Configuration">basic configurations</a>.
<br />
Minimum Required version: MIGX 2.3.2 (10.09.2012)
</p>

<h2>
<a name="MIGXdb.ManageEvents-ResourcesinaCMPwithhelpofMIGXdb-CreatetheConfiguration"></a>Create the Configuration
</h2>

<p>
Now we want to create our configuration for the MIGXdb-TV.
</p>

<p>
Go to the main-tab 'MIGX'
</p>

<p>
There should be an grid with some buttons.
</p>

<p>
We click 'Add item'
</p>

<p>
In the opening window we add:
</p>

<p>
Name: events - this is the name of our configuration. Make sure to use unique configuration-names.
<br />
"Add Item" Replacement: Add Event - this is the text on our 'Add Item' - Button
<br />
unique MIGX ID: events - Its a good idea to have a unique MIGX - id for all your MIGX-configs.
</p>

<p>
Click 'Done'
</p>

<p>
We should see a new created record in our grid.
<br />
We could edit this record and add grid-columns and tabs and other stuff by right-clicking and choose 'edit', but we want to go the faster way by just importing our example-configuration.
</p>

<p>
Right-Click our record and choose 'Export/Import'
</p>

<p>
Add this code into the one field 'Json' :
</p>

<table class="sectionMacro" border="0" cellpadding="5" cellspacing="0" width="100%">
<tbody>
<tr>
<td>
</td>
</tr>
</tbody>
</table>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
{<span class="code-quote">"formtabs"</span>:<span class="code-quote">"[{\"</span>MIGX_id\<span class="code-quote">":\"</span>1\<span class="code-quote">",\"</span>caption\<span class="code-quote">":\"</span>Event\<span class="code-quote">",\"</span>fields\<span class="code-quote">":\"</span>[{\\\<span class="code-quote">"MIGX_id\\\"</span>:\\\<span class="code-quote">"1\\\"</span>,\\\<span class="code-quote">"field\\\"</span>:\\\<span class="code-quote">"pagetitle\\\"</span>,\\\<span class="code-quote">"caption\\\"</span>:\\\<span class="code-quote">"Pagetitle\\\"</span>,\\\<span class="code-quote">"inputTV\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"inputTVtype\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"configs\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"sourceFrom\\\"</span>:\\\<span class="code-quote">"config\\\"</span>,\\\<span class="code-quote">"sources\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"inputOptionValues\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"<span class="code-keyword">default</span>\\\"</span>:\\\<span class="code-quote">"\\\"</span>},{\\\<span class="code-quote">"MIGX_id\\\"</span>:\\\<span class="code-quote">"7\\\"</span>,\\\<span class="code-quote">"field\\\"</span>:\\\<span class="code-quote">"location\\\"</span>,\\\<span class="code-quote">"caption\\\"</span>:\\\<span class="code-quote">"Location\\\"</span>,\\\<span class="code-quote">"inputTV\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"inputTVtype\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"configs\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"sourceFrom\\\"</span>:\\\<span class="code-quote">"config\\\"</span>,\\\<span class="code-quote">"sources\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"inputOptionValues\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"<span class="code-keyword">default</span>\\\"</span>:\\\<span class="code-quote">"\\\"</span>},{\\\<span class="code-quote">"MIGX_id\\\"</span>:\\\<span class="code-quote">"3\\\"</span>,\\\<span class="code-quote">"field\\\"</span>:\\\<span class="code-quote">"eventstart\\\"</span>,\\\<span class="code-quote">"caption\\\"</span>:\\\<span class="code-quote">"Start\\\"</span>,\\\<span class="code-quote">"inputTV\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"inputTVtype\\\"</span>:\\\<span class="code-quote">"date\\\"</span>,\\\<span class="code-quote">"configs\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"sourceFrom\\\"</span>:\\\<span class="code-quote">"config\\\"</span>,\\\<span class="code-quote">"sources\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"inputOptionValues\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"<span class="code-keyword">default</span>\\\"</span>:\\\<span class="code-quote">"\\\"</span>},{\\\<span class="code-quote">"MIGX_id\\\"</span>:\\\<span class="code-quote">"4\\\"</span>,\\\<span class="code-quote">"field\\\"</span>:\\\<span class="code-quote">"eventend\\\"</span>,\\\<span class="code-quote">"caption\\\"</span>:\\\<span class="code-quote">"End\\\"</span>,\\\<span class="code-quote">"inputTV\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"inputTVtype\\\"</span>:\\\<span class="code-quote">"date\\\"</span>,\\\<span class="code-quote">"configs\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"sourceFrom\\\"</span>:\\\<span class="code-quote">"config\\\"</span>,\\\<span class="code-quote">"sources\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"inputOptionValues\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"<span class="code-keyword">default</span>\\\"</span>:\\\<span class="code-quote">"\\\"</span>},{\\\<span class="code-quote">"MIGX_id\\\"</span>:\\\<span class="code-quote">"5\\\"</span>,\\\<span class="code-quote">"field\\\"</span>:\\\<span class="code-quote">"template\\\"</span>,\\\<span class="code-quote">"caption\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"inputTV\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"inputTVtype\\\"</span>:\\\<span class="code-quote">"hidden\\\"</span>,\\\<span class="code-quote">"configs\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"sourceFrom\\\"</span>:\\\<span class="code-quote">"config\\\"</span>,\\\<span class="code-quote">"sources\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"inputOptionValues\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"<span class="code-keyword">default</span>\\\"</span>:\\\<span class="code-quote">"6\\\"</span>},{\\\<span class="code-quote">"MIGX_id\\\"</span>:\\\<span class="code-quote">"2\\\"</span>,\\\<span class="code-quote">"field\\\"</span>:\\\<span class="code-quote">"parent\\\"</span>,\\\<span class="code-quote">"caption\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"inputTV\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"inputTVtype\\\"</span>:\\\<span class="code-quote">"hidden\\\"</span>,\\\<span class="code-quote">"configs\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"sourceFrom\\\"</span>:\\\<span class="code-quote">"config\\\"</span>,\\\<span class="code-quote">"sources\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"inputOptionValues\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"<span class="code-keyword">default</span>\\\"</span>:\\\<span class="code-quote">"25\\\"</span>},{\\\<span class="code-quote">"MIGX_id\\\"</span>:\\\<span class="code-quote">"6\\\"</span>,\\\<span class="code-quote">"field\\\"</span>:\\\<span class="code-quote">"context_key\\\"</span>,\\\<span class="code-quote">"caption\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"inputTV\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"inputTVtype\\\"</span>:\\\<span class="code-quote">"hidden\\\"</span>,\\\<span class="code-quote">"configs\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"sourceFrom\\\"</span>:\\\<span class="code-quote">"config\\\"</span>,\\\<span class="code-quote">"sources\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"inputOptionValues\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"<span class="code-keyword">default</span>\\\"</span>:\\\<span class="code-quote">"web\\\"</span>}]\<span class="code-quote">"},{\"</span>MIGX_id\<span class="code-quote">":\"</span>2\<span class="code-quote">",\"</span>caption\<span class="code-quote">":\"</span>Content\<span class="code-quote">",\"</span>fields\<span class="code-quote">":\"</span>[{\\\<span class="code-quote">"MIGX_id\\\"</span>:\\\<span class="code-quote">"1\\\"</span>,\\\<span class="code-quote">"field\\\"</span>:\\\<span class="code-quote">"content\\\"</span>,\\\<span class="code-quote">"caption\\\"</span>:\\\<span class="code-quote">"Content\\\"</span>,\\\<span class="code-quote">"inputTV\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"inputTVtype\\\"</span>:\\\<span class="code-quote">"richtext\\\"</span>,\\\<span class="code-quote">"configs\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"sourceFrom\\\"</span>:\\\<span class="code-quote">"config\\\"</span>,\\\<span class="code-quote">"sources\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"inputOptionValues\\\"</span>:\\\<span class="code-quote">"\\\"</span>,\\\<span class="code-quote">"<span class="code-keyword">default</span>\\\"</span>:\\\<span class="code-quote">"\\\"</span>}]\<span class="code-quote">"}]"</span>,<span class="code-quote">"contextmenus"</span>:<span class="code-quote">"","</span>actionbuttons<span class="code-quote">":"</span>addItem||toggletrash<span class="code-quote">","</span>columnbuttons<span class="code-quote">":"</span>update||publish||unpublish||recall_remove_delete<span class="code-quote">","</span>filters<span class="code-quote">":"</span>[{\<span class="code-quote">"MIGX_id\"</span>:\<span class="code-quote">"1\"</span>,\<span class="code-quote">"name\"</span>:\<span class="code-quote">"eventsfilter\"</span>,\<span class="code-quote">"label\"</span>:\<span class="code-quote">"eventsfilter\"</span>,\<span class="code-quote">"emptytext\"</span>:\<span class="code-quote">"-- Filter Events --\"</span>,\<span class="code-quote">"type\"</span>:\<span class="code-quote">"combobox\"</span>,\<span class="code-quote">"getlistwhere\"</span>:\<span class="code-quote">"[[migxFilterevents]]\"</span>,\<span class="code-quote">"getcomboprocessor\"</span>:\<span class="code-quote">"getTVcombo\"</span>,\<span class="code-quote">"combotextfield\"</span>:\<span class="code-quote">"eventsfiltercombo\"</span>,\<span class="code-quote">"comboidfield\"</span>:\<span class="code-quote">"\"</span>,\<span class="code-quote">"comboparent\"</span>:\<span class="code-quote">"\"</span>}]<span class="code-quote">","</span>extended<span class="code-quote">":{"</span>migx_add<span class="code-quote">":"</span>Create Event<span class="code-quote">","</span>formcaption<span class="code-quote">":"</span>Event<span class="code-quote">","</span>win_id<span class="code-quote">":"</span>events<span class="code-quote">","</span>multiple_formtabs<span class="code-quote">":"</span><span class="code-quote">","</span>packageName<span class="code-quote">":"</span>migxresourceevents<span class="code-quote">","</span>classname<span class="code-quote">":"</span>modResource<span class="code-quote">","</span>task<span class="code-quote">":"</span>childresources<span class="code-quote">","</span>getlistsort<span class="code-quote">":"</span><span class="code-quote">","</span>getlistsortdir<span class="code-quote">":"</span><span class="code-quote">","</span>use_custom_prefix<span class="code-quote">":"</span>0<span class="code-quote">","</span>prefix<span class="code-quote">":"</span><span class="code-quote">","</span>grid<span class="code-quote">":"</span><span class="code-quote">","</span>gridload_mode<span class="code-quote">":"</span>1<span class="code-quote">","</span>check_resid<span class="code-quote">":"</span>1<span class="code-quote">","</span>check_resid_TV<span class="code-quote">":"</span><span class="code-quote">","</span>join_alias<span class="code-quote">":"</span><span class="code-quote">","</span>getlistwhere<span class="code-quote">":"</span>{\<span class="code-quote">"parent\"</span>:\<span class="code-quote">"25\"</span>}<span class="code-quote">","</span>joins<span class="code-quote">":"</span><span class="code-quote">","</span>cmpmaincaption<span class="code-quote">":"</span>Events<span class="code-quote">","</span>cmptabcaption<span class="code-quote">":"</span>Events<span class="code-quote">","</span>cmptabdescription<span class="code-quote">":"</span>Manage your events here<span class="code-quote">","</span>cmptabcontroller<span class="code-quote">":"</span><span class="code-quote">"},"</span>columns<span class="code-quote">":"</span>[{\<span class="code-quote">"MIGX_id\"</span>:\<span class="code-quote">"1\"</span>,\<span class="code-quote">"header\"</span>:\<span class="code-quote">"ID\"</span>,\<span class="code-quote">"dataIndex\"</span>:\<span class="code-quote">"id\"</span>,\<span class="code-quote">"width\"</span>:\<span class="code-quote">"10\"</span>,\<span class="code-quote">"renderer\"</span>:\<span class="code-quote">"\"</span>,\<span class="code-quote">"sortable\"</span>:\<span class="code-quote">"<span class="code-keyword">true</span>\"</span>,\<span class="code-quote">"show_in_grid\"</span>:\<span class="code-quote">"1\"</span>},{\<span class="code-quote">"MIGX_id\"</span>:\<span class="code-quote">"2\"</span>,\<span class="code-quote">"header\"</span>:\<span class="code-quote">"Pagetitle\"</span>,\<span class="code-quote">"dataIndex\"</span>:\<span class="code-quote">"pagetitle\"</span>,\<span class="code-quote">"width\"</span>:\<span class="code-quote">"30\"</span>,\<span class="code-quote">"renderer\"</span>:\<span class="code-quote">"<span class="code-keyword">this</span>.renderRowActions\"</span>,\<span class="code-quote">"sortable\"</span>:\<span class="code-quote">"<span class="code-keyword">true</span>\"</span>,\<span class="code-quote">"show_in_grid\"</span>:\<span class="code-quote">"1\"</span>},{\<span class="code-quote">"MIGX_id\"</span>:\<span class="code-quote">"7\"</span>,\<span class="code-quote">"header\"</span>:\<span class="code-quote">"Location\"</span>,\<span class="code-quote">"dataIndex\"</span>:\<span class="code-quote">"location\"</span>,\<span class="code-quote">"width\"</span>:\<span class="code-quote">"20\"</span>,\<span class="code-quote">"renderer\"</span>:\<span class="code-quote">"\"</span>,\<span class="code-quote">"sortable\"</span>:\<span class="code-quote">"<span class="code-keyword">false</span>\"</span>,\<span class="code-quote">"show_in_grid\"</span>:\<span class="code-quote">"1\"</span>},{\<span class="code-quote">"MIGX_id\"</span>:\<span class="code-quote">"5\"</span>,\<span class="code-quote">"header\"</span>:\<span class="code-quote">"Start\"</span>,\<span class="code-quote">"dataIndex\"</span>:\<span class="code-quote">"eventstart\"</span>,\<span class="code-quote">"width\"</span>:\<span class="code-quote">"20\"</span>,\<span class="code-quote">"renderer\"</span>:\<span class="code-quote">"<span class="code-keyword">this</span>.renderDate\"</span>,\<span class="code-quote">"sortable\"</span>:\<span class="code-quote">"<span class="code-keyword">true</span>\"</span>,\<span class="code-quote">"show_in_grid\"</span>:\<span class="code-quote">"1\"</span>},{\<span class="code-quote">"MIGX_id\"</span>:\<span class="code-quote">"6\"</span>,\<span class="code-quote">"header\"</span>:\<span class="code-quote">"End\"</span>,\<span class="code-quote">"dataIndex\"</span>:\<span class="code-quote">"eventend\"</span>,\<span class="code-quote">"width\"</span>:\<span class="code-quote">"20\"</span>,\<span class="code-quote">"renderer\"</span>:\<span class="code-quote">"<span class="code-keyword">this</span>.renderDate\"</span>,\<span class="code-quote">"sortable\"</span>:\<span class="code-quote">"<span class="code-keyword">true</span>\"</span>,\<span class="code-quote">"show_in_grid\"</span>:\<span class="code-quote">"1\"</span>},{\<span class="code-quote">"MIGX_id\"</span>:\<span class="code-quote">"4\"</span>,\<span class="code-quote">"header\"</span>:\<span class="code-quote">"Published\"</span>,\<span class="code-quote">"dataIndex\"</span>:\<span class="code-quote">"published\"</span>,\<span class="code-quote">"width\"</span>:\<span class="code-quote">"10\"</span>,\<span class="code-quote">"renderer\"</span>:\<span class="code-quote">"<span class="code-keyword">this</span>.renderCrossTick\"</span>,\<span class="code-quote">"sortable\"</span>:\<span class="code-quote">"<span class="code-keyword">false</span>\"</span>,\<span class="code-quote">"show_in_grid\"</span>:\<span class="code-quote">"1\"</span>},{\<span class="code-quote">"MIGX_id\"</span>:\<span class="code-quote">"3\"</span>,\<span class="code-quote">"header\"</span>:\<span class="code-quote">"\"</span>,\<span class="code-quote">"dataIndex\"</span>:\<span class="code-quote">"deleted\"</span>,\<span class="code-quote">"width\"</span>:\<span class="code-quote">"\"</span>,\<span class="code-quote">"renderer\"</span>:\<span class="code-quote">"\"</span>,\<span class="code-quote">"sortable\"</span>:\<span class="code-quote">"<span class="code-keyword">false</span>\"</span>,\<span class="code-quote">"show_in_grid\"</span>:\<span class="code-quote">"0\"</span>}]"}
</pre>
</div>
</div>

<p>
click 'done'
</p>

<p>
you can check what it has done by right-clicking the record and choose 'edit' and go thrue the tabs and its nested grids.
</p>

<h2>
<a name="MIGXdb.ManageEvents-ResourcesinaCMPwithhelpofMIGXdb-Createaparentresourceforourevents."></a>Create a parent-resource for our events.
</h2>

<p>
Just create a new Resource, which will be the parent for all our event-resources.
</p>

<div class='panelMacro'>
<table class='infoMacro'>
<colgroup>
<col width='24' />
<col />
</colgroup>

<tr>
<td valign='top'>
<img src="/images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0" />
</td>
<td>
Don't forget to set the resource-id into the getlist-where in the MIGX-manager
<br />
tab: MIGXdb-settings
<br />
field where:
<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
{<span class="code-quote">"parent"</span>:<span class="code-quote">"XX"</span>}
</pre>
</div>
</div>
</td>
</tr>
</table>
</div>

<h2>
<a name="MIGXdb.ManageEvents-ResourcesinaCMPwithhelpofMIGXdb-CreatesomeeventTVs"></a>Create some event-TVs
</h2>

<p>
Create two date-TVs with names: 'eventstart' and 'eventend'
<br />
Create a text-TV with name: 'location'
</p>

<h2>
<a name="MIGXdb.ManageEvents-ResourcesinaCMPwithhelpofMIGXdb-CreateaTemplateforourevents."></a>Create a Template for our events.
</h2>

<p>
Create a template with some basic content and place at least this placeholders somewhere in this template:
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
[[*eventstart]],[[*eventend]],[[*location]],[[*pagetitle]],[[*content]]
</pre>
</div>
</div>

<p>
don't forget to assign all this TVs to this template.
</p>

<h2>
<a name="MIGXdb.ManageEvents-ResourcesinaCMPwithhelpofMIGXdb-SettheTemplateforourevents."></a>Set the Template for our events.
</h2>

<p>
We want all our events have the template created above. So we need to set the template-value somehow.
<br />
This can be done by a hidden-field in our form.
<br />
To do so:
<br />
1. right-click our events - record in the MIGX-configurator-grid and click 'Edit'
<br />
2. open the tab 'formtabs'
<br />
3. right-click on 'Event' and click 'Edit'
<br />
4. right-click on 'template' and click 'Edit'
<br />
5. open the tab 'Input Options' and change the Default-Value to the template-ID, which our events-resources should have.
<br />
6. click done to save the values
</p>

<p>
Do the same for parent (add the ID of the parent-resource created above into as default-value) and context_key, if you need another one, than 'web'
</p>

<p>
Close all windows with 'Done'
</p>

<h2>
<a name="MIGXdb.ManageEvents-ResourcesinaCMPwithhelpofMIGXdb-RegistertheTVsforourprocessors%28getlist%2Cfields%29"></a>Register the TVs for our processors (getlist,fields)
</h2>

<p>
We need to register TVs to include them in the getlist- and fields-processors.
<br />
Todo so we need a new config-file under /core/components/migx/configs/
</p>

<p>
with the same name as our MIGX-configuration: events.config.inc.php (should allready be installed with the MIGX-package)
<br />
and this content:
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeHeader panelHeader" style="border-bottom-width: 1px;">
<b>/core/components/migx/configs/events.config.inc.php</b>
</div>

<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
$<span class="code-keyword">this</span>-&gt;customconfigs['includeTVs'] = 1;
$<span class="code-keyword">this</span>-&gt;customconfigs['includeTVList'] = 'eventstart,eventend,location';
</pre>
</div>
</div>

<div class='panelMacro'>
<table class='infoMacro'>
<colgroup>
<col width='24' />
<col />
</colgroup>

<tr>
<td valign='top'>
<img src="/images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0" />
</td>
<td>
All TVs you want to edit or you want to show in the grid needs to be in the includeTVList - customconfig
</td>
</tr>
</table>
</div>

<h2>
<a name="MIGXdb.ManageEvents-ResourcesinaCMPwithhelpofMIGXdb-dropdownTVforoureventsfilter"></a>dropdown-TV for our events-filter
</h2>

<p>
Create a new TV:
</p>

<p>
Name: eventsfiltercombo
<br />
Type: listbox
<br />
Input-option-values:
<br />
current||upcoming||expired
</p>

<h2>
<a name="MIGXdb.ManageEvents-ResourcesinaCMPwithhelpofMIGXdb-snippetforoureventsfilter"></a>snippet for our events-filter
</h2>

<p>
Create a snippet:
</p>

<p>
Name: migxFilterevents
<br />
content:
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
$now = strftime('%Y-%m-%d %H:%M:%S');

<span class="code-keyword">switch</span> ($_REQUEST['eventsfilter']){
    <span class="code-keyword">case</span> 'current':
        <span class="code-keyword">return</span> 'tvFilter::eventstart&lt;='.$now.',eventend&gt;='.$now;
    <span class="code-keyword">break</span>;    
    <span class="code-keyword">case</span> 'upcoming':
        <span class="code-keyword">return</span> 'tvFilter::eventstart&gt;&gt;'.$now;
    <span class="code-keyword">break</span>;
    <span class="code-keyword">case</span> 'expired':
        <span class="code-keyword">return</span> 'tvFilter::eventend&lt;&lt;'.$now;
    <span class="code-keyword">break</span>;
}

<span class="code-keyword">return</span> '';
</pre>
</div>
</div>

<h2>
<a name="MIGXdb.ManageEvents-ResourcesinaCMPwithhelpofMIGXdb-Filters"></a>Filters
</h2>

<p>
Go to MIGX-Management and open our configuration (events)
<br />
Open the TAB 'DB-Filters'
</p>

<h3>
<a name="MIGXdb.ManageEvents-ResourcesinaCMPwithhelpofMIGXdb-DropdownFilterforfilteringcurrent%2Cupcoming%2Cexpiredevents"></a>Dropdown Filter for filtering current,upcoming,expired events
</h3>

<p>
with the configuration above we have allready created this filter
</p>

<p>
filter Name: eventsfilter
<br />
label: eventsfilter
<br />
empty text: - filter events -
<br />
filter type: combobox
<br />
getlist-where:
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
[[migxFilterevents]]
</pre>
</div>
</div>

<p>
getcombo processor: getTVcombo
<br />
getcombo textfield: eventsfiltercombo (this is used in our getTVcombo-processor to get the input-options of the TV 'eventsfiltercombo' for our filter-dropdown)
</p>

<h3>
<a name="MIGXdb.ManageEvents-ResourcesinaCMPwithhelpofMIGXdb-TextboxFilterforsearchinginsomefields"></a>Textbox Filter for searching in some fields
</h3>

<p>
you can add additional filters, for example this one:
</p>

<p>
filter Name: search
<br />
label: search
<br />
empty text: search...
<br />
getlist-where:
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
{<span class="code-quote">"pagetitle:LIKE"</span>:<span class="code-quote">"%[[+search]]%"</span>,<span class="code-quote">"OR:longtitle:LIKE"</span>:<span class="code-quote">"%[[+search]]%"</span>,<span class="code-quote">"OR:content:LIKE"</span>:<span class="code-quote">"%[[+search]]%"</span>}
</pre>
</div>
</div>

<p>
Save them all with clicking 'Done' on all windows
</p>

<p>
Now you should be able to filter the child-resources by searching and/or choosing current,upcoming,expired from dropdown
</p>

<h2>
<a name="MIGXdb.ManageEvents-ResourcesinaCMPwithhelpofMIGXdb-Hidingchildsfromtree"></a>Hiding childs from tree
</h2>

<p>
Hiding our child-resources from resource-tree is very easy.
</p>

<p>
go to the MIGX-Configurator and add a new field to one of the formtabs:
</p>

<p>
Fieldname: show_in_tree
<br />
Caption: Show in Tree
<br />
inputTVtype: listbox
</p>

<p>
inputOptionValues: no==0||yes==1
</p>

<p>
You can also show the status of this field in the grid by adding a new column:
</p>

<p>
Header: Show in Tree
<br />
Field: show_in_tree
<br />
width: 20
<br />
Renderer: this.RenderCrossTick
</p>

<h2>
<a name="MIGXdb.ManageEvents-ResourcesinaCMPwithhelpofMIGXdb-CreateamenutoyourCMP"></a>Create a menu to your CMP
</h2>

<p>
System -&gt; Actions
</p>

<p>
menu-tree:
<br />
Components-&gt;MIGX-&gt;right-click-&gt;Place Action here
</p>

<p>
Lexicon-key: Events Manager
<br />
Action: migx-index
<br />
parameters &amp;configs=events
</p>

<p>
click 'save'
</p>

<p>
Now we have created a very basic event-resources-management, which should allready work for basic requirements.
<br />
This can easy be extended to your needs.
</p>