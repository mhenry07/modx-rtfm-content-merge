<div>
<ul>
<li>
<a href="extras/revo/modactivedirectory#modActiveDirectory-WhatismodActiveDirectory%3F">What is modActiveDirectory?</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href="extras/revo/modactivedirectory#modActiveDirectory-Requirements">Requirements</a>
</li>

<li>
<a href="extras/revo/modactivedirectory#modActiveDirectory-Installation">Installation</a>
</li>

<li>
<a href="extras/revo/modactivedirectory#modActiveDirectory-History">History</a>
</li>

<li>
<a href="extras/revo/modactivedirectory#modActiveDirectory-DevelopmentandBugReporting">Development and Bug Reporting</a>
</li>
</ul>
</li>

<li>
<a href="extras/revo/modactivedirectory#modActiveDirectory-Usage">Usage</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href="extras/revo/modactivedirectory#modActiveDirectory-AvailableSettings">Available Settings</a>
</li>

<li>
<a href="extras/revo/modactivedirectory#modActiveDirectory-ActiveDirectoryGroupSynchronization">ActiveDirectory Group Synchronization</a>
</li>
</ul>
</li>

<li>
<a href="extras/revo/modactivedirectory#modActiveDirectory-SeeAlso">See Also</a>
</li>
</ul>
</div>

<h2>
<a name="modActiveDirectory-WhatismodActiveDirectory%3F"></a>What is modActiveDirectory?
</h2>

<p>
modActiveDirectory is a Microsoft ActiveDirectory integration for MODx Revolution. It allows you to use ActiveDirectory to authenticate against to login to MODx.
</p>

<h3>
<a name="modActiveDirectory-Requirements" id="modActiveDirectory-Requirements"></a>Requirements
</h3>

<ul>
<li>MODx Revolution 2.0.0-pl or later
</li>

<li>PHP5 or later
</li>

<li>LDAP extension for PHP
</li>
</ul>

<h3>
<a name="modActiveDirectory-Installation" id="modActiveDirectory-Installation"></a>Installation
</h3>

<p>
It can be downloaded from within the MODx Revolution manager via <span class="error">[Package Management]</span>, or from the MODx Extras Repository, here: <a href="http://modxcms.com/extras/package/711" class="external-link" rel="nofollow">http://modxcms.com/extras/package/711</a>
</p>

<div class="note">
You will need to ensure the manager/controllers/security/login.php file is writable by PHP, if it is not already, before installing. modActiveDirectory patches a bug in that file that is in Revo 2.0.0-pl.
</div>

<p>
From there, you'll need to setup two System Settings before beginning:
</p>

<ul>
<li>activedirectory.account_suffix : The account suffix for your domain. Usually in @forest.domain format.
</li>

<li>activedirectory.domain_controllers : A comma-separated list of domain controllers. Specifiy multiple controllers if you would like the class to balance the LDAP queries.
</li>
</ul>

<h3>
<a name="modActiveDirectory-History" id="modActiveDirectory-History"></a>History
</h3>

<p>
modActiveDirectory was written by <a href="display/~splittingred" class="confluence-userlink" data-username="splittingred">Shaun McCormick</a> and first released on August 6th, 2010.
</p>

<h3>
<a name="modActiveDirectory-DevelopmentandBugReporting" id="modActiveDirectory-DevelopmentandBugReporting"></a>Development and Bug Reporting
</h3>

<p>
modActiveDirectory is stored and developed in GitHub, and can be found here: <a href="http://github.com/splittingred/modActiveDirectory" class="external-link" rel="nofollow">http://github.com/splittingred/modActiveDirectory</a>
</p>

<p>
Bugs can be filed here: <a href="http://github.com/splittingred/modActiveDirectory/issues" class="external-link" rel="nofollow">http://github.com/splittingred/modActiveDirectory/issues</a>
</p>

<h2>
<a name="modActiveDirectory-Usage" id="modActiveDirectory-Usage"></a>Usage
</h2>

<p>
modActiveDirectory will automatically work after you have installed it and setup the domain controllers and account suffix. There are more settings you can use, as well, in the 'activedirectory' namespace in System Settings.
</p>

<h3>
<a name="modActiveDirectory-AvailableSettings" id="modActiveDirectory-AvailableSettings"></a>Available Settings
</h3>

<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<th class='confluenceTh'>
Name
</th>
<th class='confluenceTh'>
Description
</th>
<th class='confluenceTh'>
Default
</th>
</tr>

<tr>
<td class='confluenceTd'>
activedirectory.account_suffix
</td>
<td class='confluenceTd'>
The account suffix for your domain. Usually in @forest.domain format.
</td>
<td class='confluenceTd'>
@forest.local
</td>
</tr>

<tr>
<td class='confluenceTd'>
activedirectory.autoadd_adgroups
</td>
<td class='confluenceTd'>
If true, will grab all Active Directory groups the User belongs to, and search for any matching UserGroups in MODx. If any are found, the MODx User will automatically be added to the matching MODx UserGroups.
</td>
<td class='confluenceTd'>
1
</td>
</tr>

<tr>
<td class='confluenceTd'>
activedirectory.autoadd_usergroups
</td>
<td class='confluenceTd'>
A comma-separated list of MODx UserGroup names which the User will always be added to.
</td>
<td class='confluenceTd'>
&nbsp;
</td>
</tr>

<tr>
<td class='confluenceTd'>
activedirectory.base_dn
</td>
<td class='confluenceTd'>
The base dn for your domain. This can usually be left blank, as MODx will automatically calculate it for you.
</td>
<td class='confluenceTd'>
&nbsp;
</td>
</tr>

<tr>
<td class='confluenceTd'>
activedirectory.domain_controllers
</td>
<td class='confluenceTd'>
Comma-separated list of domain controllers. Specifiy multiple controllers if you would like the class to balance the LDAP queries.
</td>
<td class='confluenceTd'>
127.0.0.1
</td>
</tr>

<tr>
<td class='confluenceTd'>
activedirectory.real_primarygroup
</td>
<td class='confluenceTd'>
This tweak will resolve the real primary group. Setting to false will fudge "Domain Users" and is much faster. Keep in mind though that if someones primary group is NOT "Domain Users", this is obviously going to mess up the results. Related to <a href="http://support.microsoft.com/?kbid=321360" class="external-link" rel="nofollow">http://support.microsoft.com/?kbid=321360</a>.
</td>
<td class='confluenceTd'>
1
</td>
</tr>

<tr>
<td class='confluenceTd'>
activedirectory.recursive_groups
</td>
<td class='confluenceTd'>
When querying group memberships, do so recursively. Recommended to leave on.
</td>
<td class='confluenceTd'>
1
</td>
</tr>

<tr>
<td class='confluenceTd'>
activedirectory.use_ssl
</td>
<td class='confluenceTd'>
Use SSL (LDAPS). Your AD server will need to be setup to support this. Works only if use_tls is off.
</td>
<td class='confluenceTd'>
0
</td>
</tr>

<tr>
<td class='confluenceTd'>
activedirectory.use_tls
</td>
<td class='confluenceTd'>
Use TLS. Your AD server will need to be setup to support this. Works only if use_ssl is off.
</td>
<td class='confluenceTd'>
0
</td>
</tr>
</tbody>
</table>
</div>

<h3>
<a name="modActiveDirectory-ActiveDirectoryGroupSynchronization" id="modActiveDirectory-ActiveDirectoryGroupSynchronization"></a>ActiveDirectory Group Synchronization
</h3>

<p>
modActiveDirectory will automatically grab all the ActiveDirectory groups a user belongs to, and then search for any MODx UserGroups with matching names. If found, the user will be added to those groups.
</p>

<p>
If you'd like to disable this, set the 'activedirectory.autoadd_adgroups' System Setting to 0.
</p>

<p>
modActiveDirectory also allows you to specify a comma-separated list of MODx UserGroup names to automatically add the User to. This can be set in the 'activedirectory.autoadd_usergroups' setting.
</p>

<p>
Make sure you give the User Groups the User will auto-join access to the manager (through Access Controls), should you want your ActiveDirectory users to have manager access.
</p>

<h2>
<a name="modActiveDirectory-SeeAlso" id="modActiveDirectory-SeeAlso"></a>See Also
</h2>