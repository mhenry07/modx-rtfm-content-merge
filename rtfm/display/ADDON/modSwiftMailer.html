<p>
<br class="atl-forced-newline" />
</p>

<div>
<ul>
<li>
<a href='#modSwiftMailer-WhatismodSwiftMailer%3F'>What is modSwiftMailer?</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href='#modSwiftMailer-Roadmap'>Roadmap</a>
</li>

<li>
<a href='#modSwiftMailer-Currentversion'>Current version</a>
</li>
</ul>
</li>

<li>
<a href='#modSwiftMailer-Requirements'>Requirements</a>
</li>

<li>
<a href='#modSwiftMailer-History'>History</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href='#modSwiftMailer-Download'>Download</a>
</li>
</ul>
</li>

<li>
<a href='#modSwiftMailer-Usage'>Usage</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href='#modSwiftMailer-Abasiclittleemail'>A basic little e-mail</a>
</li>
</ul>
</li>

<li>
<a href='#modSwiftMailer-Examples'>Examples</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href='#modSwiftMailer-Sendingasimpleemail'>Sending a simple e-mail</a>
</li>

<li>
<a href='#modSwiftMailer-Gettingmorecomplex%3Bmultiplerecipients'>Getting more complex; multiple recipients</a>
</li>
</ul>
</li>

<li>
<a href='#modSwiftMailer-Troubleshooting'>Troubleshooting</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href='#modSwiftMailer-Myemailsarenotbeingsent'>My e-mails are not being sent</a>
</li>

<li>
<a href='#modSwiftMailer-ItwontsentmyemailsbecauseofsomethingcalledaReturnPath'>It wont sent my e-mails because of something called a Return-Path</a>
</li>

<li>
<a href='#modSwiftMailer-Mypackagewon%27tinstall'>My package won't install</a>
</li>
</ul>
</li>
</ul>
</div>

<p>
<font color="red">On some poorly migrated copies of MODX the package might not install. This problem may also appear with default installations when the folders are not Apache/root assigned. Please refer to the troubleshooting section for more information.</font>
</p>

<h2>
<a name="modSwiftMailer-WhatismodSwiftMailer%3F"></a>What is modSwiftMailer?
</h2>

<p>
modSwiftMailer is a <ins>3rd-party core add-on</ins> by Mark Ernst that extends the <a href="/display/revolution20/modMail" title="modMail">modMail</a> functionality and provides a much more configurable implementation of the native modMail (in combination with PHPMailer) class. modSwiftMailer is based on&nbsp;<a href="http://swiftmailer.org/" class="external-link" rel="nofollow">Swift Mailer</a>&nbsp;which is an open-source library by Chris Corbyn. Although the usage of modSwiftMailer is almost exactly the same as modPHPMailer in core functionality, it provides a couple of differences and advantages.
</p>

<h3>
<a name="modSwiftMailer-Roadmap"></a>Roadmap
</h3>

<p>
I've got some features planned which you can find in the readme.txt when you download modSwiftMailer. Below is the roadmap for modSwiftMailer. The additions are not necessarily in order of importance and these are not binding, which means that they might be pushed sooner or later, depending on their importance at the time.
</p>

<ul>
<li>Inline attachments
</li>

<li>Extend debug functionality towards the mod log function
</li>

<li>Make auto-configurable (with one command)
</li>

<li>Make auto-launchable (with one command)
</li>

<li>Native date headers
</li>

<li>More complete readme documentation
</li>

<li>E-mail validation addon: MX Record check
</li>

<li>Rebuild a native MODX/Swift Mailer decorator to work with the modParser class
</li>
</ul>

<h3>
<a name="modSwiftMailer-Currentversion"></a>Current version
</h3>

<p>
The current version supports about 90% of Swift Mailer's regular usage functionality. Please refer to the changelog.txt to see what has been added/fixed/improved and the Roadmap above for plans in the near future.
</p>

<h2>
<a name="modSwiftMailer-Requirements"></a>Requirements
</h2>

<ul>
<li>MODx Revolution 2.0.2-pl or later
</li>

<li>PHP5 or later
</li>

<li>Knowledge of <a href="/display/revolution20/modMail" title="modMail">modMail</a>
</li>
</ul>

<h2>
<a name="modSwiftMailer-History"></a>History
</h2>

<p>
modSwiftMailer was created and programmed by Mark Ernst (ReSpawN) and released on 18th of July, 2011.
</p>

<h3>
<a name="modSwiftMailer-Download"></a>Download
</h3>

<p>
modSwiftMailer is available in the&nbsp;<a href="http://modx.com/extras/package/modswiftmailer" class="external-link" rel="nofollow">MODX Extras repository</a>&nbsp;(direct link) and in your&nbsp;MODX&nbsp;Revolution' <a href="/display/revolution20/Package+Management" title="Package Management">Package Management</a>.
</p>

<h2>
<a name="modSwiftMailer-Usage"></a>Usage
</h2>

<p>
I tried to make it as easy as possible to switch from modPHPMailer to modSwiftMailer, so with that in mind the following wouldn't be that different from what you already have.
</p>

<h3>
<a name="modSwiftMailer-Abasiclittleemail"></a>A basic little e-mail
</h3>

<p>
Firstly we're going to create a plain, little e-mail. This is a neat piece of code that you most likely will use to test a chunk of development code.
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
$modx-&gt;getService('mail', 'mail.modSwiftMailer');

$modx-&gt;mail-&gt;address('to', 'recipient@domain.tld', 'Recipient');
$modx-&gt;mail-&gt;address('sender', 'sender@domain.tld');
$modx-&gt;mail-&gt;subject('Dear GOD why won\'t my code function properly!');
$modx-&gt;mail-&gt;body(print_r($data, <span class="code-keyword">true</span>));

$modx-&gt;mail-&gt;send();
</pre>
</div>
</div>

<p>
Hey you! Go ahead and slap that sucker into a snippet. <img class="emoticon" src="/images/icons/emoticons/wink.gif" height="20" width="20" align="absmiddle" alt="" border="0" /> It will, if you have set up your MODX in the right manner, send you an e-mail with a subject and printed array.
</p>

<p>
<b>You might have noticed</b> that next to modPHPMailer, you're missing a couple of lines of code. For example, we're missing modMail::MAIL_FROM lines, the reply-to field, setHTML, error catching and the reset function.
<br />
What basically happens is, modSwiftMailer nativly sends UTF-8 encoded, 8bit encrypted text/html mails for your pleasure. This means that you can natively incorporate ANY chunk into modSwiftMailer without changing defaults or overriding behaviours (such as setHTML). More on that later.
</p>

<p>
By now you would've recieved your first modSwiftMailer e-mail and you're ready to rock. Try expanding your e-mail with the following examples.
</p>

<h2>
<a name="modSwiftMailer-Examples"></a>Examples
</h2>

<h3>
<a name="modSwiftMailer-Sendingasimpleemail"></a>Sending a simple e-mail
</h3>

<p>
The following code allows you to send a e-mail to <b>one</b> recipient. If you want to use this code in a for(each) loop, you should most definitly use $modx-&gt;mail-&gt;reset() after (thus inside) each loop.
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
$modx-&gt;getService('mail', 'mail.modSwiftMailer');

$modx-&gt;mail-&gt;address('to', 'recipient@domain.tld', 'Recipient');
$modx-&gt;mail-&gt;address('sender', 'sender@domain.tld');
$modx-&gt;mail-&gt;subject('A simple e-mail');
$modx-&gt;mail-&gt;body('&lt;h1&gt;Simple e-mail&lt;/h1&gt;&lt;p&gt;With a basic message&lt;/p&gt;');

$modx-&gt;mail-&gt;send();
</pre>
</div>
</div>

<h3>
<a name="modSwiftMailer-Gettingmorecomplex%3Bmultiplerecipients"></a>Getting more complex; multiple recipients
</h3>

<p>
By design, modSwiftMailer allows you to send your mail to, literally, an array of recipients. This is achieved in a couple of ways.
</p>

<p>
First off, start with starting the modSwiftMailer service. Really? Yes, really.
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
$modx-&gt;getService('mail', 'mail.modSwiftMailer');
</pre>
</div>
</div>

<p>
Now, modSwiftMailer allows to insert basically any format you wish, but each has a different output.
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
$modx-&gt;mail-&gt;address('to', 'recipient@domain.tld', 'Recipient');
</pre>
</div>
</div>

<p>
Will add <b>one</b> e-mail, "recipient@domain.tld" with the <b>name</b> "Recipient".
</p>

<p>
I like a little real work scenario with my e-mails, so lets mail the partial cast of How I Met Your Mother.
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
$modx-&gt;mail-&gt;address('to', array(
        'barneystinson@howimetyourmother.tld' =&gt; 'Barney Stison',
        'tedmosby@howimetyourmother.tld' =&gt; 'Ted Mosby'
));
</pre>
</div>
</div>

<p>
Will add <b>two</b> e-mails, "barneystinson@howimetyourmother.tld" with the <b>name</b> "Barney Stison" and "tedmosby@howimetyourmother.tld" with the <b>name</b> "Ted Mosby".
</p>

<p>
Aside from that little example, there is another way to send an e-mail to the same person with multiple e-mail addresses. Granted, you will not be using this unless you're e-mailing an entire Korean family called "Li", but that's a whole different matter.
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
$modx-&gt;mail-&gt;address('to', array(
        'barneystinson@howimetyourmother.tld',
        'tedmosby@howimetyourmother.tld'
), 'How I Met Your Mother <span class="code-keyword">cast</span>');
</pre>
</div>
</div>

<p>
Will add <b>two</b> e-mails, "barneystinson@howimetyourmother.tld" and "tedmosby@howimetyourmother.tld" both with the <b>name</b> "How I Met Your Mother cast".
</p>

<p>
Finally, imagine your form was plugged into a <a href="/display/ADDON/FormIt" title="FormIt">FormIt</a> postHook which has an optional fullname (or name or username) field, which isn't always set or contains data. Your e-mails would look pretty crappy, won't they? Nay!
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
$modx-&gt;mail-&gt;address('to', array(
        'barneystinson@howimetyourmother.tld',
        'tedmosby@howimetyourmother.tld' =&gt; 'Ted Mosby'
));
</pre>
</div>
</div>

<p>
Granted, I reckon the first, second and fourth examples will be used the most, but I like a little challenge.
</p>

<p>
Again, in a poorly scripted <a href="/display/ADDON/FormIt.Hooks" title="FormIt.Hooks">FormIt postHook</a> you also want to e-mail the same e-mail to a BCC (*B*lind *C*arbon *C*opy) recipient. Easy pease, exactly the same functionality as to;
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
$modx-&gt;mail-&gt;address('bcc', 'phantom@theopera.tld', 'Phantom');
</pre>
</div>
</div>

<p>
Now comes the part which sets your e-mail apart from those pesky, instant-coffee-like e-mails out there, the 'couple-liners' that define the origination of the e-mail.
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
$modx-&gt;mail-&gt;address('sender', 'sender@domain.tld');
$modx-&gt;mail-&gt;address('from', 'from@domain.tld', 'Graphical sender');
</pre>
</div>
</div>

<p>
The "sender" always appears in your e-mail's headers. Usually this is the webserver' pre-coded no-reply e-mail address but that isn't always the case. Want to prevent your e-mail from being marked as spam, just use that! (if your e-mail however is as "spammy" as they come, that won't help) The "from" is basically what will be picked up by your e-mail program. It will show the name next to the subject ("Graphical sender") and when you view the details (or the headers), it will appear as Graphical sender &lt;from@domain.tld&gt;.
</p>

<p>
Lastly, you <b>can</b> define a bounce address and reply-to address. If you don't provide a reply-to address, it will nativly pick up the senders or from e-mail address (depends on the program).
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
$modx-&gt;mail-&gt;bounce('bounce@domain.tld');
$modx-&gt;mail-&gt;receipt('receipt@domain.tld');
$modx-&gt;mail-&gt;replyto('no-reply@domain.tld');
</pre>
</div>
</div>

<p>
Oh yea, I snug a little receipt in there. It isn't supported by webbrowsers but I <em>guess</em> Outlook and Thunderbird pick it up as a read-confirmation.
</p>

<p>
Finally, of course, we want to send that e-mail to all defined recipients (to, cc and bcc). Oh yea, we're gonna add some content and a subject too - of course.
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
$modx-&gt;mail-&gt;subject('A subject');
$modx-&gt;mail-&gt;body('Some content');

$modx-&gt;mail-&gt;send();
</pre>
</div>
</div>

<h2>
<a name="modSwiftMailer-Troubleshooting"></a>Troubleshooting
</h2>

<h3>
<a name="modSwiftMailer-Myemailsarenotbeingsent"></a>My e-mails are not being sent
</h3>

<p>
<b>I am using native mail()</b>
<br />
Your current SMTP provider doesn't accept your commands or query or the e-mail address you're trying to mail is invalid. When working on a local machine, Windows 32/64bit, Linux or Mac, all need a valid, up and working SMTP from your current host. Most of the time, this can be found out by "tracert"-ing your current IP (Windows tested). Simply tracert your external IP and a part of your host should at least appear (dynamic.host.tld). Enter that value into your php.ini (WAMP, LAMP) and you're ready to go.
</p>

<p>
<b>I am using sendmail (Linux)</b>
<br />
This is a tricky feature at best, since every Linux based machine is set up differently. Please check your MAIL_ENGINE_PATH (which is used with sendmail) and validate of that works. You might even try that with modPHPMailer. If modPHPMailer works (thus pwns modSwiftMailer), please give me a heads-up.
</p>

<p>
<b>I am using an internal SMTP (ISP)</b>
<br />
ISP stands for Interner Service Provider and is your "SMTP provider" in <b>I am using native mail()</b>. Please refer to that troubleshooting section for more information.
</p>

<p>
<b>I am using an external SMTP</b>
<br />
Please check if you have your authentication set up right. SMTP most of the time requirs the right hostname, port and authentication. Usually a authentication is in the format of a username an password (user: smtp@domain.tld, pass: <b>doh</b>?).
</p>

<h3>
<a name="modSwiftMailer-ItwontsentmyemailsbecauseofsomethingcalledaReturnPath"></a>It wont sent my e-mails because of something called a Return-Path
</h3>

<p>
Try setting one of three (preferably all three): sender, bounce (Return-Path) and from addresses.
</p>

<h3>
<a name="modSwiftMailer-Mypackagewon%27tinstall"></a>My package won't install
</h3>

<p>
This might be a small glitch on my part. Try setting the model/modx/mail directory to CHMOD 0777 and try it again.
</p>