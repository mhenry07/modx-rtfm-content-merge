<div>
<ul>
<li>
<a href='#LexRating-Description'>Description</a>
</li>

<li>
<a href='#LexRating-LexRating'>LexRating</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href='#LexRating-Properties'>Properties</a>
</li>

<li>
<a href='#LexRating-Placeholders'>Placeholders</a>
</li>

<li>
<a href='#LexRating-Example'>Example</a>
</li>
</ul>
</li>

<li>
<a href='#LexRating-LexRatingList'>LexRatingList</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href='#LexRating-Properties'>Properties</a>
</li>

<li>
<a href='#LexRating-Placeholders'>Placeholders</a>
</li>

<li>
<a href='#LexRating-Example'>Example</a>
</li>
</ul>
</li>

<li>
<a href='#LexRating-LexRatingQuipPostHook'>LexRatingQuipPostHook</a>
</li>
</ul>
</div>

<h1>
<a name="LexRating-Description"></a>Description
</h1>

<p>
LexRating (by <a href="http://twitter.com/_goldsky" class="external-link" rel="nofollow">goldsky</a>) is a jQuery's star rating plugin, based on <a href="http://rateit.codeplex.com" class="external-link" rel="nofollow">rateit.codeplex.com</a> (by <a href="http://twitter.com/gjunge" class="external-link" rel="nofollow">gidon</a>).
</p>

<p>
For MODX implementation, this extra uses AJAX to store the rating.
</p>

<p>
All issues can be notified in its <a href="https://github.com/goldsky/LexRating/issues" class="external-link" rel="nofollow">github's page</a>.
</p>

<p>
You can get it by downloading it via Package Manager.
</p>

<p>
There are 2 snippets for this package:
</p>

<ol>
<li>
<b>LexRating</b>,
</li>

<li>
<b>LexRatingList</b>, to list the rating results.
</li>
</ol>

<p>
There is a Quip's hook:&nbsp;<b>LexRatingQuipPostHook</b>, to create a star rating on each comment.
<br />
Think about a comment based star rating.
</p>

<p>
<span class="image-wrap" style=""><a class="confluence-thumbnail-link 697x1105" href='http://oldrtfm.modx.com/download/attachments/43417740/comment%20based%20rating.jpg'><img src="/download/thumbnails/43417740/comment%20based%20rating.jpg" style="border: 1px solid black" /></a></span>
</p>

<h1>
<a name="LexRating-LexRating"></a>LexRating
</h1>

<p>
This snippet offers web visitor to give a rating into an object/item, based on the given name.
<br />
This snippet checks the visitor's IP address, and if visitor logged in, the visitor's ID
</p>

<h2>
<a name="LexRating-Properties"></a>Properties
</h2>

<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<th class='confluenceTh'>
Name
</th>
<th class='confluenceTh'>
Description
</th>
<th class='confluenceTh'>
Example
</th>
<th class='confluenceTh'>
Default Value
</th>
<th class='confluenceTh'>
Options
</th>
</tr>

<tr>
<td class='confluenceTd'>
name
</td>
<td class='confluenceTd'>
Defines the name of the rating's item
</td>
<td class='confluenceTd'>
&amp;name=`[[*pagetitle]]`
</td>
<td class='confluenceTd'>
[[*id]]
</td>
<td class='confluenceTd'>
string
</td>
</tr>

<tr>
<td class='confluenceTd'>
group
</td>
<td class='confluenceTd'>
Defines the rating's group name.
<br class="atl-forced-newline" />
This will be useful to compare the results using LexRatingList
</td>
<td class='confluenceTd'>
&amp;group=`articles`
</td>
<td class='confluenceTd'>
modResource
</td>
<td class='confluenceTd'>
string
</td>
</tr>

<tr>
<td class='confluenceTd'>
userGroups
</td>
<td class='confluenceTd'>
Defines who is able to vote.
</td>
<td class='confluenceTd'>
&amp;userGroups=`Members`
</td>
<td class='confluenceTd'>
empty
</td>
<td class='confluenceTd'>
comma separated group names
</td>
</tr>

<tr>
<td class='confluenceTd'>
extended
</td>
<td class='confluenceTd'>
(@since 1.0.0-beta.2) To set and get an additional extended parameter of individual vote account
</td>
<td class='confluenceTd'>
&amp;extended=`{"quipReplyId":"[<span class="error">[+idprefix]</span>][<span class="error">[+id]</span>]"}`
</td>
<td class='confluenceTd'>
empty
</td>
<td class='confluenceTd'>
practically any string
</td>
</tr>

<tr>
<td class='confluenceTd'>
initialAjax
</td>
<td class='confluenceTd'>
Load the initial values using Ajax
</td>
<td class='confluenceTd'>
&amp;initialAjax=`1`
</td>
<td class='confluenceTd'>
1
</td>
<td class='confluenceTd'>
1 | 0
</td>
</tr>

<tr>
<td class='confluenceTd'>
readOnly
</td>
<td class='confluenceTd'>
(@since 1.0.0-beta.2) read only mode
</td>
<td class='confluenceTd'>
&amp;readOnly=`1`
</td>
<td class='confluenceTd'>
1
</td>
<td class='confluenceTd'>
1 | 0
</td>
</tr>

<tr>
<td class='confluenceTd'>
tpl
</td>
<td class='confluenceTd'>
Template chunk for the output, can be chunk or file based chunk.
</td>
<td class='confluenceTd'>
&amp;tpl=`[[++core_path]]templates/blabla.tpl`
</td>
<td class='confluenceTd'>
lexrating
</td>
<td class='confluenceTd'>
chunk name or file path
</td>
</tr>

<tr>
<td class='confluenceTd'>
css
</td>
<td class='confluenceTd'>
CSS filename
</td>
<td class='confluenceTd'>
&amp;css=`assets/templates/css/blabla.css`
</td>
<td class='confluenceTd'>
assets/components/lexrating/default/css/lexrating.css
</td>
<td class='confluenceTd'>
string | empty - disabling
</td>
</tr>

<tr>
<td class='confluenceTd'>
js
</td>
<td class='confluenceTd'>
Javascript filename
</td>
<td class='confluenceTd'>
&amp;css=`assets/templates/js/blabla.js`
</td>
<td class='confluenceTd'>
assets/components/lexrating/default/js/lexrating.js
</td>
<td class='confluenceTd'>
string | empty - disabling
</td>
</tr>

<tr>
<td class='confluenceTd'>
loadjQuery
</td>
<td class='confluenceTd'>
Auto load/disable jQuery
</td>
<td class='confluenceTd'>
&amp;loadjQuery=`0`
</td>
<td class='confluenceTd'>
1
</td>
<td class='confluenceTd'>
1 | 0
</td>
</tr>

<tr>
<td class='confluenceTd'>
phsPrefix
</td>
<td class='confluenceTd'>
Prefix for placeholders
</td>
<td class='confluenceTd'>
&amp;phsPrefix=`blabla.`
</td>
<td class='confluenceTd'>
lexrating.
</td>
<td class='confluenceTd'>
string
</td>
</tr>

<tr>
<td class='confluenceTd'>
toArray
</td>
<td class='confluenceTd'>
Return an array of placeholders
</td>
<td class='confluenceTd'>
&amp;toArray=`1`
</td>
<td class='confluenceTd'>
null
</td>
<td class='confluenceTd'>
1 | 0 | null
</td>
</tr>

<tr>
<td class='confluenceTd'>
toPlaceholder
</td>
<td class='confluenceTd'>
Save the output into the given name placeholder
</td>
<td class='confluenceTd'>
&amp;toPlaceholder=`my_rating`
</td>
<td class='confluenceTd'>
null
</td>
<td class='confluenceTd'>
string
</td>
</tr>
</tbody>
</table>
</div>

<h2>
<a name="LexRating-Placeholders"></a>Placeholders
</h2>

<p>
To get the complete placeholders, just use <b>&amp;toArray=`1`</b> to spit out the keys.
</p>

<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<th class='confluenceTh'>
Name
</th>
<th class='confluenceTh'>
Description
</th>
</tr>

<tr>
<td class='confluenceTd'>
[[+lexrating.name]]
</td>
<td class='confluenceTd'>
The name you specify in the snippet
</td>
</tr>

<tr>
<td class='confluenceTd'>
[[+lexrating.group]]
</td>
<td class='confluenceTd'>
The group name you specify in the snippet
</td>
</tr>

<tr>
<td class='confluenceTd'>
[[+lexrating.total.voters]]
</td>
<td class='confluenceTd'>
Total number of the voters
</td>
</tr>

<tr>
<td class='confluenceTd'>
[[+lexrating.initialAjax]]
</td>
<td class='confluenceTd'>
The property you set in the snippet call
</td>
</tr>
</tbody>
</table>
</div>

<h2>
<a name="LexRating-Example"></a>Example
</h2>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
[[LexRating?
&amp;name=`[[*pagetitle]]`
&amp;group=`articles`
&amp;userGroups=`Members`
]]
</pre>
</div>
</div>

<p>
If you just want to display a rating of an item, use this
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
[[LexRating?
&amp;name=`[[*pagetitle]]`
&amp;group=`articles`
&amp;initialAjax=`0`
&amp;readOnly=`1`
]]
</pre>
</div>
</div>

<h1>
<a name="LexRating-LexRatingList"></a>LexRatingList
</h1>

<p>
This snippet retrieves the items of the LexRating's results based on the given group name.
</p>

<h2>
<a name="LexRating-Properties"></a>Properties
</h2>

<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<th class='confluenceTh'>
Name
</th>
<th class='confluenceTh'>
Description
</th>
<th class='confluenceTh'>
Example
</th>
<th class='confluenceTh'>
Default Value
</th>
<th class='confluenceTh'>
Options
</th>
</tr>

<tr>
<td class='confluenceTd'>
group
</td>
<td class='confluenceTd'>
The group name to be retrieved
</td>
<td class='confluenceTd'>
&amp;group=`articles`
</td>
<td class='confluenceTd'>
modResource
</td>
<td class='confluenceTd'>
string
</td>
</tr>

<tr>
<td class='confluenceTd'>
limit
</td>
<td class='confluenceTd'>
Limit the number of ouput
</td>
<td class='confluenceTd'>
&amp;limit=`10`
</td>
<td class='confluenceTd'>
10
</td>
<td class='confluenceTd'>
int
</td>
</tr>

<tr>
<td class='confluenceTd'>
offset
</td>
<td class='confluenceTd'>
Query's limit offset
</td>
<td class='confluenceTd'>
&amp;offset=`10`
</td>
<td class='confluenceTd'>
0
</td>
<td class='confluenceTd'>
int
</td>
</tr>

<tr>
<td class='confluenceTd'>
sort
</td>
<td class='confluenceTd'>
Sorting direction
</td>
<td class='confluenceTd'>
&amp;sort=`asc`
</td>
<td class='confluenceTd'>
desc
</td>
<td class='confluenceTd'>
asc (lo-hi) | desc (hi-lo)
</td>
</tr>

<tr>
<td class='confluenceTd'>
tplListWrapper
</td>
<td class='confluenceTd'>
Template chunk for wrapper, can be chunk or file based chunk
</td>
<td class='confluenceTd'>
&amp;tplListWrapper=`lexratinglist.wrapper`
</td>
<td class='confluenceTd'>
lexratinglist.wrapper
</td>
<td class='confluenceTd'>
chunk name or file path
</td>
</tr>

<tr>
<td class='confluenceTd'>
tplListItem
</td>
<td class='confluenceTd'>
Template chunk for each item, can be chunk or file based chunk
</td>
<td class='confluenceTd'>
&amp;tplListItem=`lexratinglist.item`
</td>
<td class='confluenceTd'>
lexratinglist.item
</td>
<td class='confluenceTd'>
chunk name or file path
</td>
</tr>

<tr>
<td class='confluenceTd'>
css
</td>
<td class='confluenceTd'>
CSS filename
</td>
<td class='confluenceTd'>
&amp;css=`assets/templates/css/blabla.css`
</td>
<td class='confluenceTd'>
assets/components/lexrating/default/css/lexrating.css
</td>
<td class='confluenceTd'>
string | empty - disabling
</td>
</tr>

<tr>
<td class='confluenceTd'>
js
</td>
<td class='confluenceTd'>
Javascript filename
</td>
<td class='confluenceTd'>
&amp;css=`assets/templates/js/blabla.js`
</td>
<td class='confluenceTd'>
assets/components/lexrating/default/js/lexrating.js
</td>
<td class='confluenceTd'>
string | empty - disabling
</td>
</tr>

<tr>
<td class='confluenceTd'>
loadjQuery
</td>
<td class='confluenceTd'>
Auto load/disable jQuery
</td>
<td class='confluenceTd'>
&amp;loadjQuery=`0`
</td>
<td class='confluenceTd'>
1
</td>
<td class='confluenceTd'>
1 | 0
</td>
</tr>

<tr>
<td class='confluenceTd'>
phsPrefix
</td>
<td class='confluenceTd'>
Prefix for placeholders
</td>
<td class='confluenceTd'>
&amp;phsPrefix=`blabla.`
</td>
<td class='confluenceTd'>
lexrating.
</td>
<td class='confluenceTd'>
string
</td>
</tr>

<tr>
<td class='confluenceTd'>
toArray
</td>
<td class='confluenceTd'>
Return an array of placeholders
</td>
<td class='confluenceTd'>
&amp;toArray=`1`
</td>
<td class='confluenceTd'>
null
</td>
<td class='confluenceTd'>
1 | 0 | null
</td>
</tr>

<tr>
<td class='confluenceTd'>
toPlaceholder
</td>
<td class='confluenceTd'>
Save the output into the given name placeholder
</td>
<td class='confluenceTd'>
&amp;toPlaceholder=`my_rating`
</td>
<td class='confluenceTd'>
null
</td>
<td class='confluenceTd'>
string
</td>
</tr>
</tbody>
</table>
</div>

<h2>
<a name="LexRating-Placeholders"></a>Placeholders
</h2>

<p>
To get the complete placeholders, just use <b>&amp;toArray=`1`</b> to spit out the keys.
</p>

<p>
<b>WRAPPER</b>
</p>

<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<th class='confluenceTh'>
Name
</th>
<th class='confluenceTh'>
Description
</th>
</tr>

<tr>
<td class='confluenceTd'>
[[+lexrating.list.items]]
</td>
<td class='confluenceTd'>
The holder of the list of the items
</td>
</tr>
</tbody>
</table>
</div>

<p>
<b>LIST</b>
</p>

<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<th class='confluenceTh'>
Name
</th>
<th class='confluenceTh'>
Description
</th>
</tr>

<tr>
<td class='confluenceTd'>
[[+lexrating.name]]
</td>
<td class='confluenceTd'>
The name you specify in the snippet
</td>
</tr>

<tr>
<td class='confluenceTd'>
[[+lexrating.group]]
</td>
<td class='confluenceTd'>
The group name you specify in the snippet
</td>
</tr>

<tr>
<td class='confluenceTd'>
[[+lexrating.total.voters]]
</td>
<td class='confluenceTd'>
Total number of the voters
</td>
</tr>

<tr>
<td class='confluenceTd'>
[[+lexrating.initialAjax]]
</td>
<td class='confluenceTd'>
The property you set in the snippet call
</td>
</tr>
</tbody>
</table>
</div>

<h2>
<a name="LexRating-Example"></a>Example
</h2>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
[[LexRatingList? &amp;group=`articles`]]
</pre>
</div>
</div>

<h1>
<a name="LexRating-LexRatingQuipPostHook"></a>LexRatingQuipPostHook
</h1>

<p>
This hook requires quip's thread name.
<br />
This only works once for each IP Address + userID.
<br />
So any logged in user can not vote twice.
</p>

<p>
On the quip's call, try to use this as an example:
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-html">
<span class="code-tag">&lt;p&gt;</span>Total Rating:<span class="code-tag">&lt;/p&gt;</span>
[[!LexRatingList?
&amp;name=`threadNameHere`
&amp;group=`Overall Rating`
]]
<span class="code-tag">&lt;br /&gt;</span>
[[!Quip?
&amp;thread=`threadNameHere`
&amp;tplComment=`lexrating.quipComment`
]]
<span class="code-tag">&lt;br /&gt;</span>
[[!QuipReply?
&amp;thread=`threadNameHere`
&amp;postHooks=`LexRatingQuipPostHook`
&amp;tplAddComment=`lexrating.quipAddComment`
&amp;redirectTo=`[[*id]]`
]]
</pre>
</div>
</div>

<p>
You can sync the connection between the thread's name (eg:<b>threadNameHere</b>) with the <b>LexRating</b> inside the other chunk, <b>lexrating.quipComment</b>.
<br />
Basically, it only adds up the <b>LexRating</b> call but with the proper properties to make this works:
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-html">
[[!LexRating?
&amp;group=`Overall Rating`
&amp;name=`[[+thread]]`
&amp;extended=`{<span class="code-quote">"quipReplyId"</span>:<span class="code-quote">"[[+idprefix]][[+id]]"</span>}`
&amp;readOnly=`1`
&amp;tpl=`lexrating.quip`
&amp;js=``
&amp;loadjQuery=`0`
&amp;initialAjax=`0`
&amp;_toArray=`1`
]]
</pre>
</div>
</div>

<div class='panelMacro'>
<table class='noteMacro'>
<colgroup>
<col width='24' />
<col />
</colgroup>

<tr>
<td valign='top'>
<img src="/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0" />
</td>
<td>
&amp;group is for the title,
<br />
&amp;name must be as same as the quip's thread name
</td>
</tr>
</table>
</div>

<p>
What <b>&amp;extended</b> does is only to identify each of the vote. You can change it anything, as long as it's the same with what the <b>lexrating.quip</b> needs for its placeholder.
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
data-rateit-extended=<span class="code-quote">"[[+lexrating.extended]]"</span>
</pre>
</div>
</div>

<p>
You must specify different names for the quip's thread names, remember to change/duplicate part of the chunks:
</p>

<p>
the duplicate of <b>lexrating.quipAddComment</b>
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-html">
        <span class="code-tag"><span class="code-comment">&lt;!-- replace lexrating_groupName's value with what you have as the &amp;group --&gt;</span></span>
        <span class="code-tag">&lt;input type=<span class="code-quote">"hidden"</span> name=<span class="code-quote">"lexrating_groupName"</span> value=<span class="code-quote">"Overall Rating"</span> /&gt;</span>

        <span class="code-tag"><span class="code-comment">&lt;!-- but leave this one untouched because the &amp;name is using the same placeholder [[+thread]] anyway --&gt;</span></span>
        <span class="code-tag">&lt;input type=<span class="code-quote">"hidden"</span> name=<span class="code-quote">"lexrating_objectName"</span> value=<span class="code-quote">"[[+thread]]"</span> /&gt;</span>
</pre>
</div>
</div>

<p>
the duplicate of <b>lexrating.quipComment</b>
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&amp;group=`Overall Rating` <span class="code-comment">// &lt;== replace <span class="code-keyword">this</span></span>
</pre>
</div>
</div>

<div class='panelMacro'>
<table class='warningMacro'>
<colgroup>
<col width='24' />
<col />
</colgroup>

<tr>
<td valign='top'>
<img src="/images/icons/emoticons/forbidden.gif" width="16" height="16" align="absmiddle" alt="" border="0" />
</td>
<td>
You need to empty out the database when testing, because LexRating fills up the data automatically, while the access is limited to once per IP/user ID
</td>
</tr>
</table>
</div>