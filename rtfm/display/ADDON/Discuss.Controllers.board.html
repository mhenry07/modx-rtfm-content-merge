<p>
The board controller builds an overview of threads in a board.
</p>

<div>
<ul>
<li>
<a href="extras/revo/discuss/discuss.controllers/discuss.controllers.board#Discuss.Controllers.board-BasicInformation">Basic Information</a>
</li>

<li>
<a href="extras/revo/discuss/discuss.controllers/discuss.controllers.board#Discuss.Controllers.board-Options">Options</a>
</li>

<li>
<a href="extras/revo/discuss/discuss.controllers/discuss.controllers.board#Discuss.Controllers.board-ControllerTemplate">Controller Template</a>
</li>

<li>
<a href="extras/revo/discuss/discuss.controllers/discuss.controllers.board#Discuss.Controllers.board-SystemEvents">System Events</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href="extras/revo/discuss/discuss.controllers/discuss.controllers.board#Discuss.Controllers.board-OnDiscussRenderBoard">OnDiscussRenderBoard</a>
</li>
</ul>
</li>
</ul>
</div>

<h2>
<a name="Discuss.Controllers.board-BasicInformation" id="Discuss.Controllers.board-BasicInformation"></a>Basic Information
</h2>

<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<td class='confluenceTd'>
Since Version
</td>
<td class='confluenceTd'>
1.0
</td>
</tr>

<tr>
<td class='confluenceTd'>
Controller File
</td>
<td class='confluenceTd'>
controllers/web/board.class.php
</td>
</tr>

<tr>
<td class='confluenceTd'>
Controller Class Name
</td>
<td class='confluenceTd'>
DiscussBoardController
</td>
</tr>

<tr>
<td class='confluenceTd'>
Controller Template
</td>
<td class='confluenceTd'>
pages/board.tpl
</td>
</tr>

<tr>
<td class='confluenceTd'>
Manifest Name
</td>
<td class='confluenceTd'>
board
</td>
</tr>
</tbody>
</table>
</div>

<p>
<span class="image-wrap" style=""><img src="https://img.skitch.com/20120916-fqd33t11u3en2xrscqe4kyu8j4.jpg" width="600" style="border: 1px solid black" /></span>
</p>

<h2>
<a name="Discuss.Controllers.board-Options" id="Discuss.Controllers.board-Options"></a>Options
</h2>

<p>
If you don't know what the manifest is, please go back to the <a href="display/ADDON/Discuss.Getting+Started" title="Discuss.Getting Started">Getting Started</a> document. The options below need to go into the "board" options array of the manifest.
</p>

<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<th class='confluenceTh'>
Key
</th>
<th class='confluenceTh'>
Default
</th>
<th class='confluenceTh'>
Description
</th>
</tr>

<tr>
<td class='confluenceTd'>
showSubBoards
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
When set to true, subboards will be available in the "boards" placeholder. When no boards are available, the "boards" placeholder will be empty and "boards_toggle" will have a value of "display: none;", which can be used to hide outer wrappers for subboards.
</td>
</tr>

<tr>
<td class='confluenceTd'>
showReaders
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
When set to true, users viewing the board will be available in the "readers" placeholder. User needs discuss.view_online permission. Setting discuss.show_whos_online needs to be enabled. Text is built up from the users' username, wrapped in an &lt;a&gt; tag if the user has access to view profiles, with multiple people viewing joined together with a comma.
</td>
</tr>

<tr>
<td class='confluenceTd'>
showModerators
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
When set to true, the moderators for the current board will be available in the "moderators" placeholder. The text in here will be built up from the users display or username, wrapped in an &lt;a&gt; tag if the viewer has access to view profiles, with multiple moderators joined together with a comma.
</td>
</tr>

<tr>
<td class='confluenceTd'>
showPaginationIfOnePage
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
If there is only one page of threads, this switch decides if there should be a pagination available in the "pagination" placeholder or not.
</td>
</tr>

<tr>
<td class='confluenceTd'>
<b>board/getlist common options</b>
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
&nbsp;
</td>
</tr>

<tr>
<td class='confluenceTd'>
lastPostTpl
</td>
<td class='confluenceTd'>
board/disLastPostBy
</td>
<td class='confluenceTd'>
Chunk used to create the "lastpost" placeholder. This chunk gets fed the following placeholders:
<ul>
<li>createdon: timestamp of post formatted to discuss.date_format system setting.
</li>

<li>user: iD of the user that last posted
</li>

<li>username: username of the user that last posted
</li>

<li>thread: ID of the thread last posted in
</li>

<li>id: the post ID
</li>

<li>url: the url to the last post
</li>

<li>author_link: &lt;a&gt; tag to author if user has access to view profiles, otherwise just the username.
</li>
</ul>
</td>
</tr>

<tr>
<td class='confluenceTd'>
subBoardTpl
</td>
<td class='confluenceTd'>
board/disSubForumLink
</td>
<td class='confluenceTd'>
Chunk used to loop over subforums to eventually fill the "subforums" placeholder after joined together with the value of the subBoardSeparator option. This chunk gets the following placeholders:
<ul>
<li>id: the ID of the subboard
</li>

<li>title: the title of the subboard
</li>
</ul>
</td>
</tr>

<tr>
<td class='confluenceTd'>
subBoardSeparator
</td>
<td class='confluenceTd'>
comma and line break (\n)
</td>
<td class='confluenceTd'>
Used to join together the subBoardTpl chunks to one string.
</td>
</tr>

<tr>
<td class='confluenceTd'>
categoryRowTpl
</td>
<td class='confluenceTd'>
category/disCategoryLi
</td>
<td class='confluenceTd'>
Chunk used to loop over categories. Gets the following placeholders:
<ul>
<li>list: boards belonging to the current category, formatted with the boardRowTpl option's chunk, &nbsp;joined with a newline (\n)
</li>

<li>rowClass: classes to apply to the category, either "alt" or "even".
</li>
</ul>
</td>
</tr>

<tr>
<td class='confluenceTd'>
boardRowTpl
</td>
<td class='confluenceTd'>
board/disBoardLi
</td>
<td class='confluenceTd'>
Chunk used to loop over boards. Gets the following placeholders:
<ul>
<li>
<a href="http://rtfm.modx.com/display/ADDON/Discuss.Database+Model#Discuss.DatabaseModel-disBoardBoards" class="external-link" rel="nofollow">All board fields</a> and the following:
</li>

<li>unread (1|0): if the board has been read by the user or not
</li>

<li>unread-cls (dis-unread|dis-read): class that can be used for changing the view of read/unread boards.
</li>

<li>last_post_createdon: user ID of last poster
</li>

<li>last_post_udn: use users' display name or not
</li>

<li>last_post_display_name: display name of the last poster
</li>

<li>lastPost: formatted last post information. See lastPostTpl for chunk and placeholders. Empty if no last poster.
</li>

<li>subforums: formatted list of subboards. See subBoardTpl for chunk and placeholders. Empty if no subboards.
</li>

<li>post_stats: formatted list of statistics for this board, based on the discuss.board_post_stats lexicon entry.
</li>

<li>is_locked: when the board is set to locked this returns an empty div with class dis-board-locked, otherwise it is empty.
</li>
</ul>
</td>
</tr>

<tr>
<td class='confluenceTd'>
checkUnread
</td>
<td class='confluenceTd'>
true
</td>
<td class='confluenceTd'>
When set to false, this board will not check if the user has read the posts in this forum and will simply mark them as read when not logged in, and unread when logged in. Note that this affects the unread and unread-cls placeholders for the boardRowTpl.
</td>
</tr>
</tbody>
</table>
</div>

<h2>
<a name="Discuss.Controllers.board-ControllerTemplate" id="Discuss.Controllers.board-ControllerTemplate"></a>Controller Template
</h2>

<p>
This controller template has the following placeholders you can use, on top of the placeholders mentioned in the options above:
</p>

<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<th class='confluenceTh'>
Placeholder
</th>
<th class='confluenceTh'>
Description
</th>
</tr>

<tr>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
<a href="http://rtfm.modx.com/display/ADDON/Discuss.Database+Model#Discuss.DatabaseModel-disBoardBoards" class="external-link" rel="nofollow">All fields of the disBoard object.</a>
</td>
</tr>

<tr>
<td class='confluenceTd'>
posts
</td>
<td class='confluenceTd'>
The posts in this board.
</td>
</tr>

<tr>
<td class='confluenceTd'>
boards
</td>
<td class='confluenceTd'>
Sub boards of this forum, if available and enabled (see options above).
</td>
</tr>

<tr>
<td class='confluenceTd'>
boards_toggle
</td>
<td class='confluenceTd'>
Either "display:none;" or empty depending on the value in boards.
</td>
</tr>

<tr>
<td class='confluenceTd'>
top
</td>
<td class='confluenceTd'>
Empty unless set by plugin on&nbsp;OnDiscussRenderBoard event by using $modx-&gt;event-&gt;output(array('name-of-placeholder' =&gt; 'stuff'));
</td>
</tr>

<tr>
<td class='confluenceTd'>
bottom
</td>
<td class='confluenceTd'>
See "top" placeholder.
</td>
</tr>

<tr>
<td class='confluenceTd'>
aboveThreads
</td>
<td class='confluenceTd'>
See "top" placeholder.
</td>
</tr>

<tr>
<td class='confluenceTd'>
belowBoards
</td>
<td class='confluenceTd'>
See "top" placeholder.
</td>
</tr>

<tr>
<td class='confluenceTd'>
belowThreads
</td>
<td class='confluenceTd'>
See "top" placeholder.
</td>
</tr>

<tr>
<td class='confluenceTd'>
pagination
</td>
<td class='confluenceTd'>
Pagination for this board.
</td>
</tr>

<tr>
<td class='confluenceTd'>
readers
</td>
<td class='confluenceTd'>
Users viewing this board
</td>
</tr>

<tr>
<td class='confluenceTd'>
moderators
</td>
<td class='confluenceTd'>
Moderators for this board
</td>
</tr>

<tr>
<td class='confluenceTd'>
trail
</td>
<td class='confluenceTd'>
Breadcrumbs for this board
</td>
</tr>

<tr>
<td class='confluenceTd'>
actionbuttons
</td>
<td class='confluenceTd'>
Actions avialable for the user. See note on actionbuttons on the <a href="display/ADDON/Discuss.Controllers" title="Discuss.Controllers">Controllers</a> page.
</td>
</tr>
</tbody>
</table>
</div>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
[[+top]]
&lt;div&gt;
    &lt;form action=<span class="code-quote">"[[~[[*id]]]]search"</span> method=<span class="code-quote">"GET"</span>&gt;
        &lt;input type=<span class="code-quote">"hidden"</span> name=<span class="code-quote">"board"</span> value=<span class="code-quote">"[[+id]]"</span> /&gt;
        &lt;input type=<span class="code-quote">"text"</span> name=<span class="code-quote">"s"</span> value=<span class="code-quote">"" style="</span>width: 200px; margin-right: 5px;<span class="code-quote">" placeholder="</span>[[%discuss.search_this_board]]" /&gt;

        &lt;input type=<span class="code-quote">"submit"</span>  value=<span class="code-quote">"[[%discuss.search]]"</span> /&gt;
    &lt;/form&gt;
&lt;/div&gt;
[[+trail]]

[[+aboveBoards]]
&lt;ol style=<span class="code-quote">"[[+boards_toggle]]"</span>&gt;
[[+boards]]
&lt;/ol&gt;

[[+belowBoards]]

&lt;br /&gt;

[[+actionbuttons]]

&lt;div&gt;&lt;span&gt;[[%discuss.pages? &amp;namespace=`discuss` &amp;topic=`web`]]:&lt;/span&gt; &lt;ul&gt;[[+pagination]]&lt;/ul&gt;&lt;/div&gt;

&lt;br /&gt;

&lt;div&gt;
&lt;div&gt;
    &lt;div&gt;
        &lt;div style=<span class="code-quote">"width: 25%"</span>&gt;[[%discuss.last_post]]&lt;/div&gt;
        &lt;div style=<span class="code-quote">"width: 10%"</span>&gt;[[%discuss.replies]]&lt;/div&gt;
        &lt;div style=<span class="code-quote">"width: 10%"</span>&gt;[[%discuss.views]]&lt;/div&gt;
        &lt;div style=<span class="code-quote">"width: 55%;"</span>&gt;[[%discuss.message]]&lt;/div&gt;
    &lt;/div&gt;
    &lt;br /&gt;
&lt;/div&gt;
&lt;ol&gt;
[[+posts]]
&lt;/ol&gt;
&lt;/div&gt;

&lt;br /&gt;

[[+actionbuttons]]

&lt;div&gt;&lt;span&gt;[[%discuss.pages]]:&lt;/span&gt; &lt;ul&gt;[[+pagination]]&lt;/ul&gt;&lt;/div&gt;

[[+belowThreads]]

&lt;p&gt;[[+readers]]&lt;/p&gt;
&lt;p&gt;[[+moderators]]&lt;/p&gt;
&lt;p&gt;[[+trail]]&lt;/p&gt;

[[+bottom]]
</pre>
</div>
</div>

<h2>
<a name="Discuss.Controllers.board-SystemEvents" id="Discuss.Controllers.board-SystemEvents"></a>System Events
</h2>

<h3>
<a name="Discuss.Controllers.board-OnDiscussRenderBoard" id="Discuss.Controllers.board-OnDiscussRenderBoard"></a>OnDiscussRenderBoard
</h3>

<p>
All currently set placeholders are available through the $placeholders array. The return value or $modx-&gt;event-&gt;output() value is expected to be an array of placeholders to override. Using a plugin on this event is the only way to put a value in the top, bottom, aboveThreads, belowThreads, aboveBoards and belowBoards placeholders.
</p>