<div>
<ul>
<li>
<a href="extras/revo/upload-to-users-cmp#UploadtoUsersCMP-UploadtoUsersCMP">Upload to Users CMP</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href="extras/revo/upload-to-users-cmp#UploadtoUsersCMP-Examples">Examples</a>
</li>
</ul>
</li>

<li>
<a href="extras/revo/upload-to-users-cmp#UploadtoUsersCMP-UploadtoUsersSnippet">Upload to Users Snippet</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href="extras/revo/upload-to-users-cmp#UploadtoUsersCMP-Examples2">Examples</a>
</li>

<li>
<a href="extras/revo/upload-to-users-cmp#UploadtoUsersCMP-Properties">Properties</a>
</li>
</ul>
</li>
</ul>
</div>

<h2>
<a name="UploadtoUsersCMP-UploadtoUsersCMP" id="UploadtoUsersCMP-UploadtoUsersCMP"></a>Upload to Users CMP
</h2>

<p>
A Custom Manager Page (CMP) to upload file to registered members to a specified parent folder.
</p>

<p>
The extra link is <a href="http://modx.com/extras/package/uploadtouserscmp" class="external-link" rel="nofollow">http://modx.com/extras/package/uploadtouserscmp</a> .
<br />
The GitHub link is <a href="https://github.com/goldsky/UploadToUsers" class="external-link" rel="nofollow">https://github.com/goldsky/UploadToUsers</a> .
</p>

<p>
It would be useful for setting up specific folers to each of logged in users, and use FileLister or FileDownload R (&gt;=1.0.0-rc.4) snippet to get the folder using user's ID or username to their own folders.
</p>

<h2>
<a name="UploadtoUsersCMP-Examples" id="UploadtoUsersCMP-Examples"></a>Examples
</h2>

<pre class="brush: php">
[[FileLister? &amp;path=`assets/userfile/[[+modx.user.id]]/`]]
[[FileDownload? &amp;getDir=`assets/userfile/[[+modx.user.username]]/`]]
</pre>
<p>
Since version 1.0-pl, this package added database table to store additional information about the files, so it can be used later on to replace the filename on the list, and even better, add description into the list.
</p>

<p>
<img src="/download/attachments/41058348/uploadtousers-1.0-pl.jpg?version=1&amp;modificationDate=1345753736000" style="border: 0px solid black" />
</p>

<h1>
<a name="UploadtoUsersCMP-UploadtoUsersSnippet" id="UploadtoUsersCMP-UploadtoUsersSnippet"></a>Upload to Users Snippet
</h1>

<p>
Currently, it can only be used by <a href="/display/ADDON/FileDownload+R" title="FileDownload R">FileDownload R</a> because the link has its own placeholder.
</p>

<h2>
<a name="UploadtoUsersCMP-Examples2" id="UploadtoUsersCMP-Examples2"></a>Examples
</h2>

<p>
To use the snippet, user need to change the FileDownload's template from the original:
</p>

<pre class="brush: php">
    &lt;tr[[+fd.class]]&gt;
        &lt;td style="width:16px;"&gt;&lt;img src="[[+fd.image]]" alt="[[+fd.image]]" /&gt;&lt;/td&gt;
        &lt;td&gt;&lt;a href="[[+fd.link]]"[[+fd.linkAttribute]]&gt;[[+fd.filename]]&lt;/a&gt;
            &lt;span style="font-size:80%"&gt;([[+fd.count]] downloads)&lt;/span&gt;
        &lt;/td&gt;
        &lt;td&gt;[[+fd.sizeText]]&lt;/td&gt;
        &lt;td&gt;[[+fd.date]]&lt;/td&gt;
    &lt;/tr&gt;
    [[-- This is the description row if the &amp;chkDesc=`chunkName` is provided --]]
    [[+fd.description:notempty=`&lt;tr&gt;
        &lt;td&gt;&lt;/td&gt;
        &lt;td colspan="3"&gt;[[+fd.description]]&lt;/td&gt;
    &lt;/tr&gt;`:default=``]]
</pre>
<p>
to, for instance:
</p>

<pre class="brush: php">
    &lt;tr[[+fd.class]]&gt;
        &lt;td style="width:16px;"&gt;&lt;img src="[[+fd.image]]" alt="[[+fd.image]]" /&gt;&lt;/td&gt;
        &lt;td&gt;&lt;a href="[[+fd.link]]"[[+fd.linkAttribute]]&gt;
                [[!uploadtousers:default=`[[+fd.filename]]`? &amp;path=`[[+fd.fullPath]]` &amp;field=`title`]]
            &lt;/a&gt;
            &lt;span style="font-size:80%"&gt;([[+fd.count]] downloads)&lt;/span&gt;
        &lt;/td&gt;
        &lt;td&gt;[[+fd.sizeText]]&lt;/td&gt;
        &lt;td&gt;[[+fd.date]]&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;&lt;/td&gt;
        &lt;td colspan="3"&gt;[[!uploadtousers? &amp;path=`[[+fd.fullPath]]` &amp;field=`description`]]&lt;/td&gt;
    &lt;/tr&gt;
</pre>
<p>
The result of the FileDownload output will be changed like this:
</p>

<p>
<span class="image-wrap"><img src="download/attachments/41058348/FDL-U2U.jpg?version=1&amp;modificationDate=1345754441000" style="border: 0px solid black" /></span>
</p>

<h2>
<a name="UploadtoUsersCMP-Properties" id="UploadtoUsersCMP-Properties"></a>Properties
</h2>

<table>
<tbody>
<tr>
<th>
Name
</th>
<th>
Description
</th>
<th>
Default Value
</th>
</tr>

<tr>
<td>
path
</td>
<td>
the full path to the particular file/folder <strong>(mandatory)</strong>
</td>
<td>
</td>
</tr>

<tr>
<td>
field
</td>
<td>
the table's field to be retrieved
</td>
<td>
title
</td>
</tr>

<tr>
<td>
toArray
</td>
<td>
dump the output as an array instead
</td>
<td>
</td>
</tr>

<tr>
<td>
toPlaceholder
</td>
<td>
return the output into a placeholder instead
</td>
<td>
</td>
</tr>
</tbody>
</table>

<p>
The available fields are id, dir_path, name, title, description.
</p>