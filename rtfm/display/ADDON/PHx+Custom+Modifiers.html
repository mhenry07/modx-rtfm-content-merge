<h1>
<a name="PHxCustomModifiers-Installation" id="PHxCustomModifiers-Installation"></a>Installation
</h1>

<ol>
<li>Login to the MODx manager
</li>

<li>Go to Resources -&gt; Manage Resources -&gt; Snippets
</li>

<li>Click "new snippet"
</li>

<li>Prefix the snippet name with "<b>phx:</b>"
</li>

<li>Copy the code to that new snippet and save it
</li>
</ol>

<p>
or
</p>

<ol>
<li>Create new file with "snippet.phx.php" in assets/plugins/phx/modifiers/ (Example: assets/plugins/phx/modifiers/phpthumb.phx.php)
</li>

<li>Copy the code to that new file, and here you go!&nbsp;:)
</li>

<li>Change the permissions to 0644 to your new file
</li>
</ol>

<h1>
<a name="PHxCustomModifiers-Contributed" id="PHxCustomModifiers-Contributed"></a>Contributed
</h1>

<h2>
<a name="PHxCustomModifiers-phx%3A7bit"></a>phx:7bit
</h2>

<ul>
<li>description: returns the 7bit representation of a string
</li>

<li>usage: <b>[<ins>string:7bit</ins>]</b>
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
$text = mb_convert_encoding($output,'HTML-ENTITIES',mb_detect_encoding($output));
$text = preg_replace(array('/&amp;szlig;/','/&amp;(..)lig;/','/&amp;([aouAOU])uml;/','/&amp;(.)[^;]*;/'),array('ss',<span class="code-quote">"$1"</span>,<span class="code-quote">"$1"</span>.'e',<span class="code-quote">"$1"</span>),$text);
<span class="code-keyword">return</span> $text;
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Aage"></a>phx:age
</h2>

<ul>
<li>description: Takes a unixtime date input and calculates the age in years. It kind of fakes leap years but it's probably close enough for most uses.
</li>

<li>example: Set a TV called "date_birth" with the unixtime widget, then output it as [<ins>date_birth:age</ins>]
</li>

<li>usage: [<ins>date_birth:age</ins>]
</li>

<li>added by: themancan
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
$output = floor((time() - $output) / 31557600);
<span class="code-keyword">return</span> $output;
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3AalternateClass"></a>phx:alternateClass
</h2>

<ul>
<li>description: Allows rows or other repeating elements to alternate provided the $output is an integer generated by a loop.
</li>

<li>usage: <b>[<ins>phx:alternateClass=`class name`</ins>]</b>
</li>

<li>example: <b>&lt;li class="[<ins>maxigallery.picture.pos:alternativeClass=`alt`</ins>]"&gt;</b> outputs <b>&lt;li class="alt"&gt;</b> for every other &lt;li&gt; in the loop.
</li>

<li>notes: Originally designed for use with <a href="http://wiki.modxcms.com/index.php/MaxiGallery" class="external-link" rel="nofollow">MaxiGallery</a> to apply an alternating class to the &lt;li&gt; galleryPictureTpl template chunk.
</li>

<li>added by: smashingred
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
<span class="code-keyword">if</span>($output % 2)
{
echo $options;
}<span class="code-keyword">else</span>{
echo '';
}
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Abbcode"></a>phx:bbcode
</h2>

<ul>
<li>description: parse bb code (also escapes all html and MODx tags characters)
</li>

<li>usage: <b>[<ins>variable:bbcode</ins>]</b>
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
$string = preg_replace(<span class="code-quote">"/&amp;amp;(#[0-9]+|[a-z]+);/i"</span>, <span class="code-quote">"&amp;$1;"</span>, htmlspecialchars($output));
$string = preg_replace('~\[b\](.+?)\[/b\]~is', '&lt;b&gt;\1&lt;/b&gt;', $string);
$string = preg_replace('~\[i\](.+?)\[/i\]~is', '&lt;i&gt;\1&lt;/i&gt;', $string);
$string = preg_replace('~\[u\](.+?)\[/u\]~is', '&lt;span style=<span class="code-quote">"text-decoration: underline;"</span>&gt;\1&lt;/span&gt;', $string);
$string = preg_replace('~\[link\]www.(.+?)\[/link\]~is', '&lt;a href=<span class="code-quote">"http:<span class="code-comment">//www.\1"</span> target=<span class="code-quote">"_blank"</span>&gt;www.\1&lt;/a&gt;', $string);
</span>$string = preg_replace('~\[link\](.+?)\[/link\]~is', '&lt;a href=<span class="code-quote">"\1"</span> target=<span class="code-quote">"_blank"</span>&gt;\1&lt;/a&gt;', $string);
$string = preg_replace('~\[link=(.+?)\](.+?)\[/link\]~is', '&lt;a href=<span class="code-quote">"\1"</span> target=<span class="code-quote">"_blank"</span>&gt;\2&lt;/a&gt;', $string);
$string = preg_replace('~\[url\]www.(.+?)\[/url\]~is', '&lt;a href=<span class="code-quote">"http:<span class="code-comment">//www.\1"</span> target=<span class="code-quote">"_blank"</span>&gt;www.\1&lt;/a&gt;', $string);
</span>$string = preg_replace('~\[url\](.+?)\[/url\]~is', '&lt;a href=<span class="code-quote">"\1"</span> target=<span class="code-quote">"_blank"</span>&gt;\1&lt;/a&gt;', $string);
$string = preg_replace('~\[url=(.+?)\](.+?)\[/url\]~is', '&lt;a href=<span class="code-quote">"\1"</span> target=<span class="code-quote">"_blank"</span>&gt;\2&lt;/a&gt;', $string);
$string = preg_replace('~\[img\](.+?)\[/img\]~is', '&lt;img src=<span class="code-quote">"\1"</span> alt=<span class="code-quote">"[image]"</span> style=<span class="code-quote">"margin: 5px 0px 5px 0px"</span> /&gt;', $string);
$string = preg_replace('~\[img-l\](.+?)\[/img\]~is', '&lt;img src=<span class="code-quote">"\1"</span> alt=<span class="code-quote">"[image]"</span> style=<span class="code-quote">"border: thin solid #DFE5F2; FLOAT: left; MARGIN-RIGHT: 20px"</span> /&gt;', $string);
$string = preg_replace('~\[img-r\](.+?)\[/img\]~is', '&lt;img src=<span class="code-quote">"\1"</span> alt=<span class="code-quote">"[image]"</span> style=<span class="code-quote">"border: thin solid #DFE5F2; FLOAT: right; MARGIN-LEFT: 20px;"</span> /&gt;', $string);
$string = preg_replace('~\[color=(.+?)\](.+?)\[/color\]~is', '&lt;font color=<span class="code-quote">"\1"</span>&gt;\2&lt;/font&gt;', $string);
$string = preg_replace('~\[left\](.+?)\[/left\]~is', '&lt;div style=<span class="code-quote">"text-align:left;"</span>&gt;\1&lt;/u&gt;', $string);
$string = preg_replace('~\[center\](.+?)\[/center\]~is', '&lt;div style=<span class="code-quote">"text-align:center;"</span>&gt;\1&lt;/u&gt;', $string);
$string = preg_replace('~\[right\](.+?)\[/right\]~is', '&lt;div style=<span class="code-quote">"text-align:right;"</span>&gt;\1&lt;/u&gt;', $string);

$string = str_replace(array(<span class="code-quote">"["</span>,<span class="code-quote">"]"</span>,<span class="code-quote">"`"</span>),array(<span class="code-quote">"&amp;#91;"</span>,<span class="code-quote">"&amp;#93;"</span>,<span class="code-quote">"&amp;#96;"</span>),$string);

<span class="code-keyword">return</span> $string;
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Acdata"></a>phx:cdata
</h2>

<ul>
<li>description: Surround content with CDATA without the whitespace
</li>

<li>usage: <b>[<ins>content:cdata</ins>]</b>
</li>

<li>added by: Hori
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
<span class="code-keyword">if</span> (!function_exists('cdata')){
function cdata($inhoud){
$before='&lt;![CDATA[';
$after=']]&gt;';
<span class="code-keyword">return</span> $before.$inhoud.$after;
}
}
<span class="code-keyword">return</span> cdata($output);
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Acharacterlimit"></a>phx:character_limit
</h2>

<ul>
<li>description: limits content to specified number of characters (good for news summary)
</li>

<li>usage: <b>[</b><b>+content:character_limit=`35`+</b><b>]</b> - limits characters to 35
</li>

<li>added by: themancan
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
$output_truncated = substr($output, 0, $options);
<span class="code-keyword">return</span> $output_truncated;
?&gt;
</pre>
</div>
</div>

<ul>
<li>&nbsp;Improved version by prouve
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
<span class="code-keyword">if</span> (strlen($output) &gt; $options) {
$output_cutted = substr($output, 0, $options);
$last_space = strrpos($output_cutted, <span class="code-quote">" "</span>);
$output = substr($output_cutted, 0, $last_space) . <span class="code-quote">" [...]"</span>;
}
<span class="code-keyword">return</span> $output;
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Acheckdomainexists"></a>phx:checkdomainexists
</h2>

<ul>
<li>description: See if a domain is avaliable or not, it acts with Conditional operators.
</li>

<li>usages:
</li>

<li>
<b>[<ins>phx:checkdomainexists=`www.mydomain.com`:then=`it exists!`:else=`Houston, we've got a problem!`</ins>]</b>
</li>

<li>
<b>[<ins>phx:checkdomainexists=`[+phx:post=`domain`</ins>]`:then=`it exists!`:else=`Houston, we've got a problem!`+]</b>
</li>

<li>added by: CuSS (José Moreira - <a href="http://www.microdual.com/" class="external-link" rel="nofollow">Microdual</a>)
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
/*
<span class="code-comment">// checkdomainexists - Phx Script Created by José Moreira (www.microdual.com)
</span><span class="code-comment">// Based on: AJAX Domain Availablity Check script (Version 0.93) - Created by <span class="code-quote">"Ganesh"</span> @ http://www.bootstrike.com/Webdesign/
</span><span class="code-comment">// Give him an applause!
</span>*/
 
/****************************************************
Usage: isDomainAvailable(domain,domaintlds)
Examples:
isDomainAvailable(<span class="code-quote">"www.microdual.com"</span>) <span class="code-comment">//to allow all tlds
</span>isDomainAvailable(<span class="code-quote">"www.microdual.com"</span>, array('com','net','org')); <span class="code-comment">// to allow only com, net and org domains.
</span>isDomainAvailable(<span class="code-quote">"www.microdual.com"</span>, array('com.sg')); <span class="code-comment">// to allow only com.sg domain checking
</span>****************************************************/
function isDomainAvailable($domain,$allowedTLDs=<span class="code-keyword">null</span>){
global $error;
/* data from dnservers.php */
$ext = array(
<span class="code-comment">// '.EXT' =&gt; array('WHOIS SERVER NAME','Text To Match <span class="code-keyword">for</span> Available Domain'),
</span>'.com' =&gt; array('whois.crsnic.net','No match <span class="code-keyword">for</span>'),
'.net' =&gt; array('whois.crsnic.net','No match <span class="code-keyword">for</span>'),
'.org' =&gt; array('whois.publicinterestregistry.net','NOT FOUND'),
'.us' =&gt; array('whois.nic.us','Not Found'),
'.biz' =&gt; array('whois.biz','Not found'),
'.info' =&gt; array('whois.afilias.net','NOT FOUND'),
'.mobi' =&gt; array('whois.dotmobiregistry.net', 'NOT FOUND'),
'.tv' =&gt; array('whois.nic.tv', 'No match <span class="code-keyword">for</span>'),
'.in' =&gt; array('whois.inregistry.net', 'NOT FOUND'),
'.co.uk' =&gt; array('whois.nic.uk','No match'),
'.co.ug' =&gt; array('wawa.eahd.or.ug','No entries found'),
'.or.ug' =&gt; array('wawa.eahd.or.ug','No entries found'),
'.sg' =&gt; array('whois.nic.net.sg','Domain Not Found'),
'.com.sg' =&gt; array('whois.nic.net.sg','Domain Not Found'),
'.per.sg' =&gt; array('whois.nic.net.sg','Domain Not Found'),
'.org.sg' =&gt; array('whois.nic.net.sg','Domain Not Found'),
'.com.my' =&gt; array('whois.mynic.net.my','does not Exist in database'),
'.net.my' =&gt; array('whois.mynic.net.my','does not Exist in database'),
'.org.my' =&gt; array('whois.mynic.net.my','does not Exist in database'),
'.edu.my' =&gt; array('whois.mynic.net.my','does not Exist in database'),
'.my' =&gt; array('whois.mynic.net.my','does not Exist in database'),
'.nl' =&gt; array('whois.domain-registry.nl','not a registered domain'),
'.ro' =&gt; array('whois.rotld.ro','No entries found <span class="code-keyword">for</span> the selected'),
'.com.au' =&gt; array('whois-check.ausregistry.net.au',<span class="code-quote">"Available\n"</span>),
'.net.au' =&gt; array('whois-check.ausregistry.net.au',<span class="code-quote">"Available\n"</span>),
'.ca' =&gt; array('whois.cira.ca', 'AVAIL'),
'.org.uk' =&gt; array('whois.nic.uk','No match'),
'.name' =&gt; array('whois.nic.name','No match'),
'.ac.ug' =&gt; array('wawa.eahd.or.ug','No entries found'),
'.ne.ug' =&gt; array('wawa.eahd.or.ug','No entries found'),
'.sc.ug' =&gt; array('wawa.eahd.or.ug','No entries found'),
'.ws' =&gt; array('whois.website.ws','No Match'),
'.be' =&gt; array('whois.ripe.net','No entries'),
'.com.cn' =&gt; array('whois.cnnic.cn','no matching record'),
'.net.cn' =&gt; array('whois.cnnic.cn','no matching record'),
'.org.cn' =&gt; array('whois.cnnic.cn','no matching record'),
'.no' =&gt; array('whois.norid.no','no matches'),
'.se' =&gt; array('whois.nic-se.se','No data found'),
'.nu' =&gt; array('whois.nic.nu','NO MATCH <span class="code-keyword">for</span>'),
'.com.tw' =&gt; array('whois.twnic.net','No such Domain Name'),
'.net.tw' =&gt; array('whois.twnic.net','No such Domain Name'),
'.org.tw' =&gt; array('whois.twnic.net','No such Domain Name'),
'.cc' =&gt; array('whois.nic.cc','No match'),
'.nl' =&gt; array('whois.domain-registry.nl','is free'),
'.pl' =&gt; array('whois.dns.pl','No information about'),
'.eu' =&gt; array('whois.eu','Status: AVAILABLE'),
'.pt' =&gt; array('whois.dns.pt','No match'),
'.se' =&gt; array('whois.iis.se','not found'), <span class="code-comment">//contributed by Mr. Roger xxx@tving.se
</span>);
 
$R6629C5988EEFCD88EA6F77A2AE672B96 = trim($domain); <span class="code-keyword">if</span> (preg_match('/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)*[a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?$/i',$R6629C5988EEFCD88EA6F77A2AE672B96) != 1) { $error = 'Invalid domain (Letters, numbers and hypens only) ('.$R6629C5988EEFCD88EA6F77A2AE672B96.')'; <span class="code-keyword">return</span> <span class="code-keyword">false</span>; } preg_match('@^(http:<span class="code-comment">//www\.|http://|www\.)?([^/]+)@i', $R6629C5988EEFCD88EA6F77A2AE672B96, $R2BC3A0F3554F7C295CD3CC4A57492121); $RE035DC327C1676D83C2CA9CA79C74BCB = ''; $R6629C5988EEFCD88EA6F77A2AE672B96 = $R2BC3A0F3554F7C295CD3CC4A57492121[2]; $R37D331C368B44BDD85AF95D9FFFFD202 = explode('.', $R6629C5988EEFCD88EA6F77A2AE672B96); $R33D3EC748433467E20D0947C3032E305 = ''; <span class="code-keyword">if</span> (count($R37D331C368B44BDD85AF95D9FFFFD202) == 3) { $R33D3EC748433467E20D0947C3032E305 = strtolower($R37D331C368B44BDD85AF95D9FFFFD202[1].'.'.$R37D331C368B44BDD85AF95D9FFFFD202[2]); } <span class="code-keyword">else</span> <span class="code-keyword">if</span> (count($R37D331C368B44BDD85AF95D9FFFFD202) == 2) { $R33D3EC748433467E20D0947C3032E305 = strtolower($R37D331C368B44BDD85AF95D9FFFFD202[1]); } <span class="code-keyword">else</span> { $error = 'Invalid Domain and/or TLD server entry does not exist'; <span class="code-keyword">return</span> <span class="code-keyword">false</span>; } <span class="code-keyword">if</span> ($allowedTLDs != <span class="code-keyword">null</span>) { $R630663E4CF314AFD500B9B8E1AA95DF0 = count($allowedTLDs); $RDBF866E6293BB59E654033E299EC8CFE = <span class="code-keyword">false</span>; <span class="code-keyword">for</span> ($RA16D2280393CE6A2A5428A4A8D09E354 = 0; $RA16D2280393CE6A2A5428A4A8D09E354 &lt; $R630663E4CF314AFD500B9B8E1AA95DF0; $RA16D2280393CE6A2A5428A4A8D09E354++) { <span class="code-keyword">if</span> ($allowedTLDs[$RA16D2280393CE6A2A5428A4A8D09E354] === $R33D3EC748433467E20D0947C3032E305) { $RDBF866E6293BB59E654033E299EC8CFE = <span class="code-keyword">true</span>; <span class="code-keyword">break</span>; } } <span class="code-keyword">if</span> (!$RDBF866E6293BB59E654033E299EC8CFE) { $error = 'TLD '.$R33D3EC748433467E20D0947C3032E305.' not allowed'; <span class="code-keyword">return</span> <span class="code-keyword">false</span>; } } $R019FB4DA0E10A95A57615147DF79F334 = <span class="code-keyword">false</span>; <span class="code-keyword">if</span> (!array_key_exists('.'.$R33D3EC748433467E20D0947C3032E305, $ext)) { $R019FB4DA0E10A95A57615147DF79F334 = <span class="code-keyword">true</span>; } $RE22CBD8984E1727D0A587413D72A88CF = gethostbyname ($R6629C5988EEFCD88EA6F77A2AE672B96); <span class="code-keyword">if</span> (($RE22CBD8984E1727D0A587413D72A88CF != $R6629C5988EEFCD88EA6F77A2AE672B96) &amp;&amp; ($RE22CBD8984E1727D0A587413D72A88CF != '208.67.219.132')) { <span class="code-keyword">return</span> <span class="code-keyword">false</span>; } <span class="code-keyword">else</span> { $server = ''; <span class="code-keyword">if</span> ($R019FB4DA0E10A95A57615147DF79F334) { $RBD7EDCF7DA1CE9EA93A9B3BBD829FFBB = explode('.',$R33D3EC748433467E20D0947C3032E305); <span class="code-keyword">if</span> (count($RBD7EDCF7DA1CE9EA93A9B3BBD829FFBB) &gt; 1) $server = $RBD7EDCF7DA1CE9EA93A9B3BBD829FFBB[1].'.whois-servers.net'; <span class="code-keyword">else</span> $server = $R33D3EC748433467E20D0947C3032E305.'.whois-servers.net'; $R7B8A9F2F48B874D40BD75BDD12F02557 = @gethostbyname($R33D3EC748433467E20D0947C3032E305.'.whois-servers.net'); } <span class="code-keyword">else</span> { $server = $ext['.' .$R33D3EC748433467E20D0947C3032E305][0]; $R7B8A9F2F48B874D40BD75BDD12F02557 = @gethostbyname($server); } <span class="code-keyword">if</span> ($R33D3EC748433467E20D0947C3032E305 == 'es') { $error = 'Error: ES not supported. They don\'t have a <span class="code-keyword">public</span> whois server :('; <span class="code-keyword">return</span> <span class="code-keyword">false</span>; } <span class="code-keyword">if</span> ($R33D3EC748433467E20D0947C3032E305 == 'au') { $server = $ext['.com.au'][0]; $R7B8A9F2F48B874D40BD75BDD12F02557 = @gethostbyname($server); } <span class="code-keyword">if</span> ($R7B8A9F2F48B874D40BD75BDD12F02557 == $server) { $error = 'Error: Invalid extension - '.$R33D3EC748433467E20D0947C3032E305.'. Or server has outgoing connections blocked to '.$server.'. Domain does not have DNS entry, so chances are high it is available.'; <span class="code-keyword">return</span> <span class="code-keyword">false</span>; } $RAD10634E7F72CAA071320F21AEE5930D = @fsockopen($server, 43,$R32D00070D4FFBCCE2FC669BBA812D4C2,$RE5840D3E86DCF8489051E4F70C757552,10); <span class="code-keyword">if</span> ($R32D00070D4FFBCCE2FC669BBA812D4C2 == '10060') { $error = 'Error: Invalid extension - '.$R33D3EC748433467E20D0947C3032E305.' (or whois server is down). Domain does not have DNS entry, so chances are high it is available.'; <span class="code-keyword">return</span> <span class="code-keyword">false</span>; } <span class="code-keyword">if</span> (!$RAD10634E7F72CAA071320F21AEE5930D || ($RE5840D3E86DCF8489051E4F70C757552 != '')) { $error = 'Error: ('.$server.') '.$RE5840D3E86DCF8489051E4F70C757552.' ('.$R32D00070D4FFBCCE2FC669BBA812D4C2.')'; <span class="code-keyword">return</span> <span class="code-keyword">false</span>; } fputs($RAD10634E7F72CAA071320F21AEE5930D, <span class="code-quote">"$R6629C5988EEFCD88EA6F77A2AE672B96\r\n"</span>); <span class="code-keyword">while</span>( !feof($RAD10634E7F72CAA071320F21AEE5930D) ) { $RE035DC327C1676D83C2CA9CA79C74BCB .= fgets($RAD10634E7F72CAA071320F21AEE5930D,128); } fclose($RAD10634E7F72CAA071320F21AEE5930D); <span class="code-keyword">if</span>($R33D3EC748433467E20D0947C3032E305 == 'org') nl2br($RE035DC327C1676D83C2CA9CA79C74BCB); <span class="code-keyword">if</span> ($R019FB4DA0E10A95A57615147DF79F334) { <span class="code-keyword">if</span> ( (strpos($RE035DC327C1676D83C2CA9CA79C74BCB,'No match <span class="code-keyword">for</span>') !== <span class="code-keyword">false</span>) || (strpos($RE035DC327C1676D83C2CA9CA79C74BCB,'NOT Found') !== <span class="code-keyword">false</span>) || (strpos($RE035DC327C1676D83C2CA9CA79C74BCB,'NOT FOUND') !== <span class="code-keyword">false</span>) || (strpos($RE035DC327C1676D83C2CA9CA79C74BCB,'Not found: ') !== <span class="code-keyword">false</span>) || (strpos($RE035DC327C1676D83C2CA9CA79C74BCB,<span class="code-quote">"No Found\n"</span>) !== <span class="code-keyword">false</span>) || (strpos($RE035DC327C1676D83C2CA9CA79C74BCB,'NOMATCH') !== <span class="code-keyword">false</span>) || (strpos($RE035DC327C1676D83C2CA9CA79C74BCB,<span class="code-quote">"AVAIL\n"</span>) !== <span class="code-keyword">false</span>) || (strpos($RE035DC327C1676D83C2CA9CA79C74BCB,'No entries found') !== <span class="code-keyword">false</span>) || (strpos($RE035DC327C1676D83C2CA9CA79C74BCB,'NO MATCH') !== <span class="code-keyword">false</span>) || (strpos($RE035DC327C1676D83C2CA9CA79C74BCB,'No match') !== <span class="code-keyword">false</span>) || (strpos($RE035DC327C1676D83C2CA9CA79C74BCB,'No such Domain') !== <span class="code-keyword">false</span>) || (strpos($RE035DC327C1676D83C2CA9CA79C74BCB,'is free') !== <span class="code-keyword">false</span>) || (strpos($RE035DC327C1676D83C2CA9CA79C74BCB,'FREE') !== <span class="code-keyword">false</span>) || (strpos($RE035DC327C1676D83C2CA9CA79C74BCB,'No data Found') !== <span class="code-keyword">false</span>) || (strpos($RE035DC327C1676D83C2CA9CA79C74BCB,'No Data Found') !== <span class="code-keyword">false</span>) || ($RE035DC327C1676D83C2CA9CA79C74BCB == <span class="code-quote">"Available\n"</span>) || (strpos($RE035DC327C1676D83C2CA9CA79C74BCB,'No information about') !== <span class="code-keyword">false</span>) || (strpos($RE035DC327C1676D83C2CA9CA79C74BCB,'no matching record') !== <span class="code-keyword">false</span>) || (strpos($RE035DC327C1676D83C2CA9CA79C74BCB,'does not Exist in database') !== <span class="code-keyword">false</span>) || (strpos($RE035DC327C1676D83C2CA9CA79C74BCB,'Status: AVAILABLE') !== <span class="code-keyword">false</span>) || (strpos($RE035DC327C1676D83C2CA9CA79C74BCB,'not a registered domain') !== <span class="code-keyword">false</span>) ) { <span class="code-keyword">return</span> <span class="code-keyword">true</span>; } <span class="code-keyword">return</span> <span class="code-keyword">false</span>; } <span class="code-keyword">else</span> { <span class="code-keyword">if</span> ((strpos($R33D3EC748433467E20D0947C3032E305,'.au') &gt; 0) &amp;&amp; ($RE035DC327C1676D83C2CA9CA79C74BCB == <span class="code-quote">"Not Available\n"</span>)) { <span class="code-keyword">return</span> <span class="code-keyword">false</span>; } <span class="code-keyword">if</span>(preg_match('/'.$ext['.' . $R33D3EC748433467E20D0947C3032E305][1].'/i', $RE035DC327C1676D83C2CA9CA79C74BCB)) { <span class="code-keyword">return</span> <span class="code-keyword">true</span>; } <span class="code-keyword">else</span> { <span class="code-keyword">return</span> <span class="code-keyword">false</span>; } } } <span class="code-keyword">return</span> <span class="code-keyword">false</span>;
</span>}
<span class="code-comment">// echo $error;
</span>$condition[] = intval(!isDomainAvailable($options));
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Adocfield"></a>phx:docfield
</h2>

<ul>
<li>description: get specified field from document (id)
</li>

<li>usage: <b>[</b><b>+docid:docfield=`field`</b><b>+]</b>
</li>

<li>defaults to pagetitle
</li>

<li>added by: bwente
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
$field = (strlen($options)&gt;0) ? $options : 'pagetitle';
$docfield = $modx-&gt;getTemplateVarOutput(array($field), $output, 1);
<span class="code-keyword">return</span> $docfield[$field];
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Adomainhasmail"></a>phx:domainhasmail
</h2>

<ul>
<li>description: See if a domain has a mail server or not, it acts with Conditional operators.
</li>

<li>
<b>IMPORTANT</b>: It uses <b>exec()</b> function, make sure you have it enabled on your <b>php.ini</b>!
</li>

<li>usages:
</li>

<li>
<b>[+</b><b>phx:domainhasmail=`www.mydomain.com`:then=`it has mail!`:else=`Oh no!`</b><b>+]</b>
</li>

<li>
<b>[</b><b>+phx:domainhasmail=`[<ins>phx:post=`domain`+</ins></b><ins><b>]`:then=`it has mail!`:else=`Oh no!`</b></ins><b>]</b>
</li>

<li>added by: CuSS (José Moreira - <a href="http://www.microdual.com/" class="external-link" rel="nofollow">Microdual</a>)
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
function checkdnsmail($a,$b=''){<span class="code-keyword">if</span>(!empty($a)){<span class="code-keyword">if</span>($b=='') $b=<span class="code-quote">"A"</span>;exec(<span class="code-quote">"nslookup -type=$b $a"</span>,$c);foreach($c as $d){<span class="code-keyword">if</span>(eregi(<span class="code-quote">"^$a"</span>,$d)) <span class="code-keyword">return</span> <span class="code-keyword">true</span>;}<span class="code-keyword">return</span> <span class="code-keyword">false</span>;}<span class="code-keyword">return</span> <span class="code-keyword">false</span>;}
$condition[] = intval(checkdnsmail($options));
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Aevenodd"></a>phx:evenodd
</h2>

<ul>
<li>description: Returns even if even, otherwise odd. Nearly identical to the 'alternateClass' above.
</li>

<li>usage: <b>[</b><b>+ditto_iteration:evenodd+]</b>. Useful for creating alternate templates in Ditto without needing an additional chunk. For example, <b>class="news_item_[+ditto_iteration:evenodd</b><b>+]"</b> will return <b>news_item_even</b> or <b>news_item_odd</b>
</li>

<li>default: Defaults to "odd", as there is no test to ensure the input is an integer.
</li>

<li>added by: themancan
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
<span class="code-keyword">if</span> ($output % 2) {
<span class="code-keyword">return</span> 'even';
} <span class="code-keyword">else</span> {
<span class="code-keyword">return</span> 'odd';
}
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Afileexists"></a>phx:fileexists
</h2>

<ul>
<li>description: See if a file exists or not, it acts with Conditional operators. Useful for autodetect images on chunks, and replace broken images by an blank image. You can use it to show products images automaticly by using [<b>id</b>] or something on your image name.
</li>

<li>usages:
</li>

<li>
<b>[</b><b>+phx:if=`assets/images/path/to/your/file.jpg`:fileexists:then=`Hey, the file exists!`:else=`Oh no! Where is the file?`+</b><b>]</b>
</li>

<li>
<b>[</b><b>+myimage:fileexists:then=`Hey, the file exists!`:else=`Oh no! Where is the file?`</b><b>+]</b>
</li>

<li>
<b>&lt;img src="[</b><b>+myimage:fileexists:then=`[<ins>myimage:phpthumb=`w=200`+</ins></b><ins><b>]`:else=`[</b><b>+phx:input=`path/to/blank/image.jpg`:phpthumb=`w=200`</b><b>+]`</b></ins><b>]" /&gt;</b>
</li>

<li>added by: CuSS (José Moreira - <a href="http://www.microdual.com/" class="external-link" rel="nofollow">Microdual</a>)&nbsp;
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
$condition[] = intval(file_exists($output));
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Afirstlast"></a>phx:firstlast
</h2>

<ul>
<li>description: Set the number of elements per row. Returns $class_first if it's the first element in a row; $class_last if it's the last.
</li>

<li>usage: <b>[</b><b>+ditto_iteration:firstlast=`4`</b><b>+]</b>. Useful for applying classes to the first or last element per row. Kind of like alternate classes, but suited for multiple rows.
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
<span class="code-keyword">if</span> (!$options) {
$options = 2;
}
$class_first = 'alpha';
$class_last = 'omega';
 
<span class="code-keyword">if</span> (($output % $options) == '0') {
<span class="code-keyword">return</span> $class_first;
} elseif (($output % $options) == ($options - 1)) {
<span class="code-keyword">return</span> $class_last;
} <span class="code-keyword">else</span> {
<span class="code-keyword">return</span>;
}
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Agenitive"></a>phx:genitive
</h2>

<ul>
<li>description: Creates the genitive of a name - appends either ?s or ?
</li>

<li>usage: <b>[+</b><b>myname:genitive</b><b>+]</b> or <b>[+</b><b>myname:genitive=`endchar|normalchar|otherchar`</b><b>+]</b>
</li>

<li>added by: maFF
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
/**
* Creates the genitive of a name.
*
* Examples:
* Joe =&gt; Joe's
* Mary =&gt; Mary's
* Lucas =&gt; Lucas'
*
* Usage:
*
* [+myname:genitive+]
* [+myname:genitive=`endchar|normalchar|otherchar`+]
*
*/
 
$options = explode('|', $options);
$name = $output;
 
$endchar = (!empty($options[0])) ? $options[0] : 's'; <span class="code-comment">// <span class="code-object">char</span> a name has to end with to get treated specially
</span>$normalchar = (!empty($options[1])) ? $options[1] : '&amp;prime;s'; <span class="code-comment">// <span class="code-object">char</span> to append to 'normal' names
</span>$otherchar = (!empty($options[2])) ? $options[2] : '&amp;prime;'; <span class="code-comment">// <span class="code-object">char</span> to append to names which end with $endchar
</span> 
<span class="code-keyword">if</span>(substr($name, -1) == $endchar) $genitive = $name.$otherchar;
<span class="code-keyword">else</span> $genitive = $name.$normalchar;
 
<span class="code-keyword">return</span> $genitive;
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Aget"></a>phx:get
</h2>

<ul>
<li>description: get value by name from superglobal $_GET array
</li>

<li>usage: <b>[</b><b><ins>phx:get=`name`</ins></b><b>]</b>
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
<span class="code-keyword">return</span> htmlspecialchars($_GET[$options]);
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Agettype"></a>phx:gettype
</h2>

<ul>
<li>description: See the type of the result, usefull to make mathematical operations like avaliate a number to see if it is multiple of another or to use as security, to get a var from POST and GET and see if it is a number.
</li>

<li>usages:
</li>

<li>
<b>[+</b><b>counter:math=`?/4`:gettype:is=`integer`:then=`This number is multiple of four!`</b><b>+]</b>
</li>

<li>
<b>[</b><b>+phx:post=`mobilephone`:gettype:ne=`integer`then=`this var contains non-numeric chars`</b><b>+]</b>
</li>

<li>added by: CuSS (José Moreira - <a href="http://www.microdual.com/" class="external-link" rel="nofollow">Microdual</a>)
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
function gettype_fromstring($string){
<span class="code-comment">// (c) José Moreira - Microdual (www.microdual.com)
</span><span class="code-keyword">return</span> gettype(getcorrectvariable($string));
}
function getcorrectvariable($string){
<span class="code-comment">// (c) José Moreira - Microdual (www.microdual.com)
</span><span class="code-comment">// With the help of Svisstack (http://stackoverflow.com/users/283564/svisstack)
</span>/* FUNCTION FLOW */
<span class="code-comment">// *1. Remove unused spaces
</span><span class="code-comment">// *2. Check <span class="code-keyword">if</span> it is empty, <span class="code-keyword">if</span> yes, <span class="code-keyword">return</span> blank string
</span><span class="code-comment">// *3. Check <span class="code-keyword">if</span> it is numeric
</span><span class="code-comment">// *4. If numeric, <span class="code-keyword">this</span> may be a integer or <span class="code-object">double</span>, must compare <span class="code-keyword">this</span> values.
</span><span class="code-comment">// *5. If string, <span class="code-keyword">try</span> parse to bool.
</span><span class="code-comment">// *6. If not, <span class="code-keyword">this</span> is string.
</span>$string=trim($string);
<span class="code-keyword">if</span>(empty($string)) <span class="code-keyword">return</span> "";
<span class="code-keyword">if</span>(!preg_match(<span class="code-quote">"/[^0-9.]+/"</span>,$string)){
<span class="code-keyword">if</span>(preg_match(<span class="code-quote">"/[.]+/"</span>,$string)){
<span class="code-keyword">return</span> (<span class="code-object">double</span>)$string;
}<span class="code-keyword">else</span>{
<span class="code-keyword">return</span> (<span class="code-object">int</span>)$string;
}
}
<span class="code-keyword">if</span>($string==<span class="code-quote">"<span class="code-keyword">true</span>"</span>) <span class="code-keyword">return</span> <span class="code-keyword">true</span>;
<span class="code-keyword">if</span>($string==<span class="code-quote">"<span class="code-keyword">false</span>"</span>) <span class="code-keyword">return</span> <span class="code-keyword">false</span>;
<span class="code-keyword">return</span> (string)$string;
}
<span class="code-keyword">return</span> gettype_fromstring($output);
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Agrabsrcurl"></a>phx:grabsrcurl
</h2>

<ul>
<li>description: gets the contents of the <tt>src</tt> attribute of an element. For example, if applied to <tt>&lt;img src="modx.png" /&gt;</tt> it will return <tt>modx.png</tt>.
</li>

<li>usage: <b>[</b><b><ins>+string:grabsrcurl+</ins></b><b>]</b> or, more usefully, [<b>*TV:grabsrcurl</b>*]
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
<span class="code-keyword">return</span> preg_replace('/.*src=([\'"])((?:(?!\1).)*)\1.*/si','$2',$output);
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Ahas"></a>phx:has
</h2>

<ul>
<li>description: See if the output string has the option (like 'is' but not equal - 'has'). This is needed if the return is an array (multiple selects from TV) or a big string.
</li>

<li>usages:
</li>

<li>
<b>[+</b><b>myMultipleTemplateVariable:has=`one-of-the-strings`:then=`it has!`:else=`Oh no, you didn't select it!`</b><b>+]</b>
</li>

<li>added by: CuSS (José Moreira - <a href="http://www.microdual.com/" class="external-link" rel="nofollow">Microdual</a>)
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
$condition[] = intval(strpos($output,$options)!==<span class="code-keyword">false</span>);
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Aifnotempty"></a>phx:ifnotempty
</h2>

<ul>
<li>description: The opposite of the native PHX "ifempty" function. Returns the option value ONLY if the input value is empty (excluding whitespace)
</li>

<li>usage: <b>[</b><b>+phx:if=`string`:ifnotempty=`String to return if not empty`</b><b>+]</b>
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
<span class="code-keyword">if</span> (trim($output) != '') {
<span class="code-keyword">return</span> $options;
}
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Aisempty"></a>phx:isempty
</h2>

<ul>
<li>description: The opposite of the native PHX "ifempty" function, like ifnotempty, but it returns true or false to then and else operators
</li>

<li>usage:
</li>

<li>
<b>[+</b><b>phx:if=`string`:isempty:then=`String to return if empty`</b><b>+]</b>
</li>

<li>
<b>[</b><b>+myplaceholder:isempty:then=`String to return if empty`</b><b>+]</b>
</li>

<li>added: CuSS (José Moreira - <a href="http://www.microdual.com/" class="external-link" rel="nofollow">Microdual</a>)&nbsp;
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
$condition[] = intval(trim($output) == '');
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Aisnotempty"></a>phx:isnotempty
</h2>

<ul>
<li>description: The opposite of "isempty" function, it returns true or false to then and else operators.
</li>

<li>usage:
</li>

<li>
<b>[+</b><b>phx:if=`string`:isnotempty:then=`String to return if not empty`</b><b>+]</b>
</li>

<li>
<b>[</b><b>+myplaceholder:isnotempty:then=`String to return if not empty`</b><b>+]</b>
</li>

<li>added: CuSS (José Moreira - <a href="http://www.microdual.com/" class="external-link" rel="nofollow">Microdual</a>)
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
$condition[] = intval(trim($output) != '');
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Aloggedinmgr"></a>phx:loggedinmgr
</h2>

<ul>
<li>usage: <b>[</b><b>+phx:loggedinmgr:then=`loggedInString`:else=`notLoggedInString`</b><b>+]</b>
</li>

<li>modded: CuSS (José Moreira - <a href="http://www.microdual.com/" class="external-link" rel="nofollow">Microdual</a>)
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
global $modx;
$condition[] = intval(isset ($_SESSION['mgrValidated']));
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Aloggedinweb"></a>phx:loggedinweb
</h2>

<ul>
<li>usage: <b>[+</b><b>phx:loggedinweb:then=`loggedInString`:else=`notLoggedInString`</b><b>+]</b>
</li>

<li>added: CuSS (José Moreira - <a href="http://www.microdual.com/" class="external-link" rel="nofollow">Microdual</a>)&nbsp;
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
global $modx;
$condition[] = intval(isset ($_SESSION['webValidated']));
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Amakeurl"></a>phx:make_url
</h2>

<ul>
<li>description: Takes a string and makes it a URL if it's not.
</li>

<li>example: If a user enters 'www.example.com', but you want to link to that, if you did 'href="www.example.com"' it wouldn't work. Yeah, you should be validating that on the server side anyway, but this modifier is useful in case you can't. It will make "www.example.com" into "<a href="http://www.example.com/" class="external-link" rel="nofollow">http://www.example.com</a>", but won't touch things that start with an http:// or https://
</li>

<li>usage: <b>[<ins>member_url:make_url</ins>]</b>
</li>

<li>default: Adds "http://" to the beginning of the string.
</li>

<li>added by: themancan
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
<span class="code-keyword">if</span> (preg_match('%https?:<span class="code-comment">//%i', $output)) {
</span><span class="code-keyword">return</span> $output;
} <span class="code-keyword">else</span> {
<span class="code-keyword">return</span> 'http:<span class="code-comment">//' . $output;
</span>}
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Amydate"></a>phx:mydate
</h2>

<ul>
<li>description: Date modified for non-Unix timestamp dates.
</li>

<li>example: Useful when the date is stored differently, e.g. Friday, May 12, 2008 etc.
</li>

<li>usage: <b>[<ins>date:mydate=`%d-%m-%Y&nbsp;%H:%M`</ins>]</b>
</li>

<li>added by Legatissima who found it in the support forum, written by Doze
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
<span class="code-keyword">return</span> strftime($options, strtotime($output));
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Anohttp"></a>phx:nohttp
</h2>

<ul>
<li>description: Removes the http:// from a URL, to create a display-friendly web address
</li>

<li>usage: <b>[</b><b>+string:nohttp</b><b>+]</b>
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
$url = str_replace('http:<span class="code-comment">//', '', $output);
</span><span class="code-keyword">return</span> $url;
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Aordinal"></a>phx:ordinal
</h2>

<ul>
<li>description: Ordinal numbers.
</li>

<li>usage: *[<b>number:ordinal</b>]*
</li>

<li>notes: Adds 'st' to 21 to make it the 21st or 'nd' to 132 for 132nd.
</li>

<li>added by: bwente
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
<span class="code-keyword">if</span> (!function_exists('ordinal'))
{
function ordinal($cardinal){
$test_c = abs($cardinal) % 10;
$ext = ((abs($cardinal) %100 &lt; 21 &amp;&amp; abs($cardinal) %100 &gt; 4) ? 'th'
: (($test_c &lt; 4) ? ($test_c &lt; 3) ? ($test_c &lt; 2) ? ($test_c &lt; 1)
? 'th' : 'st' : 'nd' : 'rd' : 'th'));
<span class="code-keyword">return</span> $cardinal.$ext;
}
}
<span class="code-keyword">return</span> ordinal($output);
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Aouter"></a>phx:outer
</h2>

<ul>
<li>description: Surround not empty string with text.
</li>

<li>usage: <b>[<ins>string:outer=`before|after`</ins>]</b>
</li>

<li>example: Ditto has no outer template, but you can use this [<b>+phx:input=`[!Ditto? &amp;noResults=` `!]`:outer=`&lt;div class="xyz"&gt;|&lt;/div&gt;`</b>+]
</li>

<li>added by: Jako
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
$options = explode(<span class="code-quote">"|"</span>, $options);
$<span class="code-keyword">outer</span> = '';
<span class="code-keyword">if</span> (trim($output) != '') $<span class="code-keyword">outer</span> = $options[0].$output.$options[1];
<span class="code-keyword">return</span> $<span class="code-keyword">outer</span>;
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Aparent"></a>phx:parent
</h2>

<ul>
<li>description: get specified document field from parent document (id)
</li>

<li>usage: <b>[+</b><b>variable:parent=`field`</b><b>+]</b>
</li>

<li>defaults to pagetitle
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
$field = (strlen($options)&gt;0) ? $options : 'pagetitle';
$parent = $modx-&gt;getParent($output,1,$field);
<span class="code-keyword">return</span> $parent[$field];
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3AparseLinks"></a>phx:parseLinks
</h2>

<ul>
<li>usage: <b>[</b><b>+placeholder:parseLinks</b><b>+]</b>
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
/*
* phx:parseLinks
*/
$t = $output;
$t = ereg_replace(<span class="code-quote">"[a-zA-Z]+:<span class="code-comment">//([.]?[a-zA-Z0-9_/-])*"</span>, <span class="code-quote">"&lt;a href=\"</span>\\0\<span class="code-quote">"&gt;\\0&lt;/a&gt;"</span>, $t);
</span>$t = ereg_replace(<span class="code-quote">"(^| |\n)(www([.]?[a-zA-Z0-9_/-])*)"</span>, <span class="code-quote">"\\1&lt;a href=\"</span>http:<span class="code-comment">//\\2\<span class="code-quote">"&gt;\\2&lt;/a&gt;"</span>, $t);
</span><span class="code-keyword">return</span> $t;
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Aphpthumb"></a>phx:phpthumb
</h2>

<ul>
<li>description: uses <a href="http://phpthumb.sourceforge.net/" class="external-link" rel="nofollow">phpThumb</a> to resize images
</li>

<li>usage: <b>[</b><b>+myimage+]</b> contains the full path to the image
</li>

<li>
<b>[<ins>myimage:phpthumb=`w=450`</ins>]</b>
</li>

<li>
<b>[<ins>myimage:phpthumb=`w=450&amp;ar=x&amp;fltr{}=gray&amp;fltr{}=rcd|8|1`</ins>]</b>
</li>

<li>
<b>[<ins>myimage</ins>]</b> contains only the filename
</li>

<li>
<b>[<ins>myimage:phpthumb=`w=450#[(base_path)]assets/images/`</ins>]</b>
</li>

<li>
<b>[<ins>myimage</ins>]</b> contains no data referring to the image
</li>

<li>
<b>[<ins>myimage:phpthumb=`w=450#[(base_path)]assets/images/myimage.jpg#1`</ins>]</b>
</li>
</ul>

<h2>
<a name="PHxCustomModifiers-phx%3Aphone"></a>phx:phone
</h2>

<ul>
<li>description: transform human readable number ex. <em>+1 (234) 567-89-10</em> into machine form ex. <em>+12345678910</em> (remove " ", "(", ")", "-")
</li>

<li>usage: <b>[<ins>phx:input=`<tt>phone number</tt>`:phone</ins>]</b>
</li>

<li>installation: create snippet named <b>phx:phone</b> and paste code by: Aramaki
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
<span class="code-keyword">return</span> str_replace( array (<span class="code-quote">"("</span>, <span class="code-quote">")"</span>, <span class="code-quote">"-"</span>, <span class="code-quote">" "</span>), "", $output );
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Apost"></a>phx:post
</h2>

<ul>
<li>description: get value by name from superglobal $_POST array
</li>

<li>usage: <b>[+</b><b>phx:post=`name`</b><b>+]</b>
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
<span class="code-keyword">return</span> htmlspecialchars($_POST[$options]);
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Apriceformat"></a>phx:price_format
</h2>

<ul>
<li>description: Formats a number (TV) to a specific format with a specific number of decimals. Useful for allowing users to enter a "price" TV, and making sure you have a consistent XX.YY format, even if they just enter XX.
</li>

<li>usage: <b>[</b><b>+product_price:price_format</b><b>+]</b>.
</li>

<li>default: Defaults to 2 decimal places.
</li>

<li>added by: themancan
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
<span class="code-keyword">if</span> (!function_exists(format_number)) {
function format_number($str,$decimal_places='2',$decimal_padding=<span class="code-quote">"0"</span>){
/* taken from http:<span class="code-comment">//us2.php.net/manual/en/function.number-format.php#54799 */
</span>/* firstly format number and shorten any extra decimal places */
/* Note <span class="code-keyword">this</span> will round off the number pre-format $str <span class="code-keyword">if</span> you dont want <span class="code-keyword">this</span> fucntionality */
$str = number_format($str,$decimal_places,'.',''); <span class="code-comment">// will <span class="code-keyword">return</span> 12345.67
</span>$number = explode('.',$str);
$number[1] = (isset($number[1]))?$number[1]:''; <span class="code-comment">// to fix the PHP Notice error <span class="code-keyword">if</span> str does not contain a decimal placing.
</span>$decimal = str_pad($number[1],$decimal_places,$decimal_padding);
<span class="code-keyword">return</span> (<span class="code-object">float</span>) $number[0].'.'.$decimal;
}
}
<span class="code-keyword">return</span> format_number($output);
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Arating"></a>phx:rating
</h2>

<ul>
<li>description: user rating system based on Jot post count
</li>

<li>usage: <b>[+</b><b>comment.userpostcount:rating+</b><b>]</b>
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
$defaultValue = <span class="code-quote">" &lt;img src=assets/images/icons/star.png /&gt;"</span>;
<span class="code-keyword">if</span> (intval($output) &lt;= '1') {
$newvalue = '&lt;img src=assets/images/icons/bronze.png /&gt;';
}
elseif (intval($output) &lt;= '2') {
$newvalue = '&lt;img src=assets/images/icons/silver.png /&gt;';
}
elseif (intval($output) &lt;= '3') {
$newvalue = '&lt;img src=assets/images/icons/gold.png /&gt;';
}
<span class="code-keyword">else</span> {
$newvalue = $defaultValue;
}
<span class="code-keyword">return</span> $newvalue;
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Arequest"></a>phx:request
</h2>

<ul>
<li>description: get value by name from superglobal $_REQUEST array
</li>

<li>usage: <b>[</b><b>+phx:request=`name`</b><b>+]</b>
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
<span class="code-keyword">return</span> htmlspecialchars($_REQUEST[$options]);
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Areturndomain"></a>phx:return_domain
</h2>

<ul>
<li>description: Takes a string and returns the domain.
</li>

<li>example: "http://wiki.modxcms.com/index.php?title=PHx/CustomModifiers&amp;action=edit" would return just 'wiki.modxcms.com'.
</li>

<li>note: This is designed to be used on a MODx TV with an Input Type of 'URL'. It doesn't do any sort of error checking.
</li>

<li>usage: <b>[<ins>url:return_domain</ins>]</b>.
</li>

<li>added by: themancan
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
preg_match('%(?:https?:<span class="code-comment">//)?(?:www\.)?([^/]*)%i', $output, $matches);
</span><span class="code-keyword">return</span> $matches[1];
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Asmileys"></a>phx:smileys
</h2>

<ul>
<li>description: Converts text patterns into smiley images.
</li>

<li>usage: *[<b>content:smileys</b>]*
</li>

<li>notes: it works with the silk iconset by famfamfam out of the box, if you put the icons into assets/images/smileys. If you want to use other smileys/replacement tags just edit the smileys array.
</li>

<li>added by: maFF
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
$smiley_basepath = $modx-&gt;config['base_url'].'assets/images/smileys/';
$smiley_imagetag = '&lt;img src=<span class="code-quote">"'.$smiley_basepath.'##smiley##"</span> alt=<span class="code-quote">"##text##"</span> title=<span class="code-quote">"##text##"</span> /&gt;';
 
$smileys = array(
':grin:' =&gt; array( <span class="code-comment">// replace pattern
</span>'emoticon_evilgrin.png', <span class="code-comment">// file name
</span>':D'), <span class="code-comment">// text version <span class="code-keyword">for</span> alt and title tags
</span>':smile:' =&gt; array(
'emoticon_happy.png',
':)'),
':sad:' =&gt; array(
'emoticon_unhappy.png',
':('),
':wink:' =&gt; array(
'emoticon_wink.png',
';)'),
':tongue:' =&gt; array(
'emoticon_tongue.png',
':P'),
':surprised:' =&gt; array(
'emoticon_surprised.png',
':O')
);
 
foreach($smileys as $search =&gt; $smiley) {
$thistag = $smiley_imagetag;
$thistag = str_replace('##smiley##', $smiley[0], $thistag);
$thistag = str_replace('##text##', $smiley[1], $thistag);
$output = str_replace($search, $thistag, $output);
}
<span class="code-keyword">return</span> $output;
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Astripsnippet"></a>phx:stripsnippet
</h2>

<ul>
<li>description: Removes cached and uncached snippet in output (usefull in Ditto summarize)
</li>

<li>usage: <b>[+</b><b>string:stripsnippet</b><b>+]</b>
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
$string=$output;
$string = preg_replace('~\[\[[^\]]*\]\]~is', '', $string);
$string = preg_replace('~\[\![^!]*\!\]~is', '', $string);
<span class="code-keyword">return</span> $string;
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Astripparams"></a>phx:stripparams
</h2>

<ul>
<li>description: Strips all parameters from an URL, e.g. example.com/page.html?foo=bar&amp;baz=foo becomes example.com/page.html
</li>

<li>usage: <b>[<ins>url:stripparams</ins>]</b>
</li>

<li>added by: maff
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
$pos = strpos($output, '?');
<span class="code-keyword">if</span>($pos !== <span class="code-keyword">false</span>) {
$output = substr($output, 0, $pos);
}
 
<span class="code-keyword">return</span> $output;
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Astriptags"></a>phx:striptags
</h2>

<ul>
<li>description: Strips all HTML and PHP tags. You can use the optional parameter to specify tags which should _not_ be stripped
</li>

<li>usage: <b>[<ins>comment.content:striptags=`&lt;a&gt;&lt;img&gt;`</ins>]</b>
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
<span class="code-keyword">return</span>($modx-&gt;stripTags($output, $options));
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Athumb"></a>phx:thumb
</h2>

<ul>
<li>description: Similar to maFF's phx:phpthumb but just uses a standard phpThumb installation. Requires <a href="http://phpthumb.sourceforge.net/" class="external-link" rel="nofollow">phpThumb</a>. I'm adding this in addition to the version above because options are always good, and this method just uses an unmodified version of phpThumb. (It also doesn't use the hashing that maFF's version does, so if you need that, use the above version.)
</li>

<li>usage: (basically the same as maFF's version)
<br />
<b>[<ins>myimage</ins>]</b> contains the full path to the image
<br />
&nbsp;&nbsp;&nbsp; <b>[<ins>myimage:phpthumb=`w=450`</ins>]</b>
<br />
<b>&nbsp;&nbsp;&nbsp; [<ins>myimage:phpthumb=`w=450&amp;ar=x&amp;fltr{}=gray&amp;fltr{}=rcd|8|1`</ins>]</b>
</li>

<li>installation: change the path in the code to wherever you like to put your phpThumb. Make sure you make phpThumb's cache directory writable and set phpThumb's config file to how you want it by: themancan
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
$output = '/assets/snippets/thumb/phpThumb.php?src=' . $output . $options;
<span class="code-keyword">return</span> $output;
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Atimesince"></a>phx:timesince
</h2>

<ul>
<li>description: Converts a unix timestamp into the number of years, months, days, hours, minutes, and optionally seconds from the current time.
</li>

<li>usage: <b>[</b><b>+date:timesince</b><b>+]</b>
</li>

<li>added by: apoxx
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
<span class="code-keyword">if</span> (!function_exists('timeSince'))
{
function timeSince($timestamp)
{
<span class="code-keyword">if</span> ($timestamp &gt;= time())
{
$timeago = '0 seconds ago.';
<span class="code-keyword">return</span> $timeago;
}
$seconds = time()-$timestamp;
$units = array(
'year' =&gt; 31556926,
'month' =&gt; 2629743,
'day' =&gt; 86400,
'hour' =&gt; 3600,
'minute' =&gt; 60,
<span class="code-comment">// 'second' =&gt; 1
</span>);
$timeago = '';
foreach ($units as $key =&gt; $val)
{
<span class="code-keyword">if</span> ($seconds &gt;= $val)
{
$results = floor($seconds/$val);
$seconds = ($seconds-($results*$val));
$timeago .= ($results &gt;= 2) ? $results . ' ' . $key . 's, ' : $results . ' ' . $key . ', ';
}
}
<span class="code-keyword">return</span> rtrim($timeago, ', ') . ' ago';
}
}
<span class="code-keyword">return</span> timeSince($output);
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Atextile"></a>phx:textile
</h2>

<ul>
<li>description: Format content using the textile parser class.
</li>

<li>usage: *[<b>content:textile</b>]*
</li>

<li>notes: You need to download <a href="http://textile.thresholdstate.com/" class="external-link" rel="nofollow">Textile</a> and save the class file into assets/snippets/textile (or change the path in the snippet).
</li>

<li>added by: maFF
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
<span class="code-keyword">if</span> (!class_exists('Textile')) {
$classTextile = $modx-&gt;config[<span class="code-quote">"base_path"</span>].'assets/snippets/textile/classTextile.php';
<span class="code-keyword">if</span> (file_exists($classTextile)) {
require_once($classTextile);
}
}
 
$textile = <span class="code-keyword">new</span> Textile();
$output = $textile-&gt;TextileThis($output);
unset($textile);
<span class="code-keyword">return</span> $output;
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Atime"></a>phx:time
</h2>

<ul>
<li>description: Returns Unix timestamp <em>time()</em>.
</li>

<li>usage:
</li>

<li>
<b>[+</b><b>phx:time:date=`%Y`</b><b>+]</b> // Gives the Now Year
</li>

<li>added: CuSS (José Moreira - <a href="http://www.microdual.com/" class="external-link" rel="nofollow">Microdual</a>)&nbsp;
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
<span class="code-keyword">return</span> time();
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Atv"></a>phx:tv
</h2>

<ul>
<li>description: get a template variable from any page id
</li>

<li>usage: <b>[</b><b><ins>+phx:tv=`&lt;docid&gt;?&lt;templatevar&gt;`+</ins></b><b>]</b> , where &lt;docid&gt; is the document id (e.g. 25) and &lt;templatevar&gt; is a template variable associated to the given docid.
</li>

<li>default: if the document id or the template variable don't exist no output is produced
</li>

<li>added by: natalino
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
<span class="code-keyword">if</span>(strlen($options )&gt;0) {
$data = explode(<span class="code-quote">"?"</span>,trim($options),2);
$id= (!empty($data[0]) &amp;&amp; is_numeric($data[0])) ? $data[0]: '';
$tv= (!empty($data[1])) ? $data[1]: '';
$result = $modx-&gt;getTemplateVar($tv, 'name', $id, 1);
<span class="code-keyword">return</span> $result['value'];
}
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Auri"></a>phx:uri
</h2>

<ul>
<li>description: takes a string and prepares it to be a part of a valid URI.
</li>

<li>usage: <b>[</b><b>+string:uri</b><b>+]</b>
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
<span class="code-keyword">return</span> rawurlencode($output);
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Aurl"></a>phx:url
</h2>

<ul>
<li>description: takes a document id and creates the corresponding modx link (similar to [~ ~])
</li>

<li>usage: *[<b>id:url</b>]*
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
<span class="code-keyword">return</span> $modx-&gt;makeUrl($output);
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Awordlimit"></a>phx:word_limit
</h2>

<ul>
<li>description: limits content to specified number of words (good for news summary)
</li>

<li>usage: <b>[+</b><b>content:word_limit=`10`</b><b>+]</b> - limits content to 10 words
</li>

<li>added by: yentsun
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
$retval = $output;
$array = explode(<span class="code-quote">" "</span>, $output);
<span class="code-keyword">if</span> (count($array)&lt;=$options)
{
$retval = $output;
}
<span class="code-keyword">else</span>
{
array_splice($array,$options);
$retval = implode(<span class="code-quote">" "</span>, $array);
}
<span class="code-keyword">return</span> $retval;
?&gt;
</pre>
</div>
</div>

<h2>
<a name="PHxCustomModifiers-phx%3Azeropad"></a>phx:zeropad
</h2>

<ul>
<li>description: Zero-padding a string. Takes the number of total digits as the input.
</li>

<li>example: This can be useful when you want to output some kind of ID numbers with fixed digits, or US zip codes: "00001", "00124", "90210"
</li>

<li>usage: <b>[<ins>ditto_iteration:zeropad=`3`</ins>] [<ins>zipcode:zeropad=`5`</ins>]</b>
</li>

<li>default: No zero-padding.
</li>

<li>added by: ryanlwh
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?
<span class="code-keyword">return</span> sprintf(<span class="code-quote">"%0"</span>.$options.<span class="code-quote">"s"</span>,$output);
?&gt;
</pre>
</div>
</div>