<div>
<ul>
<li>
<a href='#FormIt.Validators-ValidationinFormIt'>Validation in FormIt</a>
</li>

<li>
<a href='#FormIt.Validators-BuiltInValidators'>Built-In Validators</a>
</li>

<li>
<a href='#FormIt.Validators-CustomValidators'>Custom Validators</a>
</li>

<li>
<a href='#FormIt.Validators-CustomErrorMessages'>Custom Error Messages</a>
</li>

<li>
<a href='#FormIt.Validators-SeeAlso'>See Also</a>
</li>
</ul>
</div>

<h2>
<a name="FormIt.Validators-ValidationinFormIt"></a>Validation in FormIt
</h2>

<div class='panelMacro'>
<table class='noteMacro'>
<colgroup>
<col width='24' />
<col />
</colgroup>

<tr>
<td valign='top'>
<img src="/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0" />
</td>
<td>
As of FormIt 1.4.0, validation has changed. The old method of doing validation on the input names will still work until FormIt 2.0.0, when it will be removed. It is recommended to use the new way by using the &amp;validate property.
</td>
</tr>
</table>
</div>

<p>
Validation can simply be done by adding the fields to validate to the &amp;validate property on the Snippet call. For example, to make the username field required, you could do:
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
[[!FormIt? &amp;validate=`username:required`]]
</pre>
</div>
</div>

<p>
Validators can also be "chained", or done in sucession. The following first checks to see if required, then strips all tags from the post:
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
[[!FormIt? &amp;validate=`text:required:stripTags`
</pre>
</div>
</div>

<p>
Multiple fields and validators are separated by commas:
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
[[!FormIt? &amp;validate=`date:required:isDate=^%m/%d/%Y^,
    name:required:testFormItValidator,
    email:email:required,
    colors:required,
    subject:required,
    username:required:islowercase,
    message:stripTags,
    numbers:required`]]
</pre>
</div>
</div>

<p>
FormIt allows you to split the validators on multiple lines if you so choose.
</p>

<p>
Note: Don't use backticks ` inside a validate call. Use carets ^ instead:
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
[[!FormIt? &amp;validate=`date:required:isDate=^%m/%d/%Y^`]]
</pre>
</div>
</div>

<p>
This will fix the call and cause it to work properly.
</p>

<p>
A general error message for validators, useful if no errors are showing but validation is failing, is used with the following placeholder:
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
[[!+fi.validation_error_message]]
</pre>
</div>
</div>

<p>
This will contain a validation error message, which can be set using the &amp;validationErrorMessage property, and using [[+errors]] in the property value, which will be replaced by all the field errors.
</p>

<p>
Also, there is a 1/0 placeholder as well:
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
[[!+fi.validation_error]]
</pre>
</div>
</div>

<h2>
<a name="FormIt.Validators-BuiltInValidators"></a>Built-In Validators
</h2>

<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<th class='confluenceTh'>
name
</th>
<th class='confluenceTh'>
function
</th>
<th class='confluenceTh'>
parameter
</th>
<th class='confluenceTh'>
example
</th>
</tr>

<tr>
<td class='confluenceTd'>
blank
</td>
<td class='confluenceTd'>
Is field blank?
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
nospam:blank
</td>
</tr>

<tr>
<td class='confluenceTd'>
required
</td>
<td class='confluenceTd'>
Is field is not empty?
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
username:required
</td>
</tr>

<tr>
<td class='confluenceTd'>
password_confirm
</td>
<td class='confluenceTd'>
Does field match value of other field?
</td>
<td class='confluenceTd'>
The name of the password field
</td>
<td class='confluenceTd'>
password2:password_confirm=^password^
</td>
</tr>

<tr>
<td class='confluenceTd'>
email
</td>
<td class='confluenceTd'>
Is a valid email address?
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
emailaddr:email
</td>
</tr>

<tr>
<td class='confluenceTd'>
minLength
</td>
<td class='confluenceTd'>
Is field at least X characters long?
</td>
<td class='confluenceTd'>
The min length.
</td>
<td class='confluenceTd'>
password:minLength=^6^
</td>
</tr>

<tr>
<td class='confluenceTd'>
maxLength
</td>
<td class='confluenceTd'>
Is field no more than X characters long?
</td>
<td class='confluenceTd'>
The max length.
</td>
<td class='confluenceTd'>
password:maxLength=^12^
</td>
</tr>

<tr>
<td class='confluenceTd'>
minValue
</td>
<td class='confluenceTd'>
Is field at least X?
</td>
<td class='confluenceTd'>
The minimum value.
</td>
<td class='confluenceTd'>
donation:minValue=^1^
</td>
</tr>

<tr>
<td class='confluenceTd'>
maxValue
</td>
<td class='confluenceTd'>
Is field no higher than X?
</td>
<td class='confluenceTd'>
The maximum value.
</td>
<td class='confluenceTd'>
cost:maxValue=^1200^
</td>
</tr>

<tr>
<td class='confluenceTd'>
contains
</td>
<td class='confluenceTd'>
Does field contain string X?
</td>
<td class='confluenceTd'>
The string X.
</td>
<td class='confluenceTd'>
title:contains=^Hello^
</td>
</tr>

<tr>
<td class='confluenceTd'>
strip
</td>
<td class='confluenceTd'>
Strip a certain string from the field.
</td>
<td class='confluenceTd'>
The string to strip.
</td>
<td class='confluenceTd'>
message:strip=^badword^
</td>
</tr>

<tr>
<td class='confluenceTd'>
stripTags
</td>
<td class='confluenceTd'>
Strip all tags from the field. Note that this is on by default.
</td>
<td class='confluenceTd'>
An optional list of allowed tags.
</td>
<td class='confluenceTd'>
message:stripTags
</td>
</tr>

<tr>
<td class='confluenceTd'>
allowTags
</td>
<td class='confluenceTd'>
Allow tags in the field.
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
content:allowTags
</td>
</tr>

<tr>
<td class='confluenceTd'>
isNumber
</td>
<td class='confluenceTd'>
Is the field a numeric value?
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
cost:isNumber
</td>
</tr>

<tr>
<td class='confluenceTd'>
isDate
</td>
<td class='confluenceTd'>
Is the field a date?
</td>
<td class='confluenceTd'>
An optional format to format the date.
</td>
<td class='confluenceTd'>
startDate:isDate=^%Y-%m-%d^
</td>
</tr>
</tbody>
</table>
</div>

<h2>
<a name="FormIt.Validators-CustomValidators"></a>Custom Validators
</h2>

<p>
Validators can also be custom <a href="/display/revolution20/Snippets" title="Snippets">Snippets</a>. You can do this by simply specifying the snippet name in the customValidators property:
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
[[!FormIt? &amp;customValidators=`isBigEnough`]]
</pre>
</div>
</div>

<div class='panelMacro'>
<table class='noteMacro'>
<colgroup>
<col width='24' />
<col />
</colgroup>

<tr>
<td valign='top'>
<img src="/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0" />
</td>
<td>
As of FormIt 1.2.0, all custom validators <b>must</b> be specified in the customValidators property, or they will not be run.
</td>
</tr>
</table>
</div>

<p>
And then as a validator on the &amp;validate property:
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
[[!FormIt? &amp;validate=`cost:isBigEnough`]]
</pre>
</div>
</div>

<p>
Then in your Snippet, "isBigEnough":
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
$value = (<span class="code-object">float</span>)$value;
$success = $value &gt; 1000;
<span class="code-keyword">if</span> (!$success) {
  <span class="code-comment">// Note how we can add an error to the field here.
</span>  $validator-&gt;addError($key,'Not big enough!');
}
<span class="code-keyword">return</span> $success;
?&gt;
</pre>
</div>
</div>

<p>
The Validator will send the following properties to the snippet, in the $scriptProperties array:
</p>

<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<th class='confluenceTh'>
name
</th>
<th class='confluenceTh'>
function
</th>
</tr>

<tr>
<td class='confluenceTd'>
key
</td>
<td class='confluenceTd'>
The key of the field being validated.
</td>
</tr>

<tr>
<td class='confluenceTd'>
value
</td>
<td class='confluenceTd'>
The value of the field that was POSTed.
</td>
</tr>

<tr>
<td class='confluenceTd'>
param
</td>
<td class='confluenceTd'>
If a parameter was specified for the validator, this is it.
</td>
</tr>

<tr>
<td class='confluenceTd'>
type
</td>
<td class='confluenceTd'>
The name of the validator (or snippet)
</td>
</tr>

<tr>
<td class='confluenceTd'>
validator
</td>
<td class='confluenceTd'>
A reference to the fiValidator class instance.
</td>
</tr>
</tbody>
</table>
</div>

<h2>
<a name="FormIt.Validators-CustomErrorMessages"></a>Custom Error Messages
</h2>

<p>
As of FormIt 2.0-pl, you can override the error messages displayed by the validators, by sending the appropriate property:
</p>

<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<th class='confluenceTh'>
validator
</th>
<th class='confluenceTh'>
property
</th>
</tr>

<tr>
<td class='confluenceTd'>
blank
</td>
<td class='confluenceTd'>
vTextBlank
</td>
</tr>

<tr>
<td class='confluenceTd'>
required
</td>
<td class='confluenceTd'>
vTextRequired
</td>
</tr>

<tr>
<td class='confluenceTd'>
password_confirm
</td>
<td class='confluenceTd'>
vTextPasswordConfirm
</td>
</tr>

<tr>
<td class='confluenceTd'>
email
</td>
<td class='confluenceTd'>
vTextEmailInvalid, vTextEmailInvalidDomain
</td>
</tr>

<tr>
<td class='confluenceTd'>
minLength
</td>
<td class='confluenceTd'>
vTextMinLength
</td>
</tr>

<tr>
<td class='confluenceTd'>
maxLength
</td>
<td class='confluenceTd'>
vTextMaxLength
</td>
</tr>

<tr>
<td class='confluenceTd'>
minValue
</td>
<td class='confluenceTd'>
vTextMinValue
</td>
</tr>

<tr>
<td class='confluenceTd'>
maxValue
</td>
<td class='confluenceTd'>
vTextMaxValue
</td>
</tr>

<tr>
<td class='confluenceTd'>
contains
</td>
<td class='confluenceTd'>
vTextContains
</td>
</tr>

<tr>
<td class='confluenceTd'>
isNumber
</td>
<td class='confluenceTd'>
vTextIsNumber
</td>
</tr>

<tr>
<td class='confluenceTd'>
isDate
</td>
<td class='confluenceTd'>
vTextIsDate
</td>
</tr>

<tr>
<td class='confluenceTd'>
regexp
</td>
<td class='confluenceTd'>
vTextRegexp
</td>
</tr>
</tbody>
</table>
</div>

<p>
You can also specify the message per-field by prefixing the field key in the property. For example, to override the "required" validator message, simply pass in your FormIt call:
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
[[!FormIt?
  &amp;vTextRequired=`Please enter a value <span class="code-keyword">for</span> <span class="code-keyword">this</span> field.`
  &amp;subject.vTextRequired=`Please enter a subject.`
]]
</pre>
</div>
</div>

<p>
This will use the &amp;subject.vTextRequired for the subject field, and then fallback to the &amp;vTextRequired message for all other fields.
</p>

<h2>
<a name="FormIt.Validators-SeeAlso"></a>See Also
</h2>

<div class="plugin_pagetree">
<div style="margin-left: 2em" class="plugin_pagetree_children_list plugin_pagetree_children_list_noleftspace">
<div class="plugin_pagetree_children">
</div>
</div>

<fieldset class="hidden">
<input type="hidden" name="treeId" value="" /> <input type="hidden" name="treeRequestId" value="/plugins/pagetree/naturalchildren.action?decorator=none&amp;excerpt=false&amp;sort=position&amp;reverse=false&amp;disableLinks=false" /> <input type="hidden" name="treePageId" value="33227063" /> <input type="hidden" name="noRoot" value="false" /> <input type="hidden" name="rootPageId" value="11698177" /> <input type="hidden" name="rootPage" value="" /> <input type="hidden" name="startDepth" value="0" /> <input type="hidden" name="spaceKey" value="ADDON" /> <input type="hidden" name="i18n-pagetree.loading" value="Loading..." /> <input type="hidden" name="i18n-pagetree.error.permission" value="Unable to load page tree. It seems that you do not have permission to view the root page." /> <input type="hidden" name="i18n-pagetree.eeror.general" value="There was a problem retrieving the page tree. Please check the server log file for more information." /> <input type="hidden" name="loginUrl" value="/login.action?os_destination=%2Fdisplay%2FADDON%2FFormIt.Validators" />
<fieldset class="hidden">
<input type="hidden" name="ancestorId" value="11698177" />
</fieldset>
</fieldset>
</div>