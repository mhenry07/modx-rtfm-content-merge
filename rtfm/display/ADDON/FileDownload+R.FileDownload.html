<div>
<ul>
<li>
<a href='#FileDownloadR.FileDownload-Main'>Main</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href='#FileDownloadR.FileDownload-downloadByOther'>downloadByOther</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href='#FileDownloadR.FileDownload-FileChunk'>File Chunk</a>
</li>

<li>
<a href='#FileDownloadR.FileDownload-HTML'>HTML</a>
</li>

<li>
<a href='#FileDownloadR.FileDownload-javascript'>javascript</a>
</li>

<li>
<a href='#FileDownloadR.FileDownload-connector'>connector</a>
</li>

<li>
<a href='#FileDownloadR.FileDownload-processors'>processors</a>
</li>
</ul>
</li>
</ul>
</li>

<li>
<a href='#FileDownloadR.FileDownload-Saltforhash'>Salt for hash</a>
</li>

<li>
<a href='#FileDownloadR.FileDownload-Additional'>Additional</a>
</li>

<li>
<a href='#FileDownloadR.FileDownload-Sorting'>Sorting</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href='#FileDownloadR.FileDownload-Example'>Example</a>
</li>
</ul>
</li>

<li>
<a href='#FileDownloadR.FileDownload-Template'>Template</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href='#FileDownloadR.FileDownload-Example'>Example</a>
</li>
</ul>
</li>

<li>
<a href='#FileDownloadR.FileDownload-Headers'>Headers</a>
</li>

<li>
<a href='#FileDownloadR.FileDownload-Style'>Style</a>
</li>
</ul>
</div>

<p>
The parameters are adopted from the evolution's with several changes, so the previous user can easily understand about their usages.
</p>

<p>
Basic usage is [[!FileDownload?]]
</p>

<h1>
<a name="FileDownloadR.FileDownload-Main"></a>Main
</h1>

<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<th class='confluenceTh'>
Name
</th>
<th class='confluenceTh'>
Description
</th>
<th class='confluenceTh'>
Example
</th>
<th class='confluenceTh'>
Default Value
</th>
<th class='confluenceTh'>
Options
</th>
</tr>

<tr>
<td class='confluenceTd'>
getDir
</td>
<td class='confluenceTd'>
Comma separated of directories to display
</td>
<td class='confluenceTd'>
&amp;getDir=`[[<ins>++core_path]]downloads,[[</ins>++base_path]]assets/downloads, assets/files`
</td>
<td class='confluenceTd'>
empty
</td>
<td class='confluenceTd'>
string
</td>
</tr>

<tr>
<td class='confluenceTd'>
getFile
</td>
<td class='confluenceTd'>
Comma separated of files to display
</td>
<td class='confluenceTd'>
&amp;getFile=`assets/files/readme.txt,[[<ins>++core_path]]downloads/readyou.doc,[[</ins>++base_path]]assets/downloads/book1.xlsx`
</td>
<td class='confluenceTd'>
empty
</td>
<td class='confluenceTd'>
string
</td>
</tr>

<tr>
<td class='confluenceTd'>
userGroups
</td>
<td class='confluenceTd'>
This will make the download link active for users that belong to the specified groups. Multiple groups can be specified by using a comma delimited list.
</td>
<td class='confluenceTd'>
&amp;userGroups=`Administrator, Registered Member`
</td>
<td class='confluenceTd'>
empty
</td>
<td class='confluenceTd'>
string
</td>
</tr>

<tr>
<td class='confluenceTd'>
extShown
</td>
<td class='confluenceTd'>
Comma delimited extension of files to display with those extensions.
</td>
<td class='confluenceTd'>
&amp;extShown=`zip,php,txt`
</td>
<td class='confluenceTd'>
empty
</td>
<td class='confluenceTd'>
string
</td>
</tr>

<tr>
<td class='confluenceTd'>
extHidden
</td>
<td class='confluenceTd'>
Comma delimited extension of files to be hid with those extensions. This will overide &amp;extShown values.
</td>
<td class='confluenceTd'>
&amp;extHidden=`zip,php,txt`
</td>
<td class='confluenceTd'>
empty
</td>
<td class='confluenceTd'>
string
</td>
</tr>

<tr>
<td class='confluenceTd'>
toArray
</td>
<td class='confluenceTd'>
Returns the result as an array instead, not parsed in the templates.
</td>
<td class='confluenceTd'>
&amp;toArray=`1`
</td>
<td class='confluenceTd'>
0
</td>
<td class='confluenceTd'>
bool: 0/1
</td>
</tr>

<tr>
<td class='confluenceTd'>
downloadByOther
</td>
<td class='confluenceTd'>
Disable the downloading action by this snippet, to use different way
</td>
<td class='confluenceTd'>
&amp;downloadByOther=`1`
</td>
<td class='confluenceTd'>
0
</td>
<td class='confluenceTd'>
bool: 0/1
</td>
</tr>

<tr>
<td class='confluenceTd'>
directLink
</td>
<td class='confluenceTd'>
Use file's direct path, rather than the hashed link. Make sure it is web accessible
</td>
<td class='confluenceTd'>
&amp;directLink=`1`
</td>
<td class='confluenceTd'>
0
</td>
<td class='confluenceTd'>
bool: 0/1
</td>
</tr>

<tr>
<td class='confluenceTd'>
fdlid
</td>
<td class='confluenceTd'>
Set an ID to each of the snippet calls if there are more than once.
</td>
<td class='confluenceTd'>
&amp;fdlid=`1`
</td>
<td class='confluenceTd'>
null
</td>
<td class='confluenceTd'>
string
</td>
</tr>

<tr>
<td class='confluenceTd'>
plugins
</td>
<td class='confluenceTd'>
<a href="http://rtfm.modx.com/display/ADDON/FileDownload+R.Plugins" class="external-link" rel="nofollow">Read the doc.</a>
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
&nbsp;
</td>
</tr>

<tr>
<td class='confluenceTd'>
prefix
</td>
<td class='confluenceTd'>
prefix for the placeholders
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
'fd.'
</td>
<td class='confluenceTd'>
&nbsp;
</td>
</tr>
</tbody>
</table>
</div>

<h2>
<a name="FileDownloadR.FileDownload-downloadByOther"></a>downloadByOther
</h2>

<div class='panelMacro'>
<table class='tipMacro'>
<colgroup>
<col width='24' />
<col />
</colgroup>

<tr>
<td valign='top'>
<img src="/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0" />
</td>
<td>
available since v.1.0.0-pl
</td>
</tr>
</table>
</div>

<p>
Note for <b>&amp;downloadByOther</b>:
<br />
Example:
<br />
You have the need to use javascript pop-up window to force the downloader to fill up a form before downloading.
<br />
Then through AJAX, you submit the form, and expect results with conditions.
<br />
If the result, for instance, returns true, the AJAX calls the download's API to start the download.
</p>

<h3>
<a name="FileDownloadR.FileDownload-FileChunk"></a>File Chunk
</h3>

<p>
You need to create chunk for the file's rows.
<br />
Eg: jsDownload chunk
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-html">
    <span class="code-tag">&lt;tr[[+fd.class]]&gt;</span>
        <span class="code-tag">&lt;td style=<span class="code-quote">"width:16px;"</span>&gt;</span><span class="code-tag">&lt;img src=<span class="code-quote">"[[+fd.image]]"</span> alt=<span class="code-quote">"[[+fd.image]]"</span> /&gt;</span><span class="code-tag">&lt;/td&gt;</span>
        <span class="code-tag">&lt;td&gt;</span>
            &lt;a href=<span class="code-quote">"javascript:void(0);"</span>
               rel=<span class="code-quote">"#formLink"</span>
               id=<span class="code-quote">"[[+fd.hash]]"</span>
               &gt;[[+fd.filename]]
            <span class="code-tag">&lt;/a&gt;</span>
            <span class="code-tag">&lt;span style=<span class="code-quote">"font-size:80%"</span>&gt;</span>([[+fd.count]] downloads)<span class="code-tag">&lt;/span&gt;</span>
        <span class="code-tag">&lt;/td&gt;</span>
        <span class="code-tag">&lt;td&gt;</span>[[+fd.sizeText]]<span class="code-tag">&lt;/td&gt;</span>
        <span class="code-tag">&lt;td&gt;</span>[[+fd.date]]<span class="code-tag">&lt;/td&gt;</span>
    <span class="code-tag">&lt;/tr&gt;</span>
    [[-- This is the description row if the &amp;chkDesc=`chunkName` is provided --]]
    [[+fd.description:notempty=`<span class="code-tag">&lt;tr&gt;</span>
        <span class="code-tag">&lt;td&gt;</span><span class="code-tag">&lt;/td&gt;</span>
        <span class="code-tag">&lt;td colspan=<span class="code-quote">"3"</span>&gt;</span>[[+fd.description]]<span class="code-tag">&lt;/td&gt;</span>
    <span class="code-tag">&lt;/tr&gt;</span>`:default=``]]
</pre>
</div>
</div>

<h3>
<a name="FileDownloadR.FileDownload-HTML"></a>HTML
</h3>

<p>
#downloaderForm is the basic HTML form with fields.
<br />
In this example, I'm also using <a href="http://jquerytools.org/" class="external-link" rel="nofollow">jQuerytools</a>'s overlay and validator.
<br />
The for is placed directly under the snippet call.
<br />
It's hidden by CSS.
</p>

<p>
So the snippet call would be like this:
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-html">
[[!FileDownload?
&amp;getDir=`assets/downloads`
&amp;tplFile=`jsDownload`
&amp;downloadByOther=`1`
]]
<span class="code-tag">&lt;div class=<span class="code-quote">"form_overlay"</span> id=<span class="code-quote">"formLink"</span>&gt;</span>
    <span class="code-tag">&lt;h2&gt;</span>Contact Form<span class="code-tag">&lt;/h2&gt;</span>
    <span class="code-tag">&lt;form action=<span class="code-quote">"[[~[[*id]]]]"</span> method=<span class="code-quote">"post"</span> class=<span class="code-quote">"form"</span> id=<span class="code-quote">"downloaderForm"</span>&gt;</span>
        <span class="code-tag">&lt;input type=<span class="code-quote">"hidden"</span> name=<span class="code-quote">"nospam:blank"</span> value="" /&gt;</span>
        <span class="code-tag">&lt;input type=<span class="code-quote">"hidden"</span> name=<span class="code-quote">"link"</span> value="" /&gt;</span>
        <span class="code-tag">&lt;label for=<span class="code-quote">"name"</span>&gt;</span>Name:<span class="code-tag">&lt;/label&gt;</span>
        <span class="code-tag">&lt;input type=<span class="code-quote">"text"</span> name=<span class="code-quote">"name"</span> id=<span class="code-quote">"name"</span> value=<span class="code-quote">"" required="</span>required" /&gt;</span>
        <span class="code-tag">&lt;br /&gt;</span>

        <span class="code-tag">&lt;label for=<span class="code-quote">"email"</span>&gt;</span>Email:<span class="code-tag">&lt;/label&gt;</span>
        <span class="code-tag">&lt;input type=<span class="code-quote">"email"</span> name=<span class="code-quote">"email"</span> id=<span class="code-quote">"email"</span> value=<span class="code-quote">"" required="</span>required" /&gt;</span>
        <span class="code-tag">&lt;br /&gt;</span>

        <span class="code-tag">&lt;label for=<span class="code-quote">"phone"</span>&gt;</span>Phone:<span class="code-tag">&lt;/label&gt;</span>
        <span class="code-tag">&lt;input type=<span class="code-quote">"number"</span> name=<span class="code-quote">"phone"</span> id=<span class="code-quote">"phone"</span> value=<span class="code-quote">"" required="</span>required" /&gt;</span>
        <span class="code-tag">&lt;br /&gt;</span>

        <span class="code-tag">&lt;label for=<span class="code-quote">"country"</span>&gt;</span>Country:<span class="code-tag">&lt;/label&gt;</span>
        <span class="code-tag">&lt;input type=<span class="code-quote">"text"</span> name=<span class="code-quote">"country"</span> id=<span class="code-quote">"country"</span> value=<span class="code-quote">"" required="</span>required" /&gt;</span>
        <span class="code-tag">&lt;br /&gt;</span>

        <span class="code-tag">&lt;div class=<span class="code-quote">"form-buttons"</span>&gt;</span>
            <span class="code-tag">&lt;button type=<span class="code-quote">"submit"</span>&gt;</span>Send Contact Inquiry<span class="code-tag">&lt;/button&gt;</span>
            <span class="code-tag">&lt;button type=<span class="code-quote">"reset"</span>&gt;</span>Reset<span class="code-tag">&lt;/button&gt;</span>
        <span class="code-tag">&lt;/div&gt;</span>
    <span class="code-tag">&lt;/form&gt;</span>
<span class="code-tag">&lt;/div&gt;</span>
</pre>
</div>
</div>

<h3>
<a name="FileDownloadR.FileDownload-javascript"></a>javascript
</h3>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-javascript">
$(<span class="code-keyword">function</span>(){
    <span class="code-keyword">var</span> c = 'assets/components/yourpackage/c.php?';
    createForm();

    <span class="code-keyword">function</span> createForm() {
        $(".fd-file a[rel]").each(<span class="code-keyword">function</span>(i) {
            <span class="code-keyword">var</span> self = $(<span class="code-keyword">this</span>);
            self.overlay({
                effect: 'apple',
                onLoad: <span class="code-keyword">function</span>() {
                    <span class="code-keyword">var</span> id = self.attr('id');
                    $("#downloaderForm input[name=link]").val(id);
                },
                onBeforeClose: <span class="code-keyword">function</span>(){
                    $(".error").hide();
                    $("#downloaderForm input").each(<span class="code-keyword">function</span>(){
                        $(<span class="code-keyword">this</span>).removeClass('invalid');
                    });
                    $("#downloaderForm input[name=link]").val('');
                    clearForm($("#downloaderForm"));
                }
            });
        });

        $("#downloaderForm").validator().submit(<span class="code-keyword">function</span>(e){
            <span class="code-keyword">var</span> form = $(<span class="code-keyword">this</span>);
            <span class="code-keyword">if</span> (!e.isDefaultPrevented()) {
                $.post(c + 'action=web/form/add&amp;ctx=web&amp;' + form.serialize(), <span class="code-keyword">function</span>(data) {
                    <span class="code-keyword">if</span> (data &amp;&amp; data.success === <span class="code-keyword">true</span>)  {
                        clearForm(form);
                        $(".fd-file a[rel]").each(<span class="code-keyword">function</span>(i) {
                            $(<span class="code-keyword">this</span>).overlay().close();
                        });
                        fileDownload(c + 'action=web/file/get&amp;ctx=web&amp;link=' + data.link);
                        $(".fd-file a[rel]").each(<span class="code-keyword">function</span>(i) {
                            <span class="code-keyword">var</span> self = $(<span class="code-keyword">this</span>);
                            self.off();
                            <span class="code-keyword">var</span> link = self.attr('id');
                            self.attr('onclick', 'fileDownload("' + c + 'action=web/file/get&amp;ctx=web&amp;link=' + link+'")');
                        });

                    } <span class="code-keyword">else</span> {
                        form.data("validator").invalidate(data);
                    }
                }, "json");
                e.preventDefault();
            }
        });
    }

    <span class="code-keyword">function</span> clearForm(form) {
        form.find(':input').each(<span class="code-keyword">function</span>() {
            <span class="code-keyword">switch</span>(<span class="code-keyword">this</span>.type) {
                <span class="code-keyword">case</span> 'password':
                <span class="code-keyword">case</span> 'select-multiple':
                <span class="code-keyword">case</span> 'select-one':
                <span class="code-keyword">case</span> 'text':
                <span class="code-keyword">case</span> 'email':
                <span class="code-keyword">case</span> 'number':
                <span class="code-keyword">case</span> 'textarea':
                    $(<span class="code-keyword">this</span>).val('');
                    <span class="code-keyword">break</span>;
                <span class="code-keyword">case</span> 'checkbox':
                <span class="code-keyword">case</span> 'radio':
                    <span class="code-keyword">this</span>.checked = <span class="code-keyword">false</span>;
            }
        });
    }
});

<span class="code-keyword">function</span> fileDownload(link) {
    $('&lt;iframe/&gt;',{
        src: link
    }).hide().appendTo($('body'));
}
</pre>
</div>
</div>

<h3>
<a name="FileDownloadR.FileDownload-connector"></a>connector
</h3>

<p>
And the connector would be like this:
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<div class="error">
<span class="error">Unable to find source-code formatter for language: php.</span> Available languages are: actionscript, html, java, javascript, none, sql, xhtml, xml
</div>

<pre class="code-php">
&lt;?php
/**
 * FileDownload R's AJAX connector file
 */
$validActions = array(
    'web/file/get',
    'web/form/add'
);
<span class="code-keyword">if</span> (!empty($_REQUEST['action']) &amp;&amp; in_array($_REQUEST['action'], $validActions)) {
    @session_cache_limiter('<span class="code-keyword">public</span>');
    define('MODX_REQP', <span class="code-keyword">false</span>);
}
require_once dirname(dirname(dirname(dirname(__FILE__)))) . '/config.core.php';
require_once MODX_CORE_PATH . 'config/' . MODX_CONFIG_KEY . '.inc.php';
require_once MODX_CONNECTORS_PATH . 'index.php';

$corePath = $modx-&gt;getOption('filedownload.core_path', <span class="code-keyword">null</span>, $modx-&gt;getOption('core_path') . 'components/filedownload/');
require_once $corePath . 'models/filedownload/filedownload.class.php';
$modx-&gt;filedownload = <span class="code-keyword">new</span> FileDownload($modx);

$modx-&gt;lexicon-&gt;load('filedownload:<span class="code-keyword">default</span>');

<span class="code-keyword">if</span> (in_array($_REQUEST['action'], $validActions)) {
    $version = $modx-&gt;getVersionData();
    <span class="code-keyword">if</span> (version_compare($version['full_version'], '2.1.1-pl') &gt;= 0) {
        <span class="code-keyword">if</span> ($modx-&gt;user-&gt;hasSessionContext($modx-&gt;context-&gt;get('key'))) {
            $_SERVER['HTTP_MODAUTH'] = $_SESSION[<span class="code-quote">"modx.{$modx-&gt;context-&gt;get('key')}.user.token"</span>];
        } <span class="code-keyword">else</span> {
            $_SESSION[<span class="code-quote">"modx.{$modx-&gt;context-&gt;get('key')}.user.token"</span>] = 0;
            $_SERVER['HTTP_MODAUTH'] = 0;
        }
    } <span class="code-keyword">else</span> {
        $_SERVER['HTTP_MODAUTH'] = $modx-&gt;site_id;
    }
    $_REQUEST['HTTP_MODAUTH'] = $_SERVER['HTTP_MODAUTH'];
}

/* handle request */
$path = $modx-&gt;getOption('core_path') . 'components/yourpackage/processors/';
$modx-&gt;request-&gt;handleRequest(array(
    'processors_path' =&gt; $path,
    'location' =&gt; '',
));
</pre>
</div>
</div>

<h3>
<a name="FileDownloadR.FileDownload-processors"></a>processors
</h3>

<p>
core/components/yourpackage/processors/web/file/get/
<br />
example:
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<div class="error">
<span class="error">Unable to find source-code formatter for language: php.</span> Available languages are: actionscript, html, java, javascript, none, sql, xhtml, xml
</div>

<pre class="code-php">
&lt;?php

<span class="code-keyword">if</span> (!$modx-&gt;loadClass('FileDownload', $modx-&gt;getOption('core_path') . 'components/filedownload/models/', <span class="code-keyword">true</span>, <span class="code-keyword">true</span>)) {
    $modx-&gt;log(modX::LOG_LEVEL_ERROR, '[FileDownload] Could not load FileDownload class.');
    <span class="code-keyword">return</span> '';
}

$fdl = $modx-&gt;getService('fdl'
        , 'FileDownload'
        , $modx-&gt;getOption('core_path') . 'components/filedownload/models/filedownload/'
);

$configs = array();
$configs['countDownloads'] = <span class="code-keyword">true</span>;

$fdl-&gt;setConfigs($configs);

$downloadFile = $fdl-&gt;downloadFile($scriptProperties['link']);    <span class="code-comment">// &lt;== THIS IS WHERE YOU DOWNLOAD THE FILE
</span><span class="code-keyword">if</span> (!$downloadFile) {
    $output = array('success' =&gt; FALSE);
} <span class="code-keyword">else</span> {
    $output = array('success' =&gt; TRUE);
}
<span class="code-keyword">return</span> json_encode($output);
</pre>
</div>
</div>

<h1>
<a name="FileDownloadR.FileDownload-Saltforhash"></a>Salt for hash
</h1>

<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<th class='confluenceTh'>
Name
</th>
<th class='confluenceTh'>
Description
</th>
<th class='confluenceTh'>
Default Value
</th>
<th class='confluenceTh'>
Options
</th>
</tr>

<tr>
<td class='confluenceTd'>
saltText
</td>
<td class='confluenceTd'>
This text will be added to the file's hashed link to disguise the direct path
</td>
<td class='confluenceTd'>
FileDownload
</td>
<td class='confluenceTd'>
string
</td>
</tr>
</tbody>
</table>
</div>

<p>
The link is a hashed text of the saltText, context, and filename/dirname combination.
<br />
So if you change the saltText value after a while, it will not block the content's appearance from the page, but the database will start the counter from zero again since it will not find the same hashed value.
</p>

<h1>
<a name="FileDownloadR.FileDownload-Additional"></a>Additional
</h1>

<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<th class='confluenceTh'>
Name
</th>
<th class='confluenceTh'>
Description
</th>
<th class='confluenceTh'>
Example
</th>
<th class='confluenceTh'>
Default Value
</th>
<th class='confluenceTh'>
Options
</th>
</tr>

<tr>
<td class='confluenceTd'>
noDownload
</td>
<td class='confluenceTd'>
This property will make the list only displays files without their download links.
<br class="atl-forced-newline" />
note: this is different from the Evo's version
</td>
<td class='confluenceTd'>
&amp;noDownload=`1`
</td>
<td class='confluenceTd'>
0
</td>
<td class='confluenceTd'>
bool: 0/1
</td>
</tr>

<tr>
<td class='confluenceTd'>
browseDirectories
</td>
<td class='confluenceTd'>
Allows users to view subdirectories of the directory specified with the &amp;getDir parameter.
</td>
<td class='confluenceTd'>
&amp;browseDirectories=`1`
</td>
<td class='confluenceTd'>
0
</td>
<td class='confluenceTd'>
bool:0/1
</td>
</tr>

<tr>
<td class='confluenceTd'>
chkDesc
</td>
<td class='confluenceTd'>
Allows descriptions to be added to the file listing included in a chunk.
</td>
<td class='confluenceTd'>
&amp;chkDesc=`fileDesc`
</td>
<td class='confluenceTd'>
fileDescription
</td>
<td class='confluenceTd'>
chunk's name
</td>
</tr>

<tr>
<td class='confluenceTd'>
dateFormat
</td>
<td class='confluenceTd'>
PHP's date formatting for the list
</td>
<td class='confluenceTd'>
&amp;dateFormat=`m/d/Y`
</td>
<td class='confluenceTd'>
Y-m-d
</td>
<td class='confluenceTd'>
string
</td>
</tr>

<tr>
<td class='confluenceTd'>
countDownloads
</td>
<td class='confluenceTd'>
Tracking the downloading
</td>
<td class='confluenceTd'>
&amp;countDownloads=`1`
</td>
<td class='confluenceTd'>
0
</td>
<td class='confluenceTd'>
bool: 0/1
</td>
</tr>

<tr>
<td class='confluenceTd'>
imgTypes
</td>
<td class='confluenceTd'>
A chunk name to define the associations between file extension and image
</td>
<td class='confluenceTd'>
&amp;imgTypes=`fdImages`
</td>
<td class='confluenceTd'>
fdImages
</td>
<td class='confluenceTd'>
chunk's name
</td>
</tr>

<tr>
<td class='confluenceTd'>
imgLocat
</td>
<td class='confluenceTd'>
Path to the images to associate with each file extension.
</td>
<td class='confluenceTd'>
&amp;imgLocat=`assets/filetypes`
</td>
<td class='confluenceTd'>
assets/components/filedownload/img/filetype
</td>
<td class='confluenceTd'>
web accessible path
</td>
</tr>
</tbody>
</table>
</div>

<h1>
<a name="FileDownloadR.FileDownload-Sorting"></a>Sorting
</h1>

<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<th class='confluenceTh'>
Name
</th>
<th class='confluenceTh'>
Description
</th>
<th class='confluenceTh'>
Example
</th>
<th class='confluenceTh'>
Default Value
</th>
<th class='confluenceTh'>
Options
</th>
</tr>

<tr>
<td class='confluenceTd'>
sortBy
</td>
<td class='confluenceTd'>
Sort ordering.
<br class="atl-forced-newline" />
Options:filename | extension | path | size | sizetext | type | date | unixdate (1.1.4-pl) | description | count
</td>
<td class='confluenceTd'>
&amp;sortBy=`path`
</td>
<td class='confluenceTd'>
filename
</td>
<td class='confluenceTd'>
string
</td>
</tr>

<tr>
<td class='confluenceTd'>
sortByCaseSensitive
</td>
<td class='confluenceTd'>
Case sensitive option for sorting
</td>
<td class='confluenceTd'>
&amp;sortByCaseSensitive=`1`
</td>
<td class='confluenceTd'>
0
</td>
<td class='confluenceTd'>
bool: 0/1
</td>
</tr>

<tr>
<td class='confluenceTd'>
sortOrder
</td>
<td class='confluenceTd'>
Sort files in ascending or descending order.
</td>
<td class='confluenceTd'>
&amp;sortOrder=`desc`
</td>
<td class='confluenceTd'>
asc
</td>
<td class='confluenceTd'>
asc/desc
</td>
</tr>

<tr>
<td class='confluenceTd'>
sortOrderNatural
</td>
<td class='confluenceTd'>
Sort order option by a natural order
</td>
<td class='confluenceTd'>
&amp;sortOrderNatural=`1`
</td>
<td class='confluenceTd'>
1
</td>
<td class='confluenceTd'>
bool: 0/1
</td>
</tr>

<tr>
<td class='confluenceTd'>
groupByDirectory
</td>
<td class='confluenceTd'>
If multiple directories are specified in the getDir parameter, this property will group the files by each directory.
</td>
<td class='confluenceTd'>
&amp;groupByDirectory=`1`
</td>
<td class='confluenceTd'>
0
</td>
<td class='confluenceTd'>
bool: 0/1
</td>
</tr>
</tbody>
</table>
</div>

<p>
Multiple sorting orders are applied as these orders:
</p>

<ul>
<li>File sort: filename
</li>

<li>browseDirectories : dir, filename
</li>

<li>groupByDirectory : path, dir, filename
</li>
</ul>

<h2>
<a name="FileDownloadR.FileDownload-Example"></a>Example
</h2>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-html">
[[!FileDownload?
&amp;getDir=`[[++core_path]]downloads-from-core/land rover, assets/downloads`
&amp;browseDirectories=`1`
&amp;groupByDirectory=`1`
]]
</pre>
</div>
</div>

<p>
<span class="image-wrap" style=""><img src="/download/attachments/35586636/browsedirectories-groupbydirectory.jpg?version=1&amp;modificationDate=1345838638000" style="border: 0px solid black" /></span>
</p>

<h1>
<a name="FileDownloadR.FileDownload-Template"></a>Template
</h1>

<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<th class='confluenceTh'>
Name
</th>
<th class='confluenceTh'>
Description
</th>
<th class='confluenceTh'>
Example
</th>
<th class='confluenceTh'>
Default Value
</th>
<th class='confluenceTh'>
Options
</th>
</tr>

<tr>
<td class='confluenceTd'>
tplDir
</td>
<td class='confluenceTd'>
directory row template
</td>
<td class='confluenceTd'>
&amp;tplDir=`tpl-dir`
</td>
<td class='confluenceTd'>
tpl-dir
</td>
<td class='confluenceTd'>
chunk's name/ @Bindings
</td>
</tr>

<tr>
<td class='confluenceTd'>
tplFile
</td>
<td class='confluenceTd'>
file row template
</td>
<td class='confluenceTd'>
&amp;tplFile=`tpl-file`
</td>
<td class='confluenceTd'>
tpl-file
</td>
<td class='confluenceTd'>
chunk's name/ @Bindings
</td>
</tr>

<tr>
<td class='confluenceTd'>
tplGroupDir
</td>
<td class='confluenceTd'>
This is the template of the directory path if the &amp;groupByDirectory is enabled
</td>
<td class='confluenceTd'>
&amp;tplGroupDir=`tpl-group`
</td>
<td class='confluenceTd'>
tpl-group-dirchunk's name
</td>
<td class='confluenceTd'>
chunk's name/ @Bindings
</td>
</tr>

<tr>
<td class='confluenceTd'>
tplWrapper
</td>
<td class='confluenceTd'>
This is the container template of all of the snippet's results
</td>
<td class='confluenceTd'>
&amp;tplWrapper=`tplWrapper`
</td>
<td class='confluenceTd'>
tpl-wrapper
</td>
<td class='confluenceTd'>
chunk's name/ @Bindings
</td>
</tr>

<tr>
<td class='confluenceTd'>
tplWrapperDir
</td>
<td class='confluenceTd'>
This is the container template for folders (optional)
</td>
<td class='confluenceTd'>
&amp;tplWrapperDir=`tplWrapperDir`
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
chunk's name/ @Bindings
</td>
</tr>

<tr>
<td class='confluenceTd'>
tplWrapperFile
</td>
<td class='confluenceTd'>
This is the container template for files (optional)
</td>
<td class='confluenceTd'>
&amp;tplWrapperFile=`tplWrapperFile`
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
chunk's name/ @Bindings
</td>
</tr>

<tr>
<td class='confluenceTd'>
tplIndex
</td>
<td class='confluenceTd'>
A generated index.html file to cover up the directory from direct web access
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
&amp;tplIndex=`tpl-index`
</td>
<td class='confluenceTd'>
tpl-index
</td>
<td class='confluenceTd'>
chunk's name/ @Bindings
<br class="atl-forced-newline" />
</td>
</tr>

<tr>
<td class='confluenceTd'>
tplNotAllowed
</td>
<td class='confluenceTd'>
Template for forbidden access. [[!Login]] can be used in here.
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
&amp;tplNotAllowed=`tpl-notAllowed`
</td>
<td class='confluenceTd'>
@FILE: [[++core_path]]components/filedownload/elements/chunks/tpl-notallowed.chunk.tpl
</td>
<td class='confluenceTd'>
chunk's name/ @Bindings
</td>
</tr>

<tr>
<td class='confluenceTd'>
tplBreadcrumb
</td>
<td class='confluenceTd'>
Template for breadcrumb
</td>
<td class='confluenceTd'>
&amp;tplBreadcrumb =`tpl-breadcrumb`
</td>
<td class='confluenceTd'>
tpl-breadcrumb
</td>
<td class='confluenceTd'>
chunk's name/ @Bindings
</td>
</tr>

<tr>
<td class='confluenceTd'>
breadcrumbSeparator
</td>
<td class='confluenceTd'>
separator character for the breadcrumb
</td>
<td class='confluenceTd'>
&amp;breadcrumbSeparator=` / `
</td>
<td class='confluenceTd'>
/
</td>
<td class='confluenceTd'>
string
</td>
</tr>
</tbody>
</table>
</div>

<p>
<em>tplWrapperDir</em> &amp; <em>tplWrapperFile</em> (1.0.0-rc.5) are used to provide different wrappers between folders and files.
<br />
That means that they might have different headers. There are the default chunks inside <b>{core_path}components/filedownload/elements/chunks/</b>, which are <b>tpl-wrapper-dir</b>.chunk.tpl and <b>tpl-wrapper file</b>.chunk.tpl, respectively.
<br />
To use them, <em>tplWrapper</em> must be changed too or set it empty instead.
</p>

<p>
FileDownload R has <a href="http://rtfm.modx.com/display/MODx096/What+are+%28at%29+Bindings" class="external-link" rel="nofollow">@BINDING</a> directives for the template:
</p>

<ul>
<li>@CODE|@INLINE
</li>

<li>@FILE
</li>

<li>@CHUNK (or not at all) - <b>default</b>
</li>
</ul>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-html">
[[!FileDownload?
&amp;getDir=`assets/downloads`
&amp;tplFile=`@CODE:    <span class="code-tag">&lt;tr[[+fd.class]]&gt;</span>
        <span class="code-tag">&lt;td&gt;</span>
            <span class="code-tag">&lt;span class=<span class="code-quote">"fd-icon"</span>&gt;</span>
                <span class="code-tag">&lt;img src=<span class="code-quote">"[[+fd.image]]"</span> alt="" /&gt;</span>
            <span class="code-tag">&lt;/span&gt;</span>
            <span class="code-tag">&lt;a href=<span class="code-quote">"[[+fd.url]]"</span>&gt;</span>[[+fd.filename]]<span class="code-tag">&lt;/a&gt;</span>
            <span class="code-tag">&lt;span style=<span class="code-quote">"font-size:80%"</span>&gt;</span>([[+fd.count]] downloads)<span class="code-tag">&lt;/span&gt;</span>
        <span class="code-tag">&lt;/td&gt;</span>
        <span class="code-tag">&lt;td&gt;</span>[[+fd.sizeText]]<span class="code-tag">&lt;/td&gt;</span>
        <span class="code-tag">&lt;td&gt;</span>[[+fd.date]]<span class="code-tag">&lt;/td&gt;</span>
    <span class="code-tag">&lt;/tr&gt;</span>`
]]
</pre>
</div>
</div>

<h2>
<a name="FileDownloadR.FileDownload-Example"></a>Example
</h2>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-html">
[[!FileDownload?
&amp;getDir=`assets/downloads`
&amp;browseDirectories=`1`
&amp;tplWrapper=``
&amp;tplWrapperDir=`tpl-wrapper-dir`
&amp;tplWrapperFile=`tpl-wrapper-file`
]]
</pre>
</div>
</div>

<p>
<span class="image-wrap" style=""><img src="/download/attachments/35586636/separate-wrappers.jpg?version=1&amp;modificationDate=1345838225000" style="border: 0px solid black" /></span>
</p>

<h1>
<a name="FileDownloadR.FileDownload-Headers"></a>Headers
</h1>

<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<th class='confluenceTh'>
Name
</th>
<th class='confluenceTh'>
Description
</th>
<th class='confluenceTh'>
Default Value
</th>
<th class='confluenceTh'>
Options
</th>
</tr>

<tr>
<td class='confluenceTd'>
fileCss
</td>
<td class='confluenceTd'>
FileDownload's Cascading Style Sheet file for the page header
</td>
<td class='confluenceTd'>
assets/components/filedownload/css/fd.css
</td>
<td class='confluenceTd'>
web path
</td>
</tr>

<tr>
<td class='confluenceTd'>
fileJs
</td>
<td class='confluenceTd'>
FileDownload's Javascript file for the page header
</td>
<td class='confluenceTd'>
assets/components/filedownload/js/fd.js
</td>
<td class='confluenceTd'>
web path
</td>
</tr>
</tbody>
</table>
</div>

<h1>
<a name="FileDownloadR.FileDownload-Style"></a>Style
</h1>

<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<th class='confluenceTh'>
Name
</th>
<th class='confluenceTh'>
Description
</th>
<th class='confluenceTh'>
Example
</th>
<th class='confluenceTh'>
Default Value
</th>
<th class='confluenceTh'>
Options
</th>
</tr>

<tr>
<td class='confluenceTd'>
cssAltRow
</td>
<td class='confluenceTd'>
This specifies the class that will be applied to every other file/directory so a ledger look can be styled.
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
fd-altRow
</td>
</tr>

<tr>
<td class='confluenceTd'>
cssDir
</td>
<td class='confluenceTd'>
Class name for all directories
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
fd-dir
</td>
<td class='confluenceTd'>
css class name
</td>
</tr>

<tr>
<td class='confluenceTd'>
cssExtension
</td>
<td class='confluenceTd'>
With this parameter set to 1, a class will be added to each file according to the file's extension.
</td>
<td class='confluenceTd'>
&amp;cssExtension=`1`
</td>
<td class='confluenceTd'>
0
</td>
<td class='confluenceTd'>
bool: 0/1
</td>
</tr>

<tr>
<td class='confluenceTd'>
cssExtensionPrefix
</td>
<td class='confluenceTd'>
Prefix to the above cssExtension class name
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
fd-
</td>
<td class='confluenceTd'>
string
</td>
</tr>

<tr>
<td class='confluenceTd'>
cssExtensionSuffix
</td>
<td class='confluenceTd'>
Suffix to the above cssExtension class name
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
null
</td>
<td class='confluenceTd'>
string
</td>
</tr>

<tr>
<td class='confluenceTd'>
cssFile
</td>
<td class='confluenceTd'>
Class name for all files
</td>
<td class='confluenceTd'>
&amp;cssFile=`files`
</td>
<td class='confluenceTd'>
fd-file
</td>
<td class='confluenceTd'>
class name
</td>
</tr>

<tr>
<td class='confluenceTd'>
cssFirstDir
</td>
<td class='confluenceTd'>
Class name for the first directory
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
fd-firstDir
</td>
<td class='confluenceTd'>
css class name
</td>
</tr>

<tr>
<td class='confluenceTd'>
cssFirstFile
</td>
<td class='confluenceTd'>
Class name for the first file
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
fd-firstFile
</td>
<td class='confluenceTd'>
css class name
</td>
</tr>

<tr>
<td class='confluenceTd'>
cssGroupDir
</td>
<td class='confluenceTd'>
Class name for the the directory for multi-directory grouping.
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
fd-group-dir
</td>
<td class='confluenceTd'>
css class name
</td>
</tr>

<tr>
<td class='confluenceTd'>
cssLastDir
</td>
<td class='confluenceTd'>
Class name for the last directory
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
fd-lastDir
</td>
<td class='confluenceTd'>
css class name
</td>
</tr>

<tr>
<td class='confluenceTd'>
cssLastFile
</td>
<td class='confluenceTd'>
Class name for the last file
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
fd-lastFile
</td>
<td class='confluenceTd'>
css class name
</td>
</tr>

<tr>
<td class='confluenceTd'>
cssPath
</td>
<td class='confluenceTd'>
This specifies the class that will be applied to the path when using directory browsing.
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
fd-path
</td>
<td class='confluenceTd'>
css class name
</td>
</tr>
</tbody>
</table>
</div>