<div>
<ul>
<li>
<a href='#Lingua-Background'>Background</a>
</li>

<li>
<a href='#Lingua-CMP'>CMP</a>
</li>

<li>
<a href='#Lingua-Plugin'>Plugin</a>
</li>

<li>
<a href='#Lingua-Snippets'>Snippets</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href='#Lingua-lingua.selector'>lingua.selector</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href='#Lingua-Properties'>Properties</a>
</li>

<li>
<a href='#Lingua-DefaultChunks'>Default Chunks</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href='#Lingua-lingua.selector.wrapper'>lingua.selector.wrapper</a>
</li>

<li>
<a href='#Lingua-lingua.selector.item'>lingua.selector.item</a>
</li>
</ul>
</li>
</ul>
</li>

<li>
<a href='#Lingua-lingua.cultureKey'>lingua.cultureKey</a>
</li>

<li>
<a href='#Lingua-lingua.getField'>lingua.getField</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href='#Lingua-Properties'>Properties</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href='#Lingua-Examples'>Examples</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<p>
A MODX's Lexicon switcher for front-end interface.
<br />
This can be downloaded from Manager's Package Manager.
<br />
The extra page is <a href="http://modx.com/extras/package/lingua" class="external-link" rel="nofollow">http://modx.com/extras/package/lingua</a>.
<br />
Any issues can be reported to here: <a href="https://github.com/goldsky/Lingua/issues" class="external-link" rel="nofollow">https://github.com/goldsky/Lingua/issues</a>
</p>

<h2>
<a name="Lingua-Background" id="Lingua-Background"></a>Background
</h2>

<p>
This package was written by goldsky, and first released on June 6, 2013, initially prepared for <a href="http://forums.modx.com/u/adamwintle" class="external-link" rel="nofollow">Adam Wintle</a> of <a href="http://www.monogon.co" class="external-link" rel="nofollow">Monogon</a> to create a chinese website.
</p>

<p>
This add-on was made to answer the need of creating a multilingual website without messing up with contexts.
<br />
The concept was based on <a href="http://modx.com/extras/package/translations" class="external-link" rel="nofollow">Translations</a> package, but independently developed start from the scratch and heading on different direction.
</p>

<h2>
<a name="Lingua-CMP" id="Lingua-CMP"></a>CMP
</h2>

<p>
The Custom Manager Page is provided to manage the list of languages and their settings.
</p>

<p>
<span class="image-wrap" style=""><a class="confluence-thumbnail-link 942x634" href='http://oldrtfm.modx.com/download/attachments/46137393/Lingua_CMP.png'><img src="/download/thumbnails/46137393/Lingua_CMP.png" style="border: 1px solid black" /></a></span>
</p>

<h2>
<a name="Lingua-Plugin" id="Lingua-Plugin"></a>Plugin
</h2>

<p>
The plugin is used to manage the cookie and session of the selected language.
<br />
This plugin then provides a placeholder <b>[[+lingua.cultureKey]]</b> for the page.
<br />
But to get this value for other snippet, like language selection of a email hook, the developer can use <b>[[!lingua.cultureKey]]</b> below.
</p>

<h2>
<a name="Lingua-Snippets" id="Lingua-Snippets"></a>Snippets
</h2>

<p>
For front-end usage, Lingua has some utility snippets.
<br />
ALL snippets have &amp;toArray to dump all the placeholders and &amp;toPlaceholder to hold the output and store it into the given placeholder's name.
</p>

<h3>
<a name="Lingua-lingua.selector" id="Lingua-lingua.selector"></a>lingua.selector
</h3>

<p>
This snippet is the language selector on the front-end.
<br />
The chunks have <a href="http://twitter.github.io/bootstrap/javascript.html#dropdowns" class="external-link" rel="nofollow">twitter bootstrap's dropdown-toogle style</a> as default, just to give an idea of how they were prepared.
</p>

<p>
<span class="image-wrap" style=""><a class="confluence-thumbnail-link 327x362" href='http://oldrtfm.modx.com/download/attachments/46137393/lingua.selector.png'><img src="/download/thumbnails/46137393/lingua.selector.png" style="border: 1px solid black" /></a></span>
</p>

<p>
When the user clicks the link, then the page will be redirected back to the same page, but with additional REQUEST url to initiate the language session.
<br />
The REQUEST key can be defined in System Setting, but the default key is <b><em>lang</em></b>.
</p>

<h4>
<a name="Lingua-Properties" id="Lingua-Properties"></a>Properties
</h4>

<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<th class='confluenceTh'>
Name
</th>
<th class='confluenceTh'>
Description
</th>
<th class='confluenceTh'>
Example
</th>
<th class='confluenceTh'>
Default Value
</th>
<th class='confluenceTh'>
Options
</th>
</tr>

<tr>
<td class='confluenceTd'>
tplWrapper
</td>
<td class='confluenceTd'>
the wrapper template chunk
</td>
<td class='confluenceTd'>
&amp;tplWrapper=`chunkName`
</td>
<td class='confluenceTd'>
lingua.selector.wrapper
</td>
<td class='confluenceTd'>
chunk's name, @BINDINGs enabled
</td>
</tr>

<tr>
<td class='confluenceTd'>
tplItem
</td>
<td class='confluenceTd'>
the item template chunk
</td>
<td class='confluenceTd'>
&amp;tplItem=`chunkName`
</td>
<td class='confluenceTd'>
lingua.selector.item
</td>
<td class='confluenceTd'>
chunk's name, @BINDINGs enabled
</td>
</tr>

<tr>
<td class='confluenceTd'>
sortby
</td>
<td class='confluenceTd'>
sort the output by a field name
</td>
<td class='confluenceTd'>
&amp;tplItem=`lcid_string`
</td>
<td class='confluenceTd'>
id
</td>
<td class='confluenceTd'>
id, local_name, lang_code, lcid_string, lcid_dec
</td>
</tr>

<tr>
<td class='confluenceTd'>
sortdir
</td>
<td class='confluenceTd'>
the direction of the sorting
</td>
<td class='confluenceTd'>
&amp;sortdir=`ASC`
</td>
<td class='confluenceTd'>
asc
</td>
<td class='confluenceTd'>
asc, desc
</td>
</tr>

<tr>
<td class='confluenceTd'>
phsPrefix
</td>
<td class='confluenceTd'>
placeholder's prefix to avoid conflict with other packages' placeholders
</td>
<td class='confluenceTd'>
&amp;phsPrefix=`lingua.`
</td>
<td class='confluenceTd'>
lingua.
</td>
<td class='confluenceTd'>
(string)
</td>
</tr>

<tr>
<td class='confluenceTd'>
codeField
</td>
<td class='confluenceTd'>
the field of which will be used as the value of the options
</td>
<td class='confluenceTd'>
&amp;codeField=`lang_code`
</td>
<td class='confluenceTd'>
System Setting's <b>lingua.code.field</b>
</td>
<td class='confluenceTd'>
id, local_name, lang_code, lcid_string, lcid_dec
</td>
</tr>
</tbody>
</table>
</div>

<p>
@BINDING in chunks means the developer can use:
</p>

<ul>
<li>chunk name
</li>

<li>@FILE:[[++core_path]]path/to/chunk/file.tpl
</li>

<li>@CODE:&lt;div&gt;[[+lingua.languages]]&lt;/div&gt;
</li>
</ul>

<h4>
<a name="Lingua-DefaultChunks" id="Lingua-DefaultChunks"></a>Default Chunks
</h4>

<h5>
<a name="Lingua-lingua.selector.wrapper" id="Lingua-lingua.selector.wrapper"></a>lingua.selector.wrapper
</h5>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;div class=<span class="code-quote">"container"</span>&gt;
        &lt;div class=<span class="code-quote">"btn-group"</span>&gt;
                &lt;button
                        class=<span class="code-quote">"btn btn-link btn-mini dropdown-toggle"</span>
                        data-toggle=<span class="code-quote">"dropdown"</span>
                        &gt;[[%lingua.select_language]]
                &lt;/button&gt;
                &lt;ul class=<span class="code-quote">"dropdown-menu"</span>&gt;
                        [[+lingua.languages]]
                &lt;/ul&gt;
        &lt;/div&gt;
&lt;/div&gt;
</pre>
</div>
</div>

<h5>
<a name="Lingua-lingua.selector.item" id="Lingua-lingua.selector.item"></a>lingua.selector.item
</h5>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
[[+lingua.cultureKey:is=`[[+lingua.lang_code]]`:then=``:<span class="code-keyword">else</span>=`&lt;li&gt;
        &lt;a href=<span class="code-quote">"[[+lingua.url]]"</span> title=<span class="code-quote">"[[+lingua.local_name]]"</span>&gt;
                &lt;img src=<span class="code-quote">"[[+lingua.flag]]"</span> alt=""/&gt; [[+lingua.local_name]]
        &lt;/a&gt;
&lt;/li&gt;`]]
</pre>
</div>
</div>

<p>
On this chunk, the default content tries to ignore the language of the current language using Output Filter.
</p>

<h3>
<a name="Lingua-lingua.cultureKey" id="Lingua-lingua.cultureKey"></a>lingua.cultureKey
</h3>

<p>
This snippet to get the current active language.
<br />
This snippet only contains
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<div class="error">
<span class="error">Unable to find source-code formatter for language: php.</span> Available languages are: actionscript, html, java, javascript, none, sql, xhtml, xml
</div>

<pre class="code-php">
<span class="code-keyword">return</span> $modx-&gt;cultureKey;
</pre>
</div>
</div>

<p>
No! It's different to
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<div class="error">
<span class="error">Unable to find source-code formatter for language: php.</span> Available languages are: actionscript, html, java, javascript, none, sql, xhtml, xml
</div>

<pre class="code-php">
<span class="code-keyword">return</span> $modx-&gt;getOption('cultureKey');
</pre>
</div>
</div>

<p>
This snippet is the most important part to grab the language's lexicons.
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
[[!%login? &amp;namespace=`Login` &amp;language=`[[!lingua.cultureKey]]`]]
</pre>
</div>
</div>

<p>
<b>Please notice the exclamation mark in front of the %login. The lexicon must be +UN+CACHED.</b>
</p>

<h3>
<a name="Lingua-lingua.getField" id="Lingua-lingua.getField"></a>lingua.getField
</h3>

<p>
This snippet is to get the value of the field of the current running language on the page.
<br />
The value will be switched to the selected active language.
</p>

<h4>
<a name="Lingua-Properties" id="Lingua-Properties"></a>Properties
</h4>

<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<th class='confluenceTh'>
Name
</th>
<th class='confluenceTh'>
Description
</th>
<th class='confluenceTh'>
Example
</th>
<th class='confluenceTh'>
Default Value
</th>
<th class='confluenceTh'>
Options
</th>
</tr>

<tr>
<td class='confluenceTd'>
<b>field</b>
</td>
<td class='confluenceTd'>
any field to be selected
</td>
<td class='confluenceTd'>
&amp;field=`date_format_lite`
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
all available fields: id, active, local_name, lang_code, lcid_string, lcid_dec, date_format_lite, date_format_full, is_rtl, flag
</td>
</tr>

<tr>
<td class='confluenceTd'>
codeField
</td>
<td class='confluenceTd'>
the field of which will be used as the value of the options
</td>
<td class='confluenceTd'>
&amp;codeField=`lang_code`
</td>
<td class='confluenceTd'>
System Setting's <b>lingua.code.field</b>
</td>
<td class='confluenceTd'>
id, local_name, lang_code, lcid_string, lcid_dec
</td>
</tr>
</tbody>
</table>
</div>

<h5>
<a name="Lingua-Examples" id="Lingua-Examples"></a>Examples
</h5>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
Created on: [[*createdon:date=`[[!lingua.getField? &amp;field=`date_format_lite`]]`]]
</pre>
</div>
</div>