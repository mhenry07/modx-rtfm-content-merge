<p>
<em>This document provides information on the mhPayPal snippet, its properties and some example usages. If looking for more information about the mhPayPal package in which the snippet is included, please visit ?</em><em><a href="extras/revo/mhpaypal" title="mhPayPal">mhPayPal</a></em> instead.
</p>

<h2 id="mhPayPal.SnippetUsage-Introduction">
Introduction
</h2>

<p>
The mhPayPal snippet is the core of the mhPayPal package. It outputs your form, validates the input, sends the visitor to PayPal for immediate payment and processes any hooks you may have configured. There are basically two ways you can use this snippet. Either to accept donations where the user types in the amount they want to donate, or to accept one product payments based on a price you set in the snippet call.
</p>

<p>
Since the result of the mhPayPal snippet depends on the user, URL parameters etc, <strong>the mhPayPal snippet always needs to be called uncached!</strong>
</p>

<h2 id="mhPayPal.SnippetUsage-SnippetProperties">
Snippet Properties
</h2>

<p>
The list below is a list of all the properties you may use with mhPayPal. Please refer to the ?<a href="revolution/2.x/making-sites-with-modx/tag-syntax" title="Tag Syntax">Tag Syntax</a> if you are unsure on how to use these properties.
</p>

<table>
<tbody>
<tr>
<th>
&amp;property
<br />
</th>
<th>
Description
<br />
</th>
<th>
Default value
<br />
</th>
<th>
Version
<br />
</th>
</tr>

<tr>
<td>
currencies
<br />
</td>
<td>
A comma separated list of currency codes which you will want your visitors to be able of paying with. See the list of <a href="https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&amp;content_ID=developer/e_howto_api_nvp_currency_codes">Currency Codes on PayPal</a>.
<br />
</td>
<td>
EUR,USD,GBP
<br />
</td>
<td>
1.1.0
<br />
</td>
</tr>

<tr>
<td>
amount
<br />
</td>
<td>
&#91;float&#93; If you are using mhPayPal for <strong>fixed price payments</strong>, make sure to set the amount to a numeric value larger than 0. See the examples on using mhPayPal for payments elsewhere.
<br />
</td>
<td>
0
<br />
</td>
<td>
1.1.0
<br />
</td>
</tr>

<tr>
<td>
amountTax
<br />
</td>
<td>
&#91;float&#93; Amount of taxes to add to the payment/donation.
<br />
</td>
<td>
0
<br />
</td>
<td>
1.1.0
<br />
</td>
</tr>

<tr>
<td>
amountFees
<br />
</td>
<td>
&#91;float&#93; Amount of fees to add to the payment/donation.
<br />
</td>
<td>
0
<br />
</td>
<td>
1.1.0
<br />
</td>
</tr>

<tr>
<td>
amountHandling
<br />
</td>
<td>
&#91;float&#93; Amount of handling costs to add to the payment/donation.
<br />
</td>
<td>
0
<br />
</td>
<td>
1.1.0
<br />
</td>
</tr>

<tr>
<td>
minAmount
</td>
<td>
&#91;float&#93; When using mhPayPal for <strong>donations where users choose the price</strong>, you can force a minimum amount with this property.
<br />
</td>
<td>
5.00
</td>
<td>
1.1.0
<br />
</td>
</tr>

<tr>
<td>
decimals
<br />
</td>
<td>
&#91;integer&#93; Amount of decimals to show.
<br />
</td>
<td>
2
<br />
</td>
<td>
1.1.0
<br />
</td>
</tr>

<tr>
<td>
description
<br />
</td>
<td>
&#91;string&#93; The text to use as description. Can contain placeholders of any fields like currency and amount.
<br />
</td>
<td>
Your &#91;&#91;+currency&#93;&#93;&#91;&#91;+amount&#93;&#93; Donation
<br />
</td>
<td>
1.1.0
<br />
</td>
</tr>

<tr>
<td>
outputSeparator
<br />
</td>
<td>
&#91;string&#93; Text/markup to place between bits of output. The form is one piece of output, and so is the collection of error messages and anything hooks may have added.
<br />
</td>
<td>
\n
<br />
</td>
<td>
1.1.0
<br />
</td>
</tr>

<tr>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
</tr>

<tr>
<td>
&nbsp;
</td>
<td>
<strong>Form Handling</strong>
<br />
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
</tr>

<tr>
<td>
formTpl
<br />
</td>
<td>
&#91;string&#93; Name of a chunk to use. See Templating elsewhere in these docs for more information on how to use your own form. Defaults to a form with a currency selector and an amount input box.
<br />
</td>
<td>
mhPayPalTpl (file-based)
<br />
</td>
<td>
1.1.0
<br />
</td>
</tr>

<tr>
<td>
formTplAnonymous
<br />
</td>
<td>
&#91;string&#93; Name of a chunk to use when there is no user logged in. Could be used to display a message or login box if you only want users with an account to make a payment or donation. When left empty (default), it will use the chunk as specified with the formTpl property.
<br />
</td>
<td>
&nbsp;
</td>
<td>
1.1.0
<br />
</td>
</tr>

<tr>
<td>
errorTpl
<br />
</td>
<td>
&#91;string&#93; Name of ac hunk to use for individual error messages.See templating for more information on how to customize this.
</td>
<td>
mhPayPalErrorTpl (file-based)
<br />
</td>
<td>
1.1.0
<br />
</td>
</tr>

<tr>
<td>
successTpl
<br />
</td>
<td>
&#91;string&#93; Name of a chunk to use to display a success message. See templating for more information on how to customize this.
<br />
</td>
<td>
mhPayPalSuccess (file-based)
<br />
</td>
<td>
1.1.0
<br />
</td>
</tr>

<tr>
<td>
errorSeparator
<br />
</td>
<td>
?&#91;string&#93; String/text/markup to use in between individual error messages.
<br />
</td>
<td>
&lt;br /&gt;
<br />
</td>
<td>
1.1.0
<br />
</td>
</tr>

<tr>
<td>
extraRequiredFields
<br />
</td>
<td>
&#91;string&#93; Comma separated list of field names that are required and cannot be left empty, can be used to collect extra data about the user for use in a custom hook or the likes.
<br />
</td>
<td>
&nbsp;
</td>
<td>
1.1.0
<br />
</td>
</tr>

<tr>
<td>
method
<br />
</td>
<td>
&#91;GET|POST&#93; Either GET or POST, indicating if the form should use URL parameters or a POST request.
<br />
</td>
<td>
POST
<br />
</td>
<td>
1.1.0
<br />
</td>
</tr>

<tr>
<td>
submitVar
<br />
</td>
<td>
&#91;string&#93; The name of a field that needs to exist in the GET or POST (depending on &amp;method) in order for this snippet to start processing.
<br />
</td>
<td>
makeDonation
<br />
</td>
<td>
1.1.0
<br />
</td>
</tr>

<tr>
<td>
id
<br />
</td>
<td>
&#91;string&#93; Can be used when you have multiple forms on one page, to ensure there are no ID conflicts.
<br />
</td>
<td>
pp
<br />
</td>
<td>
1.1.0
<br />
</td>
</tr>

<tr>
<td>
showFormOnSuccess
<br />
</td>
<td>
&#91;1|0&#93; Indicates if the snippet needs to show the form when the payment was successful.
<br />
</td>
<td>
1
<br />
</td>
<td>
1.1.0
<br />
</td>
</tr>

<tr>
<td>
shipping
<br />
</td>
<td>
&#91;1|0&#93; Tells PayPal if the user needs to confirm shipping details or not.
<br />
</td>
<td>
0
<br />
</td>
<td>
1.1.0
<br />
</td>
</tr>

<tr>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
</tr>

<tr>
<td>
&nbsp;
</td>
<td>
<strong>Hooks</strong> (though inspired by FormIt, do note that FormIt hooks are not compatible with mhPayPal)
<br />
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
</tr>

<tr>
<td>
preHooks
<br />
</td>
<td>
&#91;string&#93; Comma separated list of hooks to be executed before viewing the form. This only triggers when the form has not yet been submitted.
<br />
</td>
<td>
&nbsp;
</td>
<td>
1.1.0
<br />
</td>
</tr>

<tr>
<td>
postHooks
<br />
</td>
<td>
&#91;string&#93; Comma separated list of hooks to be executed after succesfully submitting the form, but before connecting with PayPal to set up the payment. Could be used to (for example) calculate taxes before it is registered with PayPal, or to further validate the data.
<br />
</td>
<td>
&nbsp;
</td>
<td>
1.1.0
<br />
</td>
</tr>

<tr>
<td>
postPaymentHooks
<br />
</td>
<td>
&#91;string&#93; Comma separated list of hooks to be executed after making a successful payment and receiving details about the payer from PayPal. Can be used to notify users via email (see the email hook) or to add data about the payment to a custom table.
<br />
</td>
<td>
&nbsp;
</td>
<td>
1.1.0
<br />
</td>
</tr>
</tbody>
</table>

<h2 id="mhPayPal.SnippetUsage-ExampleUsage">
Example Usage
</h2>

<p>
Please also see the specific pages for hooks and templating for more detail about those. Please note that this assumes a correct installation and configured PayPal API access.
</p>

<h3 id="mhPayPal.SnippetUsage-MinimumSnippetCall">
Minimum Snippet Call
</h3>

<p>
Displays the default form with all default options, meaning it will allow users to fill in their desired donation with a minimum of 5 EUR/USD/GBP.
</p>

<pre class="brush: php">
&#91;&#91;!mhPayPal&#93;&#93;
</pre>
<h3 id="mhPayPal.SnippetUsage-UsingmhPayPaltomakeaoneproductfixedpricepayments">
Using mhPayPal to make a one-product fixed price payments
</h3>

<p>
This example still uses the default form (you probably don't want that in this case), but ignores what the user choses and forces the USD currency at an amount of 15 bucks + 2.85 taxes. This also sets a description. This could be a great starting point, along with a custom chunk tpl and a hook or two, for allowing super quick check out of products.
</p>

<pre class="brush: php">
&#91;&#91;!mhPayPal?
  &amp;amount=`15`
  &amp;amountTax=`2.85`
  &amp;description=`Product XYZ (&#91;&#91;+currency&#93;&#93;&#91;&#91;+amount&#93;&#93;)`
  &amp;currencies=`USD`
  &#93;&#93;
</pre>
<h2 id="mhPayPal.SnippetUsage-MoremhPayPaldocumentation">
More mhPayPal documentation
</h2>

<ul>
<li>
<a href="extras/revo/mhpaypal/mhpaypal.snippet-usage" title="mhPayPal.Snippet Usage">mhPayPal.Snippet Usage</a>
</li>
</ul>