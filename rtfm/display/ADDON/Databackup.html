<p>
<br class="atl-forced-newline" />
</p>

<div>
<ul>
<li>
<a href='#Databackup-WhatisDatabackup%3F'>What is Databackup?</a>
</li>

<li>
<a href='#Databackup-History'>History</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href='#Databackup-Download'>Download</a>
</li>

<li>
<a href='#Databackup-DevelopmentandBugReporting'>Development and Bug Reporting</a>
</li>
</ul>
</li>

<li>
<a href='#Databackup-HowtoUse'>How to Use</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href='#Databackup-HowtousesnippetwithgetCache'>How to use snippet with getCache</a>
</li>

<li>
<a href='#Databackup-SystemSettingsrevolution20%3ASystemSettings'>System Settings</a>
</li>

<li>
<a href='#Databackup-AvailableProperties'>Available Properties</a>
</li>
</ul>
</li>
</ul>
</div>

<h2>
<a name="Databackup-WhatisDatabackup%3F"></a>What is Databackup?
</h2>

<p>
Databackup is a <a href="/display/revolution20/Snippets" title="Snippets">Snippet</a> for MODX Revolution that will backup your MODX MySQL database as one sql dump file and/or each table as a SQL dump as well as other MySQL databases. The extra does use PDO so it might be able to do other databases, like MSSQL, as is but I have not tested this.
</p>

<h2>
<a name="Databackup-History"></a>History
</h2>

<p>
Databackup was written by Josh Gulledge as an easy way to keep data backups, and first released on August 12th, 2011.
</p>

<h3>
<a name="Databackup-Download"></a>Download
</h3>

<p>
It can be downloaded from within the MODx Revolution manager via <a href="/display/revolution20/Package+Management" title="Package Management">Package Management</a>, or from the MODx Extras Repository, here: <a href="http://modx.com/extras/package/databackup" class="external-link" rel="nofollow">http://modx.com/extras/package/databackup</a>
</p>

<h3>
<a name="Databackup-DevelopmentandBugReporting"></a>Development and Bug Reporting
</h3>

<p>
Databackup is stored and developed in GitHub, and can be found here:<a href="https://github.com/jgulledge19/DataBackup" class="external-link" rel="nofollow">https://github.com/jgulledge19/DataBackup</a>
</p>

<p>
Bugs can be filed here: <a href="https://github.com/jgulledge19/DataBackup/issues" class="external-link" rel="nofollow">https://github.com/jgulledge19/DataBackup/issues</a>
</p>

<h2>
<a name="Databackup-HowtoUse"></a>How to Use
</h2>

<ol>
<li>Install via the package manager
</li>

<li>Set the databackup.folder setting to something that is behind your web root. The default is core/components/databackup/dumps/
</li>

<li>Set the purge time option (databackup.pruge) if you want this to be different, the default is 1814400, which is 21 days.
</li>

<li>Set up Cron Manager: <a href="http://rtfm.modx.com/display/ADDON/CronManager" class="external-link" rel="nofollow">http://rtfm.modx.com/display/ADDON/CronManager</a> and then Create a new job.
</li>

<li>Select the backup snippet and then select in minutes how often you would like this to run. Every 24 hours is 1440 minutes.
</li>
</ol>

<h3>
<a name="Databackup-HowtousesnippetwithgetCache"></a>How to use snippet with getCache
</h3>

<p>
See: <a href="http://www.jasoncoward.com/technology/2010/10/simple-content-caching-with-getcache.html" class="external-link" rel="nofollow">getcache</a> for getCache examples.
</p>

<p>
This is a simple backup your site every 24 hours(assuming the page is visited) or less if you flush the cache. It will also purge the backups older then 21 days.
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
[[!getCache?
&amp;element=`backup`
&amp;excludeTables=`my_custom_table,my_other_custom_table`

&amp;cacheExpires=`86400`
]]
</pre>
</div>
</div>

<h3>
<a name="Databackup-SystemSettingsrevolution20%3ASystemSettings"></a><a href="/display/revolution20/System+Settings" title="System Settings">System Settings</a>
</h3>

<p>
These need to be created if they do not exist.
</p>

<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<th class='confluenceTh'>
Name
</th>
<th class='confluenceTh'>
Key
</th>
<th class='confluenceTh'>
Field Type
</th>
<th class='confluenceTh'>
Namespace
</th>
<th class='confluenceTh'>
Description
</th>
<th class='confluenceTh'>
Default Value
</th>
</tr>

<tr>
<td class='confluenceTd'>
Folder
</td>
<td class='confluenceTd'>
databackup.folder
</td>
<td class='confluenceTd'>
Textfield
</td>
<td class='confluenceTd'>
databackup
</td>
<td class='confluenceTd'>
This is the folder path that will save you .sql files to. PHP must have write permissions to this folder.
</td>
<td class='confluenceTd'>
{core_path}components/databackup/dumps/
</td>
</tr>

<tr>
<td class='confluenceTd'>
Pruge Files
</td>
<td class='confluenceTd'>
databackup.pruge
</td>
<td class='confluenceTd'>
Textfield
</td>
<td class='confluenceTd'>
databackup
</td>
<td class='confluenceTd'>
Purge old files that are older then the current time - seconds. Default is 1814400 (21 days).
</td>
<td class='confluenceTd'>
1814400
</td>
</tr>
</tbody>
</table>
</div>

<div class='panelMacro'>
<table class='infoMacro'>
<colgroup>
<col width='24' />
<col />
</colgroup>

<tr>
<td valign='top'>
<img src="/images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0" />
</td>
<td>
<b>WARNING</b>
<br />
Be careful where you make the file path for the purge setting: databackup.folder. If you place this in an existing folder all files older then the purge date will be delete. It is recommended that you create a new folder for your backups that are behind the public web.
</td>
</tr>
</table>
</div>

<h3>
<a name="Databackup-AvailableProperties"></a>Available Properties
</h3>

<p>
There is also a sample backupMany snippet. You can modify this example snippet to backup other databases.
</p>

<p>
Version 1.1
</p>

<div class='table-wrap'>
<table id='TBL1376497247095' class='confluenceTable'>
<tbody>
<tr>
<th class='confluenceTh'>
Name
</th>
<th class='confluenceTh'>
Description
</th>
<th class='confluenceTh'>
Default Value
</th>
</tr>

<tr>
<td class='confluenceTd'>
database
</td>
<td class='confluenceTd'>
The database you wish to backup.
</td>
<td class='confluenceTd'>
modx
</td>
</tr>

<tr>
<td class='confluenceTd'>
includeTables
</td>
<td class='confluenceTd'>
Comma separated list of tables to include. All other tables will be excluded if this option is used.
</td>
<td class='confluenceTd'>
NULL
</td>
</tr>

<tr>
<td class='confluenceTd'>
excludeTables
</td>
<td class='confluenceTd'>
Comma separated list of tables to exclude. All other tables will be included.
</td>
<td class='confluenceTd'>
NULL
</td>
</tr>

<tr>
<td class='confluenceTd'>
writeFile
</td>
<td class='confluenceTd'>
Boolean This will write one large SQL dump file. options: true/false
</td>
<td class='confluenceTd'>
true
</td>
</tr>

<tr>
<td class='confluenceTd'>
writeTableFiles
</td>
<td class='confluenceTd'>
Boolean This will write each tables as a individual SQL dump file. options: true/false
</td>
<td class='confluenceTd'>
true
</td>
</tr>

<tr>
<td class='confluenceTd'>
commentPrefix
</td>
<td class='confluenceTd'>
This are the SQL comment prefix.
</td>
<td class='confluenceTd'>
â€“
</td>
</tr>

<tr>
<td class='confluenceTd'>
commentSuffix
</td>
<td class='confluenceTd'>
If the comment for SQL need an ending suffix. Default is empty
</td>
<td class='confluenceTd'>
&nbsp;
</td>
</tr>

<tr>
<td class='confluenceTd'>
newLine
</td>
<td class='confluenceTd'>
The value to print a new line in SQL files.
</td>
<td class='confluenceTd'>
\n
</td>
</tr>

<tr>
<td class='confluenceTd'>
useDrop
</td>
<td class='confluenceTd'>
Boolean true/false to use the the DROP TABLE in the SQL files
</td>
<td class='confluenceTd'>
true
</td>
</tr>

<tr>
<td class='confluenceTd'>
createDatabase
</td>
<td class='confluenceTd'>
Boolean true/false to use a CREATE DATABASE command in the SQL files
</td>
<td class='confluenceTd'>
false
</td>
</tr>
</tbody>
</table>
</div>