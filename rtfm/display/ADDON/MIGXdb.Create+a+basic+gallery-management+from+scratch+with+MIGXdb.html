<div>
<ul>
<li>
<a href="extras/revo/migxdb/migxdb.tutorials/migxdb.create-a-basic-gallery-management-from-scratch-with-migxdb#MIGXdb.Createabasicgallery-managementfromscratchwithMIGXdb-CreatingabasicgallerymanagementfromscratchwithMIGXdb">Creating a basic gallery-management from scratch with MIGXdb</a>
</li>

<li>
<a href="extras/revo/migxdb/migxdb.tutorials/migxdb.create-a-basic-gallery-management-from-scratch-with-migxdb#MIGXdb.Createabasicgallery-managementfromscratchwithMIGXdb-Requirements">Requirements</a>
</li>

<li>
<a href="extras/revo/migxdb/migxdb.tutorials/migxdb.create-a-basic-gallery-management-from-scratch-with-migxdb#MIGXdb.Createabasicgallery-managementfromscratchwithMIGXdb-CreateanewPackageandschemafile">Create a new Package and schema-file</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href="extras/revo/migxdb/migxdb.tutorials/migxdb.create-a-basic-gallery-management-from-scratch-with-migxdb#MIGXdb.Createabasicgallery-managementfromscratchwithMIGXdb-TheSchema">The Schema</a>
</li>

<li>
<a href="extras/revo/migxdb/migxdb.tutorials/migxdb.create-a-basic-gallery-management-from-scratch-with-migxdb#MIGXdb.Createabasicgallery-managementfromscratchwithMIGXdb-ParseSchema">Parse Schema</a>
</li>

<li>
<a href="extras/revo/migxdb/migxdb.tutorials/migxdb.create-a-basic-gallery-management-from-scratch-with-migxdb#MIGXdb.Createabasicgallery-managementfromscratchwithMIGXdb-CreateTable%28s%29">Create Table(s)</a>
</li>
</ul>
</li>

<li>
<a href="extras/revo/migxdb/migxdb.tutorials/migxdb.create-a-basic-gallery-management-from-scratch-with-migxdb#MIGXdb.Createabasicgallery-managementfromscratchwithMIGXdb-CreatetheConfiguration">Create the Configuration</a>
</li>

<li>
<a href="extras/revo/migxdb/migxdb.tutorials/migxdb.create-a-basic-gallery-management-from-scratch-with-migxdb#MIGXdb.Createabasicgallery-managementfromscratchwithMIGXdb-CreatetheMIGXdbTV">Create the MIGXdb - TV</a>
</li>

<li>
<a href="extras/revo/migxdb/migxdb.tutorials/migxdb.create-a-basic-gallery-management-from-scratch-with-migxdb#MIGXdb.Createabasicgallery-managementfromscratchwithMIGXdb-Addingextendedfields">Adding extended fields</a>
</li>

<li>
<a href="extras/revo/migxdb/migxdb.tutorials/migxdb.create-a-basic-gallery-management-from-scratch-with-migxdb#MIGXdb.Createabasicgallery-managementfromscratchwithMIGXdb-Makingsomegalleries.">Making some galleries.</a>
</li>

<li>
<a href="extras/revo/migxdb/migxdb.tutorials/migxdb.create-a-basic-gallery-management-from-scratch-with-migxdb#MIGXdb.Createabasicgallery-managementfromscratchwithMIGXdb-Addingasearchfieldtoourgrid">Adding a search-field to our grid</a>
</li>

<li>
<a href="extras/revo/migxdb/migxdb.tutorials/migxdb.create-a-basic-gallery-management-from-scratch-with-migxdb#MIGXdb.Createabasicgallery-managementfromscratchwithMIGXdb-ListingtheImagesonFrontend.">Listing the Images on Frontend.</a>
</li>
</ul>
</div>

<h2>
<a name="MIGXdb.Createabasicgallery-managementfromscratchwithMIGXdb-CreatingabasicgallerymanagementfromscratchwithMIGXdb" id="MIGXdb.Createabasicgallery-managementfromscratchwithMIGXdb-CreatingabasicgallerymanagementfromscratchwithMIGXdb"></a>Creating a basic gallery-management from scratch with MIGXdb
</h2>

<p>
In this Tutorial we will learn how to create your own gallery-management with help of MIGXdb.
<br />
First we will create a db-schema and its table(s).
<br />
Then we will create and configure a MIGXdb-TV to manage our images (db-records).
<br />
In the next step we will create some Resources (galleries) and add some images with our MIGXdb - TV.
<br />
At last we will show our images at frontend with a snippet.
</p>

<h2>
<a name="MIGXdb.Createabasicgallery-managementfromscratchwithMIGXdb-Requirements" id="MIGXdb.Createabasicgallery-managementfromscratchwithMIGXdb-Requirements"></a>Requirements
</h2>

<p>
First off we will need to install <a href="display/ADDON/MIGX" title="MIGX">MIGX</a> by package-management and do some <a href="display/ADDON/MIGXdb.Configuration" title="MIGXdb.Configuration">basic configurations</a>.
</p>

<h2>
<a name="MIGXdb.Createabasicgallery-managementfromscratchwithMIGXdb-CreateanewPackageandschemafile" id="MIGXdb.Createabasicgallery-managementfromscratchwithMIGXdb-CreateanewPackageandschemafile"></a>Create a new Package and schema-file
</h2>

<p>
Go to Components-&gt;MIGX-&gt;Tab 'Package Manager'
</p>

<p>
add a name for your new package into the field 'packageName:'. For our example we use 'mygallery'.
<br />
Click 'Create Package'
<br />
This should create a directory under your core-path with an empty schema-file in its correct place.
</p>

<p>
Still having 'mygallery' in the field packageName we want to fill the textarea-field 'schema'.
<br />
Go to the tab 'xml schame' and add this code:
</p>

<h3>
<a name="MIGXdb.Createabasicgallery-managementfromscratchwithMIGXdb-TheSchema" id="MIGXdb.Createabasicgallery-managementfromscratchwithMIGXdb-TheSchema"></a>The Schema
</h3>

<pre class="brush: php">
    
{
  "formtabs":[
    {
      "MIGX_id":1,
      "caption":"Image",
      "fields":[
        {
          "MIGX_id":2,
          "field":"title",
          "caption":"Title",
          "inputTV":"",
          "inputTVtype":"",
          "configs":""
        },
        {
          "MIGX_id":1,
          "field":"image",
          "caption":"Image",
          "inputTV":"",
          "inputTVtype":"image",
          "configs":""
        },
        {
          "MIGX_id":3,
          "field":"pos",
          "caption":"Position",
          "inputTV":"",
          "inputTVtype":"",
          "configs":""
        }
      ]
    },
    {
      "MIGX_id":2,
      "caption":"Description",
      "fields":[
        {
          "MIGX_id":1,
          "field":"description",
          "caption":"Description",
          "inputTV":"",
          "inputTVtype":"textarea",
          "configs":""
        }
      ]
    }
  ],
  "contextmenus":"update||publish||unpublish||recall_remove_delete",
  "actionbuttons":"addItem||toggletrash",
  "columnbuttons":"",
  "filters":"",
  "extended":{
    "migx_add":"Add Image",
    "packageName":"mygallery",
    "classname":"myGallery",
    "task":"",
    "prefix":"",
    "grid":"",
    "check_resid":1,
    "check_resid_TV":""
  },
  "columns":[
    {
      "MIGX_id":1,
      "header":"ID",
      "dataIndex":"id",
      "renderer":"",
      "sortable":"false",
      "show_in_grid":1
    },
    {
      "MIGX_id":2,
      "header":"Title",
      "dataIndex":"title",
      "renderer":"",
      "sortable":true,
      "show_in_grid":1
    },
    {
      "MIGX_id":3,
      "header":"image",
      "dataIndex":"image",
      "renderer":"this.renderImage",
      "sortable":"false",
      "show_in_grid":1
    },
    {
      "MIGX_id":4,
      "header":"Published",
      "dataIndex":"published",
      "renderer":"this.renderCrossTick",
      "sortable":true,
      "show_in_grid":1
    },
    {
      "MIGX_id":5,
      "header":"Position",
      "dataIndex":"pos",
      "renderer":"",
      "sortable":true,
      "show_in_grid":1
    },
    {
      "MIGX_id":6,
      "header":"",
      "dataIndex":"deleted",
      "renderer":"",
      "sortable":"false",
      "show_in_grid":"0"
    }
  ]
}

    
</pre>
<p>
click 'done'
</p>

<p>
you can check what it has done by right-clicking the record and choose 'edit' and go thrue the tabs and its nested grids.
</p>

<h2>
<a name="MIGXdb.Createabasicgallery-managementfromscratchwithMIGXdb-CreatetheMIGXdbTV" id="MIGXdb.Createabasicgallery-managementfromscratchwithMIGXdb-CreatetheMIGXdbTV"></a>Create the MIGXdb - TV
</h2>

<p>
Create a new Template for our gallery-pages.
</p>

<p>
now we create our MIGXdb - TV.
<br />
Create a new TV.
<br />
Name: mygallery
</p>

<p>
Go to the tab: 'Input Options'
<br />
Under 'Configurations' add: 'mygallery'
</p>

<p>
This says MIGX to search for configurations with name 'mygallery' This can be configuration-records as we have done above or php-files as it is done for the MIGX-configs-CMP.
<br />
The MIGX-config-CMP is nothing else as a MIGXdb-CMP itself.
</p>

<p>
Add this TV to our gallery-template.
</p>

<p>
click 'Save' to save the new created TV.
</p>

<h2>
<a name="MIGXdb.Createabasicgallery-managementfromscratchwithMIGXdb-Addingextendedfields" id="MIGXdb.Createabasicgallery-managementfromscratchwithMIGXdb-Addingextendedfields"></a>Adding extended fields
</h2>

<p>
we want to add a URL to each image. This is very easy, because we can use the extended-field to store additional fields in it.
<br />
We just need to create a new Input-field to our Form.
</p>

<p>
Go to Components-&gt;MIGX
<br />
right-click on our mygallery-config, choose 'Edit'
</p>

<p>
Go to the Tab 'Formtabs'
<br />
click 'Add Item' -&gt;
<br />
caption: 'Extended Fields'
<br />
on Fields click 'Add Item' -&gt;
<br />
fieldname: extended.url
<br />
Caption: URL
<br />
inputTVtype: url
<br />
click done -&gt; done -&gt; done to close all windows and save out additions
</p>

<p>
Now we have created a new tab in our gallery-management-window with a new field to add a URL to our image
</p>

<h2>
<a name="MIGXdb.Createabasicgallery-managementfromscratchwithMIGXdb-Makingsomegalleries." id="MIGXdb.Createabasicgallery-managementfromscratchwithMIGXdb-Makingsomegalleries."></a>Making some galleries.
</h2>

<p>
Create a folder in the resource-tree 'Galleries' with your gallery-template.
<br />
Create Resources und this folder with the same gallery-template.
<br />
By clicking 'Load grid' this should load our db-grid where we can add,edit,delete records with images.
<br />
The created records should be automatically connected to our resources by the db-field 'resource_id' and we will see only the records connected to our resource in the grid.
</p>

<h2>
<a name="MIGXdb.Createabasicgallery-managementfromscratchwithMIGXdb-Addingasearchfieldtoourgrid" id="MIGXdb.Createabasicgallery-managementfromscratchwithMIGXdb-Addingasearchfieldtoourgrid"></a>Adding a search-field to our grid
</h2>

<p>
Go to Components-&gt;MIGX
<br />
right-click on our mygallery-config, choose 'Edit'
<br />
Tab 'db-filters'
<br />
click 'add item'
<br />
filter name: search
<br />
filter type: textbox
<br />
getlist where:
</p>

<pre class="brush: php">
    
[[!migxLoopCollection?
&amp;packageName=`mygallery`
&amp;classname=`myGallery`
&amp;sortConfig=`[{"sortby":"pos","sortdir":"ASC"}]`
&amp;where=`{"resource_id":"[[*id]]","published":"1"}`
]]

    
</pre>
<p>
creates a printed array of all published images which belong to the active resource
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
[[!migxLoopCollection?
&amp;packageName=`mygallery`
&amp;classname=`myGallery`
&amp;sortConfig=`[{<span class="code-quote">"sortby"</span>:<span class="code-quote">"RAND()"</span>}]`
&amp;where=`{<span class="code-quote">"resource_id"</span>:<span class="code-quote">"[[*id]]"</span>,<span class="code-quote">"published"</span>:<span class="code-quote">"1"</span>}`
&amp;tpl=`@CODE:&lt;img src=<span class="code-quote">"[[+image]]"</span> /&gt;`
]]
</pre>
</div>
</div>

<p>
lists all images in random order
</p>