<h2 id="sekFormTools.input.combobox-Whatisinput.combobox?">
What is input.combobox?
</h2>

<p>
Add a combobox to a form quickly and easily using this snippet.
</p>

<h2 id="sekFormTools.input.combobox-Usage">
Usage
</h2>

<p>
Example for input.combobox using a value list:
</p>

<pre class="brush: php">
[[input.combobox? &amp;value_list=`[{ "value": "r", "label": "Red" }, { "value": "b", "label": "Blue" }]`]]
</pre>
<p>
Example for input.combobox using an object:
</p>

<pre class="brush: php">
[[input.combobox? &amp;object=`[{"name": "sekftStates", "sortby": "state_name", "value": "state_abbr", "label": "state_name"}]`]]
</pre>
<h2 id="sekFormTools.input.combobox-Properties">
Properties
</h2>

<table>
<tbody>
<tr>
<th>
Name
</th>
<th>
Description
<br />
</th>
<th>
Default
<br />
</th>
<th>
Required
<br />
</th>
<th>
Version
<br />
</th>
</tr>

<tr>
<td>
input_id
</td>
<td>
The id to assign to the input box. While not required, it is best to give all fields an input id.
<br />
</td>
<td>
<br />
</td>
<td>
<br />
</td>
<td>
&gt;0.0.1
</td>
</tr>

<tr>
<td>
name
</td>
<td>
The name to assign to the input box.
<br />
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&gt;0.0.1
</td>
</tr>

<tr>
<td>
value
</td>
<td>
The value to assign to the input box.
<br />
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&gt;0.0.1
</td>
</tr>

<tr>
<td>
object
</td>
<td>
JSON array of options to return a combobox list.
<br />
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&gt;0.0.1
</td>
</tr>

<tr>
<td>
snippet
</td>
<td>
A snippet call to return a custom JSON list.
<br />
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&gt;0.0.1
</td>
</tr>

<tr>
<td>
value_list
</td>
<td>
Create a custom list for the combobox.
<br />
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&gt;0.0.1
</td>
</tr>

<tr>
<td>
filter
</td>
<td>
JSON array to filter the combo list.
<br />
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&gt;0.0.1
</td>
</tr>

<tr>
<td>
helper_snippet
</td>
<td>
Name of the snippet to call by ajax request to change option list.
<br />
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&gt;0.0.1
</td>
</tr>
</tbody>
</table>

<h3 id="sekFormTools.input.combobox-object">
object
</h3>

<p>
The object property has several parts to quickly define combo box options from a modx table.
</p>

<table>
<tbody>
<tr>
<th>
Name
</th>
<th>
Description
<br />
</th>
<th>
Default
<br />
</th>
<th>
Required
<br />
</th>
<th>
Version
<br />
</th>
</tr>

<tr>
<td>
name
</td>
<td>
The name of the modx table called by the object name.
<br />
</td>
<td>
<br />
</td>
<td>
Yes
</td>
<td>
&gt;0.0.1
</td>
</tr>

<tr>
<td>
sortby
</td>
<td>
The table field to sort by.
<br />
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&gt;0.0.1
</td>
</tr>

<tr>
<td>
groupby
<br />
</td>
<td>
Simply group values together ?(most likely to be used if the value and label fields are the same).
<br />
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&gt;0.0.4
<br />
</td>
</tr>

<tr>
<td>
value
</td>
<td>
The table field that will be used as the value for the option.
<br />
</td>
<td>
&nbsp;
</td>
<td>
Yes
</td>
<td>
&gt;0.0.1
</td>
</tr>

<tr>
<td>
label
</td>
<td>
The table field that will be used as the label for the option.
<br />
</td>
<td>
&nbsp;
</td>
<td>
Yes
</td>
<td>
&gt;0.0.1
</td>
</tr>
</tbody>
</table>

<h3 id="sekFormTools.input.combobox-filter">
filter
</h3>

<p>
The filter property has several parts to filter the data returned by the object property.
</p>

<table>
<tbody>
<tr>
<th>
Name
</th>
<th>
Description
<br />
</th>
<th>
Default
<br />
</th>
<th>
Required
<br />
</th>
<th>
Version
<br />
</th>
</tr>

<tr>
<td>
input_id
</td>
<td>
The id of an input field that will dynamically change the options list.
<br />
</td>
<td>
<br />
</td>
<td>
&nbsp;
</td>
<td>
&gt;0.0.1
</td>
</tr>

<tr>
<td>
name
</td>
<td>
The object name to base filter on.
<br />
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&gt;0.0.1
</td>
</tr>

<tr>
<td>
field
</td>
<td>
The field that will be used to filter the results.
<br />
</td>
<td>
&nbsp;
</td>
<td>
Yes
</td>
<td>
&gt;0.0.1
</td>
</tr>

<tr>
<td>
value
</td>
<td>
The value to filter on.
<br />
</td>
<td>
&nbsp;
</td>
<td>
<br />
</td>
<td>
&gt;0.0.1
</td>
</tr>
</tbody>
</table>

<h2 id="sekFormTools.input.combobox-Examples">
Examples
</h2>

<p>
Some additional examples
</p>

<h3 id="sekFormTools.input.combobox-ValueList">
Value List
</h3>

<p>
The simplest way to create a quick combo box.
</p>

<pre class="brush: php">
[[!input.combobox? &amp;value_list=`[
{ "value": "101", "label": "Regular" },
{ "value": "102", "label": "Chocolate" },
{ "value": "103", "label": "Blueberry" },
{ "value": "104", "label": "Devil's Food"}
]`]]
</pre>
<h3 id="sekFormTools.input.combobox-Object">
Object
</h3>

<p>
Grabbing data by a table object is simple and straight forward. Using a json string, enter the name of the object, the optional sort by, and the table fields to use in the combo box options label and value.
</p>

<pre class="brush: php">
[[!input.combobox?
      &amp;object=`{"name": "sekftUSCities", "sortby": "city_name", "value": "city_name", "label": "city_name"}`
    ]]
</pre>
<p>
You can even filter the data by using the filter option. Here we just want to grab all the cities with the state id of 62, which in this case is Kansas.
</p>

<pre class="brush: php">
[[!input.combobox?
      &amp;object=`{"name": "sekftUSCities", "sortby": "city_name", "value": "city_name", "label": "city_name"}`
      &amp;filter=`{"field": "state_id", "value": "62"}`
    ]]
</pre>
<p>
We can also filter the combo box using xpdo's powerful relational filters. Here we use the filter-&gt;name field to grab the states table. The field we filter on is the abbreviation, and the value we want to filter "KS". XPDO will then do the work by finding the relationship between the two tables ( the "id" of the states table and the "state_id" field of the city table ) and return the filtered list by state.
</p>

<pre class="brush: php">
[[!input.combobox?
      &amp;object=`{"name": "sekftUSCities", "sortby": "city_name", "value": "city_name", "label": "city_name"}`
      &amp;filter=`{"name": "sekftStates", "field": "state_abbr", "value": "KS"}`
    ]]
</pre>
<p>
The combo box can also be filter live using jquery. please view the <a href="/display/ADDON/sekFormTools+Advanced+Examples" title="sekFormTools Advanced Examples">Advanced Examples</a> for more information.
</p>

<h3 id="sekFormTools.input.combobox-Snippet">
Snippet
</h3>

<p>
If more advanced filters are needed, a custom snippet can be called to fill the combo box.
</p>

<pre class="brush: php">
[[!input.combobox? &amp;snippet=`xpdo`]]
</pre>
<p>
The snippet must must return a json array.
</p>

<pre class="brush: php">
$items = $modx-&gt;getCollection('sekftStates');
$itemListArray = array();
foreach ($items as $item) {
  $itemArray = $item-&gt;toArray();
  $itemList = array();
  $itemList['value'] = $itemArray['id'];
  $itemList['label'] = $itemArray['state_name'];
  $itemListArray[] = $itemList;
}
return $modx-&gt;toJSON($itemListArray);
</pre>
<p>
Similarly, a large list of values can be placed in an array within a snippet.
</p>

<pre class="brush: php">
[[!input.combobox? &amp;snippet=`array`]]
</pre>
<p>
The snippet must must return a json array.
</p>

<pre class="brush: php">
$itemListArray = array(
  array(
    'value' =&gt; '1',
    'label' =&gt; 'One'
  ),
  array(
    'value' =&gt; '2',
    'label' =&gt; 'Two'
  ),
  array(
    'value' =&gt; '3',
    'label' =&gt; 'Three'
  ),
  array(
    'value' =&gt; '4',
    'label' =&gt; 'Four'
  )
);
return $modx-&gt;toJSON($itemListArray);
</pre>