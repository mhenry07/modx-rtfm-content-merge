<h2>
<a name="sekFormTools.input.combobox-Whatisinput.combobox%3F"></a>What is input.combobox?
</h2>

<p>
Add a combobox to a form quickly and easily using this snippet.
</p>

<h2>
<a name="sekFormTools.input.combobox-Usage" id="sekFormTools.input.combobox-Usage"></a>Usage
</h2>

<p>
Example for input.combobox using a value list:
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
[[input.combobox? &amp;value_list=`[{ <span class="code-quote">"value"</span>: <span class="code-quote">"r"</span>, <span class="code-quote">"label"</span>: <span class="code-quote">"Red"</span> }, { <span class="code-quote">"value"</span>: <span class="code-quote">"b"</span>, <span class="code-quote">"label"</span>: <span class="code-quote">"Blue"</span> }]`]]
</pre>
</div>
</div>

<p>
Example for input.combobox using an object:
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
[[input.combobox? &amp;object=`[{<span class="code-quote">"name"</span>: <span class="code-quote">"sekftStates"</span>, <span class="code-quote">"sortby"</span>: <span class="code-quote">"state_name"</span>, <span class="code-quote">"value"</span>: <span class="code-quote">"state_abbr"</span>, <span class="code-quote">"label"</span>: <span class="code-quote">"state_name"</span>}]`]]
</pre>
</div>
</div>

<h2>
<a name="sekFormTools.input.combobox-Properties" id="sekFormTools.input.combobox-Properties"></a>Properties
</h2>

<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<th class='confluenceTh'>
Name
</th>
<th class='confluenceTh'>
Description
<br class="atl-forced-newline" />
</th>
<th class='confluenceTh'>
Default
<br class="atl-forced-newline" />
</th>
<th class='confluenceTh'>
Required
<br class="atl-forced-newline" />
</th>
<th class='confluenceTh'>
Version
<br class="atl-forced-newline" />
</th>
</tr>

<tr>
<td class='confluenceTd'>
input_id
</td>
<td class='confluenceTd'>
The id to assign to the input box. While not required, it is best to give all fields an input id.
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
&gt;0.0.1
</td>
</tr>

<tr>
<td class='confluenceTd'>
name
</td>
<td class='confluenceTd'>
The name to assign to the input box.
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
&gt;0.0.1
</td>
</tr>

<tr>
<td class='confluenceTd'>
value
</td>
<td class='confluenceTd'>
The value to assign to the input box.
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
&gt;0.0.1
</td>
</tr>

<tr>
<td class='confluenceTd'>
object
</td>
<td class='confluenceTd'>
JSON array of options to return a combobox list.
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
&gt;0.0.1
</td>
</tr>

<tr>
<td class='confluenceTd'>
snippet
</td>
<td class='confluenceTd'>
A snippet call to return a custom JSON list.
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
&gt;0.0.1
</td>
</tr>

<tr>
<td class='confluenceTd'>
value_list
</td>
<td class='confluenceTd'>
Create a custom list for the combobox.
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
&gt;0.0.1
</td>
</tr>

<tr>
<td class='confluenceTd'>
filter
</td>
<td class='confluenceTd'>
JSON array to filter the combo list.
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
&gt;0.0.1
</td>
</tr>

<tr>
<td class='confluenceTd'>
helper_snippet
</td>
<td class='confluenceTd'>
Name of the snippet to call by ajax request to change option list.
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
&gt;0.0.1
</td>
</tr>
</tbody>
</table>
</div>

<h3>
<a name="sekFormTools.input.combobox-object" id="sekFormTools.input.combobox-object"></a>object
</h3>

<p>
The object property has several parts to quickly define combo box options from a modx table.
</p>

<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<th class='confluenceTh'>
Name
</th>
<th class='confluenceTh'>
Description
<br class="atl-forced-newline" />
</th>
<th class='confluenceTh'>
Default
<br class="atl-forced-newline" />
</th>
<th class='confluenceTh'>
Required
<br class="atl-forced-newline" />
</th>
<th class='confluenceTh'>
Version
<br class="atl-forced-newline" />
</th>
</tr>

<tr>
<td class='confluenceTd'>
name
</td>
<td class='confluenceTd'>
The name of the modx table called by the object name.
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
Yes
</td>
<td class='confluenceTd'>
&gt;0.0.1
</td>
</tr>

<tr>
<td class='confluenceTd'>
sortby
</td>
<td class='confluenceTd'>
The table field to sort by.
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
&gt;0.0.1
</td>
</tr>

<tr>
<td class='confluenceTd'>
groupby
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
Simply group values together ?(most likely to be used if the value and label fields are the same).
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
&gt;0.0.4
<br class="atl-forced-newline" />
</td>
</tr>

<tr>
<td class='confluenceTd'>
value
</td>
<td class='confluenceTd'>
The table field that will be used as the value for the option.
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
Yes
</td>
<td class='confluenceTd'>
&gt;0.0.1
</td>
</tr>

<tr>
<td class='confluenceTd'>
label
</td>
<td class='confluenceTd'>
The table field that will be used as the label for the option.
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
Yes
</td>
<td class='confluenceTd'>
&gt;0.0.1
</td>
</tr>
</tbody>
</table>
</div>

<h3>
<a name="sekFormTools.input.combobox-filter" id="sekFormTools.input.combobox-filter"></a>filter
</h3>

<p>
The filter property has several parts to filter the data returned by the object property.
</p>

<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<th class='confluenceTh'>
Name
</th>
<th class='confluenceTh'>
Description
<br class="atl-forced-newline" />
</th>
<th class='confluenceTh'>
Default
<br class="atl-forced-newline" />
</th>
<th class='confluenceTh'>
Required
<br class="atl-forced-newline" />
</th>
<th class='confluenceTh'>
Version
<br class="atl-forced-newline" />
</th>
</tr>

<tr>
<td class='confluenceTd'>
input_id
</td>
<td class='confluenceTd'>
The id of an input field that will dynamically change the options list.
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
&gt;0.0.1
</td>
</tr>

<tr>
<td class='confluenceTd'>
name
</td>
<td class='confluenceTd'>
The object name to base filter on.
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
&gt;0.0.1
</td>
</tr>

<tr>
<td class='confluenceTd'>
field
</td>
<td class='confluenceTd'>
The field that will be used to filter the results.
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
Yes
</td>
<td class='confluenceTd'>
&gt;0.0.1
</td>
</tr>

<tr>
<td class='confluenceTd'>
value
</td>
<td class='confluenceTd'>
The value to filter on.
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
&nbsp;
</td>
<td class='confluenceTd'>
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
&gt;0.0.1
</td>
</tr>
</tbody>
</table>
</div>

<h2>
<a name="sekFormTools.input.combobox-Examples" id="sekFormTools.input.combobox-Examples"></a>Examples
</h2>

<p>
Some additional examples
</p>

<h3>
<a name="sekFormTools.input.combobox-ValueList" id="sekFormTools.input.combobox-ValueList"></a>Value List
</h3>

<p>
The simplest way to create a quick combo box.
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
[[!input.combobox? &amp;value_list=`[
{ <span class="code-quote">"value"</span>: <span class="code-quote">"101"</span>, <span class="code-quote">"label"</span>: <span class="code-quote">"Regular"</span> },
{ <span class="code-quote">"value"</span>: <span class="code-quote">"102"</span>, <span class="code-quote">"label"</span>: <span class="code-quote">"Chocolate"</span> },
{ <span class="code-quote">"value"</span>: <span class="code-quote">"103"</span>, <span class="code-quote">"label"</span>: <span class="code-quote">"Blueberry"</span> },
{ <span class="code-quote">"value"</span>: <span class="code-quote">"104"</span>, <span class="code-quote">"label"</span>: <span class="code-quote">"Devil's Food"</span>}
]`]]
</pre>
</div>
</div>

<h3>
<a name="sekFormTools.input.combobox-Object" id="sekFormTools.input.combobox-Object"></a>Object
</h3>

<p>
Grabbing data by a table object is simple and straight forward. Using a json string, enter the name of the object, the optional sort by, and the table fields to use in the combo box options label and value.
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
[[!input.combobox?
      &amp;object=`{<span class="code-quote">"name"</span>: <span class="code-quote">"sekftUSCities"</span>, <span class="code-quote">"sortby"</span>: <span class="code-quote">"city_name"</span>, <span class="code-quote">"value"</span>: <span class="code-quote">"city_name"</span>, <span class="code-quote">"label"</span>: <span class="code-quote">"city_name"</span>}`
    ]]
</pre>
</div>
</div>

<p>
You can even filter the data by using the filter option. Here we just want to grab all the cities with the state id of 62, which in this case is Kansas.
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
[[!input.combobox?
      &amp;object=`{<span class="code-quote">"name"</span>: <span class="code-quote">"sekftUSCities"</span>, <span class="code-quote">"sortby"</span>: <span class="code-quote">"city_name"</span>, <span class="code-quote">"value"</span>: <span class="code-quote">"city_name"</span>, <span class="code-quote">"label"</span>: <span class="code-quote">"city_name"</span>}`
      &amp;filter=`{<span class="code-quote">"field"</span>: <span class="code-quote">"state_id"</span>, <span class="code-quote">"value"</span>: <span class="code-quote">"62"</span>}`
    ]]
</pre>
</div>
</div>

<p>
We can also filter the combo box using xpdo's powerful relational filters. Here we use the filter-&gt;name field to grab the states table. The field we filter on is the abbreviation, and the value we want to filter "KS". XPDO will then do the work by finding the relationship between the two tables ( the "id" of the states table and the "state_id" field of the city table ) and return the filtered list by state.
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
[[!input.combobox?
      &amp;object=`{<span class="code-quote">"name"</span>: <span class="code-quote">"sekftUSCities"</span>, <span class="code-quote">"sortby"</span>: <span class="code-quote">"city_name"</span>, <span class="code-quote">"value"</span>: <span class="code-quote">"city_name"</span>, <span class="code-quote">"label"</span>: <span class="code-quote">"city_name"</span>}`
      &amp;filter=`{<span class="code-quote">"name"</span>: <span class="code-quote">"sekftStates"</span>, <span class="code-quote">"field"</span>: <span class="code-quote">"state_abbr"</span>, <span class="code-quote">"value"</span>: <span class="code-quote">"KS"</span>}`
    ]]
</pre>
</div>
</div>

<p>
The combo box can also be filter live using jquery. please view the <a href="/display/ADDON/sekFormTools+Advanced+Examples" title="sekFormTools Advanced Examples">Advanced Examples</a> for more information.
</p>

<h3>
<a name="sekFormTools.input.combobox-Snippet" id="sekFormTools.input.combobox-Snippet"></a>Snippet
</h3>

<p>
If more advanced filters are needed, a custom snippet can be called to fill the combo box.
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
[[!input.combobox? &amp;snippet=`xpdo`]]
</pre>
</div>
</div>

<p>
The snippet must must return a json array.
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
$items = $modx-&gt;getCollection('sekftStates');
$itemListArray = array();
foreach ($items as $item) {
  $itemArray = $item-&gt;toArray();
  $itemList = array();
  $itemList['value'] = $itemArray['id'];
  $itemList['label'] = $itemArray['state_name'];
  $itemListArray[] = $itemList;
}
<span class="code-keyword">return</span> $modx-&gt;toJSON($itemListArray);
</pre>
</div>
</div>

<p>
Similarly, a large list of values can be placed in an array within a snippet.
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
[[!input.combobox? &amp;snippet=`array`]]
</pre>
</div>
</div>

<p>
The snippet must must return a json array.
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
$itemListArray = array(
  array(
    'value' =&gt; '1',
    'label' =&gt; 'One'
  ),
  array(
    'value' =&gt; '2',
    'label' =&gt; 'Two'
  ),
  array(
    'value' =&gt; '3',
    'label' =&gt; 'Three'
  ),
  array(
    'value' =&gt; '4',
    'label' =&gt; 'Four'
  )
);
<span class="code-keyword">return</span> $modx-&gt;toJSON($itemListArray);
</pre>
</div>
</div>