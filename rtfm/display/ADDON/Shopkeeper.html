<p>
Shopping cart and order management for MODX Revolution.
</p>

<div>
<ul>
<li>
<a href="extras/revo/shopkeeper#Shopkeeper-Installation">Installation</a>
</li>

<li>
<a href="extras/revo/shopkeeper#Shopkeeper-Settings">Settings</a>
</li>

<li>
<a href="extras/revo/shopkeeper#Shopkeeper-Additionaloptionsproducts">Additional options products</a>
</li>

<li>
<a href="extras/revo/shopkeeper#Shopkeeper-Sendingletterstothebuyerwhenyouchangetheorderstatus">Sending letters to the buyer when you change the order status</a>
</li>

<li>
<a href="extras/revo/shopkeeper#Shopkeeper-Eventsforplugins">Events for plugins</a>
</li>

<li>
<a href="extras/revo/shopkeeper#Shopkeeper-JScallbackfunctions">JS-callback functions</a>
</li>
</ul>
</div>

<h2>
<a name="Shopkeeper-Installation" id="Shopkeeper-Installation"></a>Installation
</h2>

<ol>
<li>Download and install
<ul>
<li>You can download the extra in manager. To do this, go to "System" -&gt; "Package Management". Press the button "Download extras". Then go "Extras" -&gt; "E-commerce" and the line "Shopkeeper" click "Download", then "Finish" button.
</li>

<li>If you downloaded the file from modx.com (<a href="http://modx.com/extras/package/shopkeeper2" class="external-link" rel="nofollow">http://modx.com/extras/package/shopkeeper2</a>), load file "shopkeeper-2.0-*.transport.zip" in folder /core/packages/ of your site. In manager go to "System" -&gt; "Package Management" -&gt; "Search Locally for Packages" -&gt; "Download extras" -&gt; "Yes".
</li>
</ul>
</li>

<li>The table package will package "shopkeeper". Click "Install" button.
</li>

<li>Complete the installation.
</li>
</ol>

<h2>
<a name="Shopkeeper-Settings" id="Shopkeeper-Settings"></a>Settings
</h2>

<ol>
<li>Open "Elements" -&gt; "Snippets" -&gt; "Shopkeeper" -&gt; "Properties".
</li>

<li>Press button "Add Property Set", mark checkbox "Create New Property Set" and fill fields.
</li>

<li>In the list on the left to select a set of established and if necessary, change the settings.
</li>

<li>In the template in a place where you want to display a shopping cart, call Shopkeeper snippet with name of Property Set.
<br />
Example:
</li>
</ol>

<pre class="brush: php">
    [[+tv.param1]]

    
</pre>
<p>
On the product page to change the ID parameter. You can do this by using a filter "replace":
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
[[*param1:replace=`[[+id]]==[[*id]]`]]
</pre>
</div>
</div>

<h2>
<a name="Shopkeeper-Sendingletterstothebuyerwhenyouchangetheorderstatus" id="Shopkeeper-Sendingletterstothebuyerwhenyouchangetheorderstatus"></a>Sending letters to the buyer when you change the order status
</h2>

<p>
If you want when to change the order status the buyer sends an e-mail, in the module configuration (basic settings) need to create a parameter with a key "shk.mailstatus_1", where 1 - number status of zero.
<br />
The value parameter to specify the name of the chunk letter template, example "@FILE mailChangeStatus.tpl". Namespace - "shopkeeper".
</p>

<h2>
<a name="Shopkeeper-Eventsforplugins" id="Shopkeeper-Eventsforplugins"></a>Events for plugins
</h2>

<p>
<b>OnSHKaddProduct</b> - Adding Item to cart. $purchaseArray
<br />
<b>OnSHKgetProductPrice</b> - Call for Price product when you add to cart. $purchaseArray
<br />
<b>OnSHKcalcTotalPrice</b> - Calculating the total price of the products in your cart. $price_total, $purchases
<br />
<b>OnSHKbeforeCartLoad</b> - Called before the formation of HTML-code cart.
<br />
<b>OnSHKcartLoad</b> - The output cart. $items_total, $price_total
<br />
<b>OnSHKChangeStatus</b> - Change the order status. Available: $order_id, $status.
<br />
<b>OnSHKsaveOrder</b> - Sending an order. $order_id
</p>

<h2>
<a name="Shopkeeper-JScallbackfunctions" id="Shopkeeper-JScallbackfunctions"></a>JS-callback functions
</h2>

<p>
<b>SHKfillCartCallback(form)</b> - given command to add product to cart;
<br />
<b>SHKemptyCartCallback()</b> - given the command to empty the cart;
<br />
<b>SHKloadCartCallback()</b> - Cart is loaded / updated;
<br />
<b>SHKtoCartCallback(form)</b> - given the command to send product to cart.
<br />
&nbsp;
<br />
Simply create a function with these names and they will be called when a certain action.
</p>