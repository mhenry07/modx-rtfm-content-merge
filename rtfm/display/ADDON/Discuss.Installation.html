<div>
<ul>
<li>
<a href="extras/revo/discuss/discuss.installation#Discuss.Installation-InstallingDiscuss">Installing Discuss</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href="extras/revo/discuss/discuss.installation#Discuss.Installation-SettingupthenecessaryResources">Setting up the necessary Resources</a>
</li>

<li>
<a href="extras/revo/discuss/discuss.installation#Discuss.Installation-SettingupFriendlyURLs%26Discussspecificrewriterules">Setting up Friendly URLs &amp; Discuss specific rewrite rules</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href="extras/revo/discuss/discuss.installation#Discuss.Installation-For.htaccess%28Apache%2Cmodrewriteenabled%29">For .htaccess (Apache, mod_rewrite enabled)</a>
</li>

<li>
<a href="extras/revo/discuss/discuss.installation#Discuss.Installation-Fornginx">For nginx</a>
</li>
</ul>
</li>

<li>
<a href="extras/revo/discuss/discuss.installation#Discuss.Installation-ConfigureDiscusstomatchyourenvironment.">Configure Discuss to match your environment.</a>
</li>
</ul>
</li>

<li>
<a href="extras/revo/discuss/discuss.installation#Discuss.Installation-SettingupLogin%2CRegister%26UpdateProfilepageswithDiscuss">Setting up Login, Register &amp; Update Profile pages with Discuss</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href="extras/revo/discuss/discuss.installation#Discuss.Installation-SettingUpLogin">Setting Up Login</a>
</li>

<li>
<a href="extras/revo/discuss/discuss.installation#Discuss.Installation-SettingUpRegister">Setting Up Register</a>
</li>

<li>
<a href="extras/revo/discuss/discuss.installation#Discuss.Installation-SettingUpUpdateProfile">Setting Up UpdateProfile</a>
</li>
</ul>
</li>

<li>
<a href="extras/revo/discuss/discuss.installation#Discuss.Installation-SeeAlso">See Also</a>
</li>
</ul>
</div>

<h2>
<a name="Discuss.Installation-InstallingDiscuss" id="Discuss.Installation-InstallingDiscuss"></a>Installing Discuss
</h2>

<p>
Installing Discuss is pretty simple using the MODX Package Manager. Just download the discuss package and <a href="display/revolution20/Installing+a+Package" title="Installing a Package">run the installer</a> as you would for any other package.&nbsp;While you're in the package manager, you will also need to download and install the following Extras&nbsp;which are required for Discuss to work properly:
</p>

<ul>
<li>Login
</li>

<li>FormIt
</li>
</ul>

<p>
During the installation, you are given the option to install demo data, if this is the first time you are installing Discuss, make sure to enable this so you have some working data to see once you've installed everything!&nbsp;
</p>

<p>
Once you installed Discuss using the Package Manager, there are a few steps and configuration you need to go through in order to set up a working forum solution. These are:
</p>

<ol>
<li>Create the&nbsp;necessary&nbsp;Resources
</li>

<li>Set up Friendly Urls and Discuss-specific rewrite rules
</li>

<li>Configure Discuss to match your environment.
</li>
</ol>

<p>
We will go through all of these steps below.
</p>

<h3>
<a name="Discuss.Installation-SettingupthenecessaryResources" id="Discuss.Installation-SettingupthenecessaryResources"></a>Setting up the necessary Resources
</h3>

<p>
Discuss uses only one resource to show many different views, so you will need to create this one when you first set up your forum.
</p>

<p>
Simple create a new resource with the following attributes:
</p>

<ul>
<li>Pagetitle: Forums
</li>

<li>Template: empty
</li>

<li>Alias: forums
</li>

<li>Content:&nbsp;[[!Discuss]]
</li>

<li>Container (on the Settings tab): Yes
</li>
</ul>

<p>
You can change the alias to suit something else if you want, but keep in mind that you will need to adjust the custom rewrite rules as shown in the next step to match your alias.
</p>

<p>
While Discuss includes login and sign up functionality (using the Login package), you will most likely want to use specific or already existent login and registration pages for your forum. This is accomplished using the so called SSO mode (we'll discuss this later), and it requires you to set up separate resources for login, registration and update profile resources. Please create those now.
</p>

<p>
You can build these as you normally would (<a href="display/ADDON/Login" title="Login">see the Login documentation</a> for more information on them) and there are no requirements on how they look or are build. There is one important thing to include in your login, register and update profile pages, which is pre and posthooks specific to Discuss:&nbsp;
</p>

<pre class="brush: php">
    # If imported from SMF, you can include the following lines to make sure existing urls don't break.
RewriteRule ^forums/index.php/topic,(.*).msg(.*).html$ forums/?action=thread&amp;thread=$1&amp;i=1
RewriteRule ^forums/index.php/topic,(.*).(.*).html$ forums/?action=thread&amp;thread=$1&amp;i=1&amp;start=$2
RewriteRule ^forums/\?topic=(.+).(.+)$ forums/?action=thread&amp;thread=$1&amp;i=1
RewriteRule ^forums/index.php/board,(.*).(.*).html$ forums/?action=board&amp;board=$1&amp;i=1&amp;start=$2
RewriteRule ^forums/\?board=(.+).(.+)$ forums/?action=board&amp;board=$1&amp;i=1


# Discuss rewrite rules
RewriteRule ^forums/thread/([0-9]+)/(.*)$ forums/?action=thread&amp;thread=$1 [L,QSA]
RewriteRule ^forums/u/(.+)$ forums/?action=user&amp;user=$1 [L,QSA]
RewriteRule ^forums/board/([0-9]+)/(.*)$ forums/?action=board&amp;board=$1 [L,QSA]
RewriteRule ^forums/category/([0-9]+)/(.*)$ forums/?category=$1 [L,QSA]
RewriteRule ^forums/(.+)$ forums/?action=$1 [L,QSA]
RewriteRule ^forums/(.+)/$ forums/?action=$1 [L,QSA]

    
</pre>
<p>
Remember, change "forums" if your alias is different.&nbsp;
</p>

<h4>
<a name="Discuss.Installation-Fornginx" id="Discuss.Installation-Fornginx"></a>For nginx
</h4>

<p>
Suggested set of rules (called before your main rewrite for MODX):
</p>

<pre class="brush: php">
     # SMF rules
rewrite ^/forums/index.php/topic,(.*).msg(.*).html$ /forums/?action=thread&amp;thread=$1&amp;i=1 last;
rewrite ^/forums/index.php/topic,(.*).(.*).html$ /forums/?action=thread&amp;thread=$1&amp;i=1&amp;start=$2 last;

rewrite ^/forums/index.php\?topic=(.*).(.*)$ /forums/?action=thread&amp;thread=$1&amp;i=1 last;
if ($args ~* topic=(.*).(.*)){
  set $args action=thread&amp;thread=$1&amp;i=1;
}
rewrite ^/forums/\?topic=(.*).(.*)$ /forums/?action=thread&amp;thread=$1&amp;i=1 last;

rewrite ^/forums/index.php/board,(.*).(.*).html$ /forums/?action=board&amp;board=$1&amp;i=1&amp;start=$2 last;
rewrite ^/forums/\?board=(.*).(.*)$ /forums/?action=board&amp;board=$1&amp;i=1 last;
rewrite ^/forums/thread/([0-9]+)/(.*)$ /forums/?action=thread&amp;thread=$1 last;
rewrite ^/forums/thread/([0-9]+)/(.*)$ /forums/?action=thread&amp;thread=$1 last;

rewrite ^/forums/u/(.+)$ /forums/?action=user&amp;user=$1 last;
rewrite ^/forums/board/([0-9]+)/(.*)$ /forums/?action=board&amp;board=$1 last;
rewrite ^/forums/board\.xml/([0-9]+)/(.*)$ /forums/?action=board.xml&amp;board=$1 last;
rewrite ^/forums/category/([0-9]+)/(.*)$ /forums/?category=$1 last;

rewrite ^/forums/index.php?action=unread$ /forums/thread/unread last;
if ($args ~* action=unread){
  set $args action=thread/unread;
}

# Discuss main FURL
if (!-e $request_filename){
  rewrite ^/forums/(.*)$ /forums/?action=$1 last;
}

    
</pre>
<h3>
<a name="Discuss.Installation-ConfigureDiscusstomatchyourenvironment." id="Discuss.Installation-ConfigureDiscusstomatchyourenvironment."></a>Configure Discuss to match your environment.
</h3>

<p>
Now that friendly urls are working, we're ready to configure Discuss. As most of this configuration is done in System settings, open that through System &gt; System settings and choose the "discuss" namespace to see Discuss specific configuration.
</p>

<ul>
<li>
<b>discuss.forums_resource_id</b>&nbsp;- Point this to the ID of the Resource your Discuss forum resides in.
</li>

<li>
<b>discuss.login_resource_id</b>&nbsp;- Point this to the ID of the Resource your&nbsp;<a href="display/ADDON/Login" title="Login">Login</a>&nbsp;call resides in.
</li>

<li>
<b>discuss.register_resource_id</b>&nbsp;- Point this to the ID of the Resource your&nbsp;<a href="display/ADDON/Login.Register" title="Login.Register">Register</a>&nbsp;call resides in.
</li>

<li>
<b>discuss.update_profile_resource_id</b>&nbsp;- Point this to the ID of the Resource your&nbsp;<a href="display/ADDON/Login.UpdateProfile" title="Login.UpdateProfile">UpdateProfile</a>&nbsp;call resides in.
</li>

<li>Set <b>discuss.sso_mode</b>&nbsp;to yes. This will make Discuss let your own login, register and update_profile pages instead of the ones built in.&nbsp;
</li>
</ul>

<p>
Some other nice configuration options to change or to keep in mind:
</p>

<ul>
<li>When you are going to build a custom theme, enable the <b>discuss.debug_templates</b> setting to automatically add HTML comments on what chunks are being used to build the output.
</li>

<li>The <b>discuss.theme</b> setting is used to load the proper templates and assets. For now, default should do, but change this when you want to use a different theme. Just give it the name of the theme dir in the "themes" directory of Discuss.
</li>

<li>Set <b>discuss.forum_title</b> to the name of your forum.
</li>

<li>By default (if the theme uses it, that is) Discuss uses a simple text search engine, but you can enable Solr search by setting <b>discuss.search_class</b>&nbsp;to disSolrSearch and filling out the relevant solr setting.&nbsp;
</li>
</ul>

<h2>
<a name="Discuss.Installation-SettingupLogin%2CRegister%26UpdateProfilepageswithDiscuss"></a>Setting up Login, Register &amp; Update Profile pages with Discuss
</h2>

<p>
While this bit of installation is technically not a part of Discuss, here's some instructions on setting up your login, register and update profile pages when using SSO mode.
</p>

<h3>
<a name="Discuss.Installation-SettingUpLogin" id="Discuss.Installation-SettingUpLogin"></a>Setting Up Login
</h3>

<p>
Make sure in your <a href="display/ADDON/Login" title="Login">Login</a> call that you specify the following as pre and post hooks:
</p>

<pre class="brush: php">
    &amp;usergroups=`Forum Members:Member`

    
</pre>
<p>
In your <a href="display/ADDON/Login.Register" title="Login.Register">Register</a> call.
</p>

<h3>
<a name="Discuss.Installation-SettingUpUpdateProfile" id="Discuss.Installation-SettingUpUpdateProfile"></a>Setting Up UpdateProfile
</h3>

<p>
A few things need to happen with UpdateProfile.
</p>

<p>
One, make sure you add the following post-hook to your UpdateProfile call:
</p>

<pre class="brush: php">
    [[!DiscussUpdateProfileLoader]]

    
</pre>
<p>
Finally, there are some extra form fields you can add to allow users to modify their Discuss profile:
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;label <span class="code-keyword">for</span>=<span class="code-quote">"signature"</span>&gt;Signature &lt;span class=<span class="code-quote">"error"</span>&gt;[[!+up.error.signature:stripTags=`p,b,strong,i,a,ul,li`]]&lt;/span&gt;&lt;/label&gt;
&lt;textarea name=<span class="code-quote">"signature:allowTags"</span> id=<span class="code-quote">"signature"</span>&gt;[[!+up.signature]]&lt;/textarea&gt;

&lt;label <span class="code-keyword">for</span>=<span class="code-quote">"use_display_name"</span>&gt;Use Display Name in Forums &lt;span class=<span class="code-quote">"error"</span>&gt;[[!+up.error.use_display_name]]&lt;/span&gt;&lt;/label&gt;
&lt;input type=<span class="code-quote">"hidden"</span> name=<span class="code-quote">"use_display_name"</span> id=<span class="code-quote">"use_display_name_hidden"</span> value=<span class="code-quote">"0"</span> /&gt;
&lt;input type=<span class="code-quote">"checkbox"</span> name=<span class="code-quote">"use_display_name"</span> id=<span class="code-quote">"use_display_name"</span> value=<span class="code-quote">"1"</span> [[!+up.use_display_name:FormItIsChecked=`1`]] /&gt;

&lt;label <span class="code-keyword">for</span>=<span class="code-quote">"display_name"</span>&gt;Display Name &lt;span class=<span class="code-quote">"error"</span>&gt;[[!+up.error.display_name]]&lt;/span&gt;&lt;/label&gt;
&lt;input type=<span class="code-quote">"text"</span> name=<span class="code-quote">"display_name"</span> id=<span class="code-quote">"display_name"</span> value=<span class="code-quote">"[[+up.display_name]]"</span> /&gt;

&lt;label <span class="code-keyword">for</span>=<span class="code-quote">"show_online"</span>&gt;Show Online Status &lt;span class=<span class="code-quote">"error"</span>&gt;[[!+up.error.show_online]]&lt;/span&gt; &lt;/label&gt;
&lt;input type=<span class="code-quote">"hidden"</span> name=<span class="code-quote">"show_online"</span> id=<span class="code-quote">"show_online_hidden"</span> value=<span class="code-quote">"0"</span> /&gt;
&lt;input type=<span class="code-quote">"checkbox"</span> name=<span class="code-quote">"show_online"</span> id=<span class="code-quote">"show_online"</span> value=<span class="code-quote">"1"</span> [[!+up.show_online:FormItIsChecked=`1`]] /&gt;

&lt;label <span class="code-keyword">for</span>=<span class="code-quote">"show_email"</span>&gt;Show Email in Forums &lt;span class=<span class="code-quote">"error"</span>&gt;[[!+up.error.show_email]]&lt;/span&gt;&lt;/label&gt;
&lt;input type=<span class="code-quote">"hidden"</span> name=<span class="code-quote">"show_email"</span> id=<span class="code-quote">"show_email_hidden"</span> value=<span class="code-quote">"0"</span> /&gt;
&lt;input type=<span class="code-quote">"checkbox"</span> name=<span class="code-quote">"show_email"</span> id=<span class="code-quote">"show_email"</span> value=<span class="code-quote">"1"</span> [[!+up.show_email:FormItIsChecked=`1`]] /&gt;
</pre>
</div>
</div>

<p>
The prior fields will allow your users to toggle those values in their profile.
</p>

<h2>
<a name="Discuss.Installation-SeeAlso" id="Discuss.Installation-SeeAlso"></a>See Also
</h2>

<ol class="ug-toc">
<li>
<a href="/extras/revo/discuss/discuss.installation/discuss.installation-from-git">Discuss.Installation from Git</a>
</li>
</ol>