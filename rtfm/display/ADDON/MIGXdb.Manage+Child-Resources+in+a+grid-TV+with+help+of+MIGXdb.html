<div>
<ul>
<li>
<a href="extras/revo/migxdb/migxdb.tutorials/migxdb.manage-child-resources-in-a-grid-tv-with-help-of-migxdb#MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-ManageChildResourcesinagridTVwithhelpofMIGXdb">Manage Child-Resources in a grid-TV with help of MIGXdb</a>
</li>

<li>
<a href="extras/revo/migxdb/migxdb.tutorials/migxdb.manage-child-resources-in-a-grid-tv-with-help-of-migxdb#MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-Requirements">Requirements</a>
</li>

<li>
<a href="extras/revo/migxdb/migxdb.tutorials/migxdb.manage-child-resources-in-a-grid-tv-with-help-of-migxdb#MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-CreatetheConfiguration">Create the Configuration</a>
</li>

<li>
<a href="extras/revo/migxdb/migxdb.tutorials/migxdb.manage-child-resources-in-a-grid-tv-with-help-of-migxdb#MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-SettheTemplateforourchildren.">Set the Template for our children.</a>
</li>

<li>
<a href="extras/revo/migxdb/migxdb.tutorials/migxdb.manage-child-resources-in-a-grid-tv-with-help-of-migxdb#MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-CreatetheMIGXdbTV">Create the MIGXdb - TV</a>
</li>

<li>
<a href="extras/revo/migxdb/migxdb.tutorials/migxdb.manage-child-resources-in-a-grid-tv-with-help-of-migxdb#MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-CreatingandEditingchildResources.">Creating and Editing child-Resources.</a>
</li>

<li>
<a href="extras/revo/migxdb/migxdb.tutorials/migxdb.manage-child-resources-in-a-grid-tv-with-help-of-migxdb#MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-AddingsomeTVstoourform">Adding some TVs to our form</a>
<ul>
<li>
<a href="extras/revo/migxdb/migxdb.tutorials/migxdb.manage-child-resources-in-a-grid-tv-with-help-of-migxdb#MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-TheMIGXTVforsomeimages">The MIGX-TV for some images</a>
</li>

<li>
<a href="extras/revo/migxdb/migxdb.tutorials/migxdb.manage-child-resources-in-a-grid-tv-with-help-of-migxdb#MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-TextTVforaPricefield">Text-TV for a Price-field</a>
</li>

<li>
<a href="extras/revo/migxdb/migxdb.tutorials/migxdb.manage-child-resources-in-a-grid-tv-with-help-of-migxdb#MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-MultiselectTVforchoosingoneormoreCategoriesforourchildresource">Multiselect-TV for choosing one or more Categories for our child-resource</a>
</li>

<li>
<a href="extras/revo/migxdb/migxdb.tutorials/migxdb.manage-child-resources-in-a-grid-tv-with-help-of-migxdb#MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-AddingtheTVstoourForm">Adding the TVs to our Form</a>
</li>

<li>
<a href="extras/revo/migxdb/migxdb.tutorials/migxdb.manage-child-resources-in-a-grid-tv-with-help-of-migxdb#MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-RegistertheTVsforourprocessors%28getlist%2Cfields%29">Register the TVs for our processors (getlist,fields)</a>
</li>
</ul>
</li>

<li>
<a href="extras/revo/migxdb/migxdb.tutorials/migxdb.manage-child-resources-in-a-grid-tv-with-help-of-migxdb#MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-Addasortablepricecolumntothegrid">Add a sortable price-column to the grid</a>
</li>

<li>
<a href="extras/revo/migxdb/migxdb.tutorials/migxdb.manage-child-resources-in-a-grid-tv-with-help-of-migxdb#MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-AddingFilters">Adding Filters</a>
<ul>
<li>
<a href="extras/revo/migxdb/migxdb.tutorials/migxdb.manage-child-resources-in-a-grid-tv-with-help-of-migxdb#MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-TextboxFilterforsearchinginsomefields">Textbox Filter for searching in some fields</a>
</li>

<li>
<a href="extras/revo/migxdb/migxdb.tutorials/migxdb.manage-child-resources-in-a-grid-tv-with-help-of-migxdb#MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-DropdownFilterforfilteringbycategories">Dropdown Filter for filtering by categories</a>
</li>
</ul>
</li>

<li>
<a href="extras/revo/migxdb/migxdb.tutorials/migxdb.manage-child-resources-in-a-grid-tv-with-help-of-migxdb#MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-Hidingchildrenfromtree">Hiding children from tree</a>
</li>
</ul>
</div>

<h2 id="MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-ManageChildResourcesinagridTVwithhelpofMIGXdb">
Manage Child-Resources in a grid-TV with help of MIGXdb
</h2>

<p>
Often we have the problem with lots of Resources in the Resource-Tree to be very confused at some point and we wish, we would have a better way to manage them in a paginated grid view.
</p>

<p>
In this Tuorial we will learn how to create a TV which shows a grid of child-resources,
<br />
where you can add, delete, remove, edit, publish, unpublish, filter, bulk-update child-resources of the currently edited Resource (parent-folder)
</p>

<p>
First we will create a basic Configuration where we can just add new Child-Resources and edit the pagetitle, longtitle and Content-field of our Children.
<br />
Later we want to add one or more TVs, which we want to have editable and we want to add some filters, where we can filter our children.
</p>

<h2 id="MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-Requirements">
Requirements
</h2>

<p>
First off we will need to install <a href="extras/revo/migx" title="MIGX">MIGX</a> by package-management, if not allready done, and do some <a href="extras/revo/migxdb/migxdb.configuration" title="MIGXdb.Configuration">basic configurations</a>.
<br />
Minimum Required version: MIGX 2.2.3 (31.07.2012)
</p>

<h2 id="MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-CreatetheConfiguration">
Create the Configuration
</h2>

<p>
Now we want to create our configuration for the MIGXdb-TV.
</p>

<p>
Go to the main-tab 'MIGX'
</p>

<p>
There should be an grid with some buttons.
</p>

<p>
We click 'Add item'
</p>

<p>
In the opening window we add:
</p>

<p>
Name: childstutorial - this is the name of our configuration. Make sure to use unique configuration-names.
<br />
"Add Item" Replacement: Add Child - this is the text on our 'Add Item' - Button
<br />
unique MIGX ID: childstutorial - Its a good idea to have a unique MIGX - id for all your MIGX-configs.
</p>

<p>
Click 'Done'
</p>

<p>
We should see a new created record in our grid.
<br />
We could edit this record and add grid-columns and tabs and other stuff by right-clicking and choose 'edit', but we want to go the quick way by just importing our example-configuration.
</p>

<p>
Right-Click our record and choose 'Export/Import'
</p>

<p>
Add this code into the one field 'Json' :
</p>

<table class="sectionMacro" border="0" cellpadding="5" cellspacing="0" width="100%">
<tbody>
<tr>
<td>
</td>
</tr>
</tbody>
</table>

<pre class="brush: php">
{"formtabs":"[{\"MIGX_id\":\"1\",\"caption\":\"Resource\",\"fields\":\"[{\\\"MIGX_id\\\":\\\"1\\\",\\\"field\\\":\\\"pagetitle\\\",\\\"caption\\\":\\\"Pagetitle\\\",\\\"inputTV\\\":\\\"\\\",\\\"inputTVtype\\\":\\\"\\\",\\\"configs\\\":\\\"\\\",\\\"sourceFrom\\\":\\\"config\\\",\\\"sources\\\":\\\"\\\",\\\"inputOptionValues\\\":\\\"\\\",\\\"default\\\":\\\"\\\"},{\\\"MIGX_id\\\":\\\"2\\\",\\\"field\\\":\\\"template\\\",\\\"caption\\\":\\\"\\\",\\\"inputTV\\\":\\\"\\\",\\\"inputTVtype\\\":\\\"hidden\\\",\\\"configs\\\":\\\"\\\",\\\"sourceFrom\\\":\\\"config\\\",\\\"sources\\\":\\\"\\\",\\\"inputOptionValues\\\":\\\"\\\",\\\"default\\\":\\\"2\\\"}]\"},{\"MIGX_id\":\"2\",\"caption\":\"Content\",\"fields\":[{\"MIGX_id\":\"1\",\"field\":\"content\",\"caption\":\"Content\",\"inputTV\":\"\",\"inputTVtype\":\"richtext\",\"configs\":\"\",\"sourceFrom\":\"config\",\"sources\":\"\",\"inputOptionValues\":\"\",\"default\":\"\"}]}]","contextmenus":"recall_remove_delete","actionbuttons":"addItem||bulk||toggletrash","columnbuttons":"update||publish||unpublish","filters":"","extended":{"migx_add":"Add Childresource","formcaption":"Child Resource","win_id":"childstutorial","packageName":"","classname":"modResource","task":"childresources","getlistsort":"","getlistsortdir":"","use_custom_prefix":"0","prefix":"","grid":"","gridload_mode":"1","check_resid":"1","check_resid_TV":"","join_alias":"","getlistwhere":"","joins":"","cmpmaincaption":"","cmptabcaption":"","cmptabdescription":"","cmptabcontroller":""},"columns":"[{\"MIGX_id\":\"1\",\"header\":\"ID\",\"dataIndex\":\"id\",\"width\":\"10\",\"renderer\":\"\",\"sortable\":\"true\",\"show_in_grid\":\"1\"},{\"MIGX_id\":\"2\",\"header\":\"Pagetitle\",\"dataIndex\":\"pagetitle\",\"width\":\"30\",\"renderer\":\"this.renderRowActions\",\"sortable\":\"true\",\"show_in_grid\":\"1\"},{\"MIGX_id\":\"3\",\"header\":\"Published\",\"dataIndex\":\"published\",\"width\":\"10\",\"renderer\":\"this.renderCrossTick\",\"sortable\":\"false\",\"show_in_grid\":\"1\"},{\"MIGX_id\":\"4\",\"header\":\"\",\"dataIndex\":\"deleted\",\"width\":\"\",\"renderer\":\"\",\"sortable\":\"false\",\"show_in_grid\":\"0\"}]"}
</pre>
<p>
click 'done'
</p>

<p>
you can check what it has done by right-clicking the record and choose 'edit' and go thrue the tabs and its nested grids.
</p>

<h2 id="MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-SettheTemplateforourchildren.">
Set the Template for our children.
</h2>

<p>
We want all our children have a given template. So we need to set the template-value somehow.
<br />
This can be done by a hidden-field in our form.
<br />
To do so:
<br />
1. right-click our childstutorial - record in the MIGX-configurator-grid and click 'Edit'
<br />
2. open the tab 'formtabs'
<br />
3. right-click on 'Resources' and click 'Edit'
<br />
4. right-click on 'template' and click 'Edit'
<br />
5. open the tab 'Input Options' and change the Default-Value to the template-ID, which our child-resources should have.
<br />
6. click done, done, done on all three windows to save the changes we made.
</p>

<h2 id="MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-CreatetheMIGXdbTV">
Create the MIGXdb - TV
</h2>

<p>
now we create our MIGXdb - TV.
<br />
Create a new TV.
<br />
Name: childstutorial
</p>

<p>
Go to the tab: 'Input Options'
<br />
Under 'Configurations' add: 'childstutorial'
</p>

<p>
This says MIGX to search for configurations with name 'childstutorial' This can be configuration-records as we have done above or php-files as it is done for the MIGX-configs-CMP.
<br />
The MIGX-config-CMP is nothing else as a MIGXdb-CMP itself.
</p>

<p>
Add this TV to our parent-Resource-template.
</p>

<p>
click 'Save' to save the new created TV.
</p>

<h2 id="MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-CreatingandEditingchildResources.">
Creating and Editing child-Resources.
</h2>

<p>
Create a parent-Resource in the resource-tree with your parent-resource-template.
<br />
Go to the TV-tab.
<br />
By clicking 'Load grid' this should load our db-grid where we can add,edit,delete child-resources of our parent-Resource.
</p>

<p>
Now we have created a very basic child-Resources-management, which should allready work for minimal requirements.
</p>

<div class="note">
When using the grind in TV tab don't set the grid to "autoload" (in MIGXdb Settings tab in the MIGX configurator) because the grid will not render to full width, as explained here: <a href="https://github.com/Bruno17/MIGX/issues/75#issuecomment-15505640">https://github.com/Bruno17/MIGX/issues/75#issuecomment-15505640</a>
</div>

<h2 id="MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-AddingsomeTVstoourform">
Adding some TVs to our form
</h2>

<p>
In this step we want to add three TVs to our form:
</p>

<ul>
<li>MIGX-TV to add and manage some images to our child-resource
</li>

<li>Text-TV for a Price-field
</li>

<li>Multiselect-TV for choosing one or more Categories for our child-resource
</li>
</ul>

<h3 id="MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-TheMIGXTVforsomeimages">
The MIGX-TV for some images
</h3>

<p>
Create a new TV:
<br />
Name: images
<br />
Type: migx
<br />
Formtabs:
</p>

<pre class="brush: php">
[
{"caption":"Image", "fields": [
    {"field":"title","caption":"Title","description":"Title for the image."},
    {"field":"image","caption":"Image","inputTVtype":"image"}

]}
]
</pre>
<p>
Grid Columns:
</p>

<pre class="brush: php">
[
{"header": "Title", "width": "160", "sortable": "true", "dataIndex": "title"},
{"header": "Image", "width": "50", "sortable": "false", "dataIndex": "image","renderer": "this.renderImage"}
]
</pre>
<p>
"Add Item" Replacement: Add Image
</p>

<h3 id="MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-TextTVforaPricefield">
Text-TV for a Price-field
</h3>

<p>
Name: price
<br />
Type: text
</p>

<h3 id="MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-MultiselectTVforchoosingoneormoreCategoriesforourchildresource">
Multiselect-TV for choosing one or more Categories for our child-resource
</h3>

<p>
Name: categories
<br />
Type: listbox multiple
<br />
Input-option-values:
<br />
---==||categoryA||categoryB||categoryC||categoryD
</p>

<div class="note">
Add this TVs to your child-resources-template, but not to your parent-resource-template!
</div>

<h3 id="MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-AddingtheTVstoourForm">
Adding the TVs to our Form
</h3>

<p>
Go to the MIGX-Management-Component into the TAB 'MIGX'
<br />
-&gt; right click to the record 'childstutorial' -&gt; click 'edit'
<br />
-&gt; go to 'Formtabs'
<br />
-&gt; click 'Add Item'
<br />
caption: TVs
<br />
fields: -&gt; Add three items
</p>

<p>
fieldname: price
<br />
caption: Price
</p>

<p>
fieldname: images
<br />
caption: Images
<br />
iputTV: images
</p>

<p>
fieldname: categories
<br />
Caption: Categories
<br />
inputTV: categories
</p>

<p>
to save them, click -&gt;Done
</p>

<h3 id="MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-RegistertheTVsforourprocessors(getlist,fields)">
Register the TVs for our processors (getlist,fields)
</h3>

<p>
We need to register TVs to include them in the getlist- and fields-processors.
<br />
Todo so we need a new config-file under /core/components/migx/configs/
</p>

<p>
with the same name as our MIGX-configuration: childstutorial.config.inc.php (should allready be installed with the MIGX-package)
<br />
and this content:
</p>

<figure class="code">
<figcaption>
<strong>/core/components/migx/configs/childstutorial.config.inc.php</strong>
</figcaption>

<pre class="brush: php">
&lt;?php
$this-&gt;customconfigs['includeTVs'] = 1;
$this-&gt;customconfigs['includeTVList'] = 'price,images,categories';
</pre>
</figure>

<div class="info">
All TVs you want to edit or you want to show in the grid needs to be in the includeTVList - customconfig
</div>

<p>
<br />
</p>

<div class="note">
Pay attention on how you name the TVs and fields, they should not contain any dots "." inside their names because that is used for extended fields and results in unexpected behavior with MIGXdb as explained here: <a href="http://forums.modx.com/thread/83428/strange-issue-migxdb-childresources-tutorial-tvs-not-saved#dis-post-460312">http://forums.modx.com/thread/83428/strange-issue-migxdb-childresources-tutorial-tvs-not-saved#dis-post-460312</a>
<p>
Fieldnames and TV names should be the same.
</p>
</div>

<h2 id="MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-Addasortablepricecolumntothegrid">
Add a sortable price-column to the grid
</h2>

<p>
Go to the TAB 'Columns'
<br />
-&gt; click 'Add Item'
<br />
Header: Price
<br />
Field: price
<br />
width: 20
<br />
sortable: yes
</p>

<p>
Now we should be able to update this TVs in our grids-editor-window.
</p>

<h2 id="MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-AddingFilters">
Adding Filters
</h2>

<p>
In this step we add some filters to our grid.
</p>

<ul>
<li>Textbox-filter to search in pagetitle,longtitle and content
</li>

<li>dropdown-filter to filter by category
</li>
</ul>

<p>
Go to MIGX-Management and open our configuration (childstutorial)
<br />
Open the TAB 'DB-Filters'
<br />
Click 'Add Item' to add a new filter.
</p>

<h3 id="MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-TextboxFilterforsearchinginsomefields">
Textbox Filter for searching in some fields
</h3>

<p>
filter Name: search
<br />
label: search
<br />
empty text: search...
<br />
getlist-where:
</p>

<pre class="brush: php">
{"pagetitle:LIKE":"%[[+search]]%","OR:longtitle:LIKE":"%[[+search]]%","OR:content:LIKE":"%[[+search]]%"}
</pre>
<h3 id="MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-DropdownFilterforfilteringbycategories">
Dropdown Filter for filtering by categories
</h3>

<p>
filter Name: category
<br />
label: category
<br />
empty text: - category filter -
<br />
filter type: combobox
<br />
getlist-where:
</p>

<pre class="brush: php">
tvFilter::categories=inArray=[[+category]]
</pre>
<p>
getcombo processor: getTVcombo
<br />
getcombo textfield: categories (this is used in our getTVcombo-processor to get the input-options of the TV 'categories' for our filter-dropdown)
</p>

<p>
Save them all with clicking 'Done' on all windows
</p>

<p>
Now you should be able to filter the child-resources by searching and/or choosing a category
</p>

<h2 id="MIGXdb.ManageChild-Resourcesinagrid-TVwithhelpofMIGXdb-Hidingchildrenfromtree">
Hiding children from tree
</h2>

<p>
Hiding our child-resources from resource-tree is very easy.
</p>

<p>
go to the MIGX-Configurator and add a new field to one of the formtabs:
</p>

<p>
Fieldname: show_in_tree
<br />
Caption: Show in Tree
<br />
inputTVtype: listbox
</p>

<p>
inputOptionValues: no==0||yes==1
</p>

<p>
You can also show the status of this field in the grid by adding a new column:
</p>

<p>
Header: Show in Tree
<br />
Field: show_in_tree
<br />
width: 20
<br />
Renderer: this.RenderCrossTick
</p>