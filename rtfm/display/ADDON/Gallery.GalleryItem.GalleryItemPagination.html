<p>
<br class="atl-forced-newline" />
</p>

<h2>
<a name="Gallery.GalleryItem.GalleryItemPagination-GalleryItemPaginationSnippet" id="Gallery.GalleryItem.GalleryItemPagination-GalleryItemPaginationSnippet"></a>GalleryItemPagination Snippet
</h2>

<p>
The GalleryItemPagination snippet offers placeholders for a basic navigation (previous, next) when displaying a single Gallery Item with GalleryItem.
</p>

<h2>
<a name="Gallery.GalleryItem.GalleryItemPagination-Properties" id="Gallery.GalleryItem.GalleryItemPagination-Properties"></a>Properties
</h2>

<p>
GalleryItemPagination uses the following properties:
</p>

<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<th class='confluenceTh'>
Name
</th>
<th class='confluenceTh'>
Description
</th>
<th class='confluenceTh'>
default value
</th>
</tr>

<tr>
<td class='confluenceTd'>
curItem
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
The ID of the image currently on display. Can be overridden by an URL parameter.
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
1, or an url parameter
<br class="atl-forced-newline" />
</td>
</tr>

<tr>
<td class='confluenceTd'>
checkForRequestVar
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
Wether or not to override curItem with the url parameter as specified in the getParam property
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
1
<br class="atl-forced-newline" />
</td>
</tr>

<tr>
<td class='confluenceTd'>
getParam
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
URL parameter to use with checkForRequestVar
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
galItem
<br class="atl-forced-newline" />
</td>
</tr>

<tr>
<td class='confluenceTd'>
album
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
The ID or name of an album to use
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
1
<br class="atl-forced-newline" />
</td>
</tr>

<tr>
<td class='confluenceTd'>
checkForRequestAlbumVar
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
Whether or not to override album with the url parameter as specified in the albumRequstVar property
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
1
<br class="atl-forced-newline" />
</td>
</tr>

<tr>
<td class='confluenceTd'>
albumRequestVar
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
URL parameter to use with checkForRequestAlbumVar
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
galAlbum
</td>
</tr>
</tbody>
</table>
</div>

<h2>
<a name="Gallery.GalleryItem.GalleryItemPagination-Placeholders" id="Gallery.GalleryItem.GalleryItemPagination-Placeholders"></a>Placeholders
</h2>

<p>
GalleryItemPagination sets placeholders for the current, previous, next, first and last item in an album. You can find the namespaces for that in the table below. You can use the same fields the <a href="http://rtfm.modx.com/display/ADDON/Gallery.GalleryItem#Gallery.GalleryItem-DefaultPlaceholders" class="external-link" rel="nofollow">GalleryItem placeholders</a>, minus album and tags.
</p>

<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<th class='confluenceTh'>
Name
</th>
<th class='confluenceTh'>
Description
</th>
</tr>

<tr>
<td class='confluenceTd'>
galitem.cur.*
</td>
<td class='confluenceTd'>
placeholder namespace for current item of album
</td>
</tr>

<tr>
<td class='confluenceTd'>
galitem.prev.*
</td>
<td class='confluenceTd'>
placeholder namespace for previous item of album
</td>
</tr>

<tr>
<td class='confluenceTd'>
galitem.next.*
</td>
<td class='confluenceTd'>
placeholder namespace for next item of album
</td>
</tr>

<tr>
<td class='confluenceTd'>
galitem.first.*
</td>
<td class='confluenceTd'>
placeholder namespace for first item of album
</td>
</tr>

<tr>
<td class='confluenceTd'>
galitem.last.*
</td>
<td class='confluenceTd'>
placeholder namespace for last item of album
</td>
</tr>
</tbody>
</table>
</div>

<h3>
<a name="Gallery.GalleryItem.GalleryItemPagination-Exampleplaceholders" id="Gallery.GalleryItem.GalleryItemPagination-Exampleplaceholders"></a>Example placeholders
</h3>

<p>
Below you can find some common placeholders for GalleryItemPagination that can be used in your tpl/resource.
</p>

<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<th class='confluenceTh'>
Name
</th>
<th class='confluenceTh'>
Description
</th>
</tr>

<tr>
<td class='confluenceTd'>
galitem.cur.id
</td>
<td class='confluenceTd'>
placeholder for current item ID of album
</td>
</tr>

<tr>
<td class='confluenceTd'>
galitem.prev.id
</td>
<td class='confluenceTd'>
placeholder for previous item ID of album
</td>
</tr>

<tr>
<td class='confluenceTd'>
galitem.next.id
</td>
<td class='confluenceTd'>
placeholder for next item ID of album
</td>
</tr>

<tr>
<td class='confluenceTd'>
galitem.first.id
</td>
<td class='confluenceTd'>
placeholder for first item ID of album
</td>
</tr>

<tr>
<td class='confluenceTd'>
galitem.last.id
</td>
<td class='confluenceTd'>
placeholder for last item ID of album
</td>
</tr>

<tr>
<td class='confluenceTd'>
galitem.next.filename
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
filename of the next item
<br class="atl-forced-newline" />
</td>
</tr>

<tr>
<td class='confluenceTd'>
galitem.cur.description
<br class="atl-forced-newline" />
</td>
<td class='confluenceTd'>
description of the current item
<br class="atl-forced-newline" />
</td>
</tr>
</tbody>
</table>
</div>

<h2>
<a name="Gallery.GalleryItem.GalleryItemPagination-GalleryItemPaginationexamples" id="Gallery.GalleryItem.GalleryItemPagination-GalleryItemPaginationexamples"></a>GalleryItemPagination examples
</h2>

<p>
Display a basic navigation for an GalleryItem item and use previous and next placeholders.
</p>

<h3>
<a name="Gallery.GalleryItem.GalleryItemPagination-Createsnippet%27GalleryItemPagination%27"></a>Create snippet 'GalleryItemPagination'
</h3>

<p>
First of all you have to create the snippet. Name it 'GalleryItemPagination' and save it.
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
<span class="code-comment">// First instantiate the Gallery <span class="code-keyword">package</span>
</span>$modx-&gt;addPackage('gallery',$modx-&gt;getOption('gallery.core_path',$config,$modx-&gt;getOption('core_path').'components/gallery/').'model/');

$curItem = $modx-&gt;getOption('curItem',$scriptProperties,1);
<span class="code-keyword">if</span> ($modx-&gt;getOption('checkForRequestVar',$scriptProperties,<span class="code-keyword">true</span>)) {
    $getParam = $modx-&gt;getOption('getParam',$scriptProperties,'galItem');
    <span class="code-keyword">if</span> (!empty($_REQUEST[$getParam])) { $curItem = (<span class="code-object">int</span>)$_REQUEST[$getParam]; }
}
<span class="code-keyword">if</span> (empty($curItem)) <span class="code-keyword">return</span> '';

$album = $modx-&gt;getOption('album',$scriptProperties,1);
<span class="code-keyword">if</span> ($modx-&gt;getOption('checkForRequestAlbumVar',$scriptProperties,<span class="code-keyword">true</span>)) {
    $albumRequestVar = $modx-&gt;getOption('albumRequestVar',$scriptProperties,'galAlbum');
    <span class="code-keyword">if</span> (!empty($_REQUEST[$albumRequestVar])) $album = $_REQUEST[$albumRequestVar];
}
<span class="code-comment">// We pass the album name/ID to an &amp;album property and find the gallery object
</span><span class="code-keyword">if</span> (!is_int($album)) {
    $gallery = $modx-&gt;getObject('galAlbum',array('name' =&gt; $album));
    <span class="code-keyword">if</span> ($gallery <span class="code-keyword">instanceof</span> galAlbum)
        $album = $gallery-&gt;get('id');
}

$c = $modx-&gt;newQuery('galAlbumItem');
$c-&gt;innerJoin('galItem','Item');
$c-&gt;where(
    array(
        'album' =&gt; $album,
    )
);
$c-&gt;select(
    array(
        'galAlbumItem.*',
        'Item.*',
    )
);

$c-&gt;sortby('rank','asc');

$collection = $modx-&gt;getCollection('galAlbumItem',$c);

$items = array();
foreach ($collection as $i) {
    $items[] = $i-&gt;toArray();
}

$<span class="code-keyword">continue</span> = <span class="code-keyword">true</span>;
$i = 0; $prev = array(); $cur = array(); $next = array();
<span class="code-keyword">while</span> ($<span class="code-keyword">continue</span>) {
    $prev = $cur;
    $cur = $items[$i];
    <span class="code-keyword">if</span> ($cur['id'] == $curItem) {
        $next = $items[$i+1];
        $<span class="code-keyword">continue</span> = <span class="code-keyword">false</span>;
    }
    $i++;
}
$first = $items[0];
$last = $items[count($items)-1];
$phs['galitem.cur.'] = $cur;
$phs['galitem.prev.'] = $prev;
$phs['galitem.next.'] = $next;
$phs['galitem.first.'] = $first;
$phs['galitem.last.'] = $last;

$modx-&gt;setPlaceholders($phs);

<span class="code-keyword">return</span> '';
</pre>
</div>
</div>

<p>
Now set up your placeholders for the navigation:
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
[[!GalleryItemPagination? &amp;album=`1`]]
[[!If? &amp;subject=`[[!+galitem.prev.id]]`&amp;<span class="code-keyword">operator</span>=`isnotempty` &amp;then=`
&lt;a id=<span class="code-quote">"previmg"</span> href=<span class="code-quote">"[[++site_url]]?id=[[*id]]&amp;galItem=[[!+galitem.prev.id]]&amp;galAlbum=1&amp;galTag="</span>&gt;previous image&lt;/a&gt;`]]
[[!If? &amp;subject=`[[!+galitem.next.id]]`&amp;<span class="code-keyword">operator</span>=`isnotempty` &amp;then=`
&lt;a id=<span class="code-quote">"nextimg"</span> href=<span class="code-quote">"[[++site_url]]?id=[[*id]]&amp;galItem=[[!+galitem.next.id]]&amp;galAlbum=1&amp;galTag="</span>&gt;next image&lt;/a&gt;`]]
`]]
</pre>
</div>
</div>

<h2>
<a name="Gallery.GalleryItem.GalleryItemPagination-SeeAlso" id="Gallery.GalleryItem.GalleryItemPagination-SeeAlso"></a>See Also
</h2>

<div class="plugin_pagetree">
<div style="margin-left: 2em" class="plugin_pagetree_children_list plugin_pagetree_children_list_noleftspace">
<div class="plugin_pagetree_children">
</div>
</div>

<fieldset class="hidden">
<input type="hidden" name="treeId" value="" /> <input type="hidden" name="treeRequestId" value="/plugins/pagetree/naturalchildren.action?decorator=none&amp;excerpt=false&amp;sort=position&amp;reverse=false&amp;disableLinks=false" /> <input type="hidden" name="treePageId" value="35586744" /> <input type="hidden" name="noRoot" value="false" /> <input type="hidden" name="rootPageId" value="13664292" /> <input type="hidden" name="rootPage" value="" /> <input type="hidden" name="startDepth" value="0" /> <input type="hidden" name="spaceKey" value="ADDON" /> <input type="hidden" name="i18n-pagetree.loading" value="Loading..." /> <input type="hidden" name="i18n-pagetree.error.permission" value="Unable to load page tree. It seems that you do not have permission to view the root page." /> <input type="hidden" name="i18n-pagetree.eeror.general" value="There was a problem retrieving the page tree. Please check the server log file for more information." /> <input type="hidden" name="loginUrl" value="/login.action?os_destination=%2Fdisplay%2FADDON%2FGallery.GalleryItem.GalleryItemPagination" />
<fieldset class="hidden">
<input type="hidden" name="ancestorId" value="16646196" /> <input type="hidden" name="ancestorId" value="13664292" />
</fieldset>
</fieldset>
</div>