<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<td class='confluenceTd'>
Name = eForm
</td>
</tr>

<tr>
<td class='confluenceTd'>
Version = 1.4.3
</td>
</tr>

<tr>
<td class='confluenceTd'>
Author = TobyL
</td>
</tr>

<tr>
<td class='confluenceTd'>
Since = &gt;= 0.9.5
</td>
</tr>

<tr>
<td class='confluenceTd'>
Updated = 1/7/2007
</td>
</tr>
</tbody>
</table>
</div>

<div>
<ul>
<li>
<a href="extras/evo/eform#eForm-WhatiseForm%3F">What is eForm?</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href="extras/evo/eform#eForm-Downloads">Downloads</a>
</li>
</ul>
</li>

<li>
<a href="extras/evo/eform#eForm-Installation">Installation</a>
</li>

<li>
<a href="extras/evo/eform#eForm-Usage">Usage</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href="extras/evo/eform#eForm-RequiredParameters">Required Parameters</a>
</li>

<li>
<a href="extras/evo/eform#eForm-OptionalParameters">Optional Parameters</a>
</li>
</ul>
</li>

<li>
<a href="extras/evo/eform#eForm-Events">Events</a>
</li>

<li style="list-style: none; display: inline">
<div style="margin-left: 2em">
<ul>
<li>
<a href="extras/evo/eform#eForm-eFormOnBeforeFormParse">eFormOnBeforeFormParse</a>
</li>

<li>
<a href="extras/evo/eform#eForm-eFormOnValidate">eFormOnValidate</a>
</li>

<li>
<a href="extras/evo/eform#eForm-eFormOnBeforeMailSent">eFormOnBeforeMailSent</a>
</li>

<li>
<a href="extras/evo/eform#eForm-eFormOnMailSent">eFormOnMailSent</a>
</li>

<li>
<a href="extras/evo/eform#eForm-eFormOnBeforeFormMerge">eFormOnBeforeFormMerge</a>
</li>
</ul>
</div>
</li>

<li>
<a href="extras/evo/eform#eForm-Examples">Examples</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href="extras/evo/eform#eForm-eFormForms">eForm Forms</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href="extras/evo/eform#eForm-ASimpleContactFormchunk">A Simple ContactForm chunk</a>
</li>
</ul>
</li>

<li>
<a href="extras/evo/eform#eForm-eFormReport">eForm Report</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href="extras/evo/eform#eForm-AsimpleContactFormReport">A simple ContactFormReport</a>
</li>
</ul>
</li>

<li>
<a href="extras/evo/eform#eForm-eFormDocumentSnippetCalls">eForm Document Snippet Calls</a>
</li>

<li>
<a href="extras/evo/eform#eForm-UsingeFormwithFlashforms">Using eForm with Flash forms</a>
</li>
</ul>
</li>

<li>
<a href="extras/evo/eform#eForm-DatatypesandFormatting">Datatypes and Formatting</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href="extras/evo/eform#eForm-Datatypes">Data types</a>
</li>
</ul>
</li>

<li>
<a href="extras/evo/eform#eForm-ExtendedServerValidation">Extended Server Validation</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href="extras/evo/eform#eForm-Validationrules">Validation rules</a>
</li>

<li>
<a href="extras/evo/eform#eForm-Hiddenfields%2Cselectboxes%2Cradiooptionsandcheckboxfields">Hidden fields, select boxes, radio options and checkbox fields</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href="extras/evo/eform#eForm-Hiddenfields">Hidden fields</a>
</li>

<li>
<a href="extras/evo/eform#eForm-Formfieldexampleswithvalidation">Form field examples with validation</a>
</li>
</ul>
</li>
</ul>
</li>

<li>
<a href="extras/evo/eform#eForm-Notes">Notes</a>
</li>

<li>
<a href="extras/evo/eform#eForm-Resources">Resources</a>
</li>
</ul>
</div>

<h2>
<a name="eForm-WhatiseForm%3F"></a>What is eForm?
</h2>

<p>
eForm is a highly flexible form parser snippet that will let you convert web forms into an email which can then be sent via email to users you can specify in the [<a href="display/ADDON/YAMS+Snippet" title="YAMS Snippet">YAMS Snippet</a>] or the form. Some notable features include:
</p>

<ul>
<li>Form validation using powerful validation rules
</li>

<li>Protection of hidden fields against tampering
</li>

<li>
<span class="error">[Captcha]</span> support
</li>

<li>Supports html email with attachments
</li>

<li>Flexible report &amp; page generation using placeholders
</li>

<li>Notification to mobile devices
</li>

<li>auto-respond email
</li>

<li>Support for CC and BCC fields
</li>
</ul>

<p>
Please note that eForm comes with extended documentation included in the package!
</p>

<h3>
<a name="eForm-Downloads" id="eForm-Downloads"></a>Downloads
</h3>

<p>
Download the <a href="http://modxcms.com/eForm-1003.html" class="external-link" rel="nofollow">latest version</a> of <a href="display/ADDON/eForm" title="eForm">eForm</a> from MODx repository.
</p>

<h2>
<a name="eForm-Installation" id="eForm-Installation"></a>Installation
</h2>

<ul>
<li>Unzip the eForm ZIP file into the assets/snippet/ folder. You should now have an extra folder called eform.
</li>

<li>Create a new snippet, name it eForm and copy and paste the content of the eform.snippet.tpl file
</li>

<li>Read eform/docs/eform.htm and the examples
</li>

<li>Drop the eForm snippet into page and add parameters as you require
</li>

<li>If you are managing the server that you are running MODx on, you need to make sure that <b>sendmail</b> is installed and configured properly.
</li>
</ul>

<h2>
<a name="eForm-Usage" id="eForm-Usage"></a>Usage
</h2>

<h3>
<a name="eForm-RequiredParameters" id="eForm-RequiredParameters"></a>Required Parameters
</h3>

<ul>
<li>&amp;formid - <em>Required</em>
<ul>
<li>Identity (id) of the form on the page that this snippet will manage. Eg: &lt;code&gt;&lt;form id="formid"&gt;&lt;/code&gt;
</li>
</ul>
</li>

<li>&amp;tpl - <em>Required</em>
<ul>
<li>[<span class="error">[Chunk]</span>] name or document id to use as a template.
</li>
</ul>
</li>

<li>&amp;report - <em>Required</em>
<ul>
<li>[<span class="error">[Chunk]</span>] name or document id to use when generating reports, if using the &amp;noemail parameter, this parameter is not required.
</li>
</ul>
</li>
</ul>

<h3>
<a name="eForm-OptionalParameters" id="eForm-OptionalParameters"></a>Optional Parameters
</h3>

<ul>
<li>&amp;to - <em>Optional</em>
<ul>
<li>Email address to send eForm information to For multiple recipients separate emails with a comma (,) If omitted the site settings email address will be used.
</li>
</ul>
</li>

<li>&amp;from - <em>Optional</em>
<ul>
<li>Sets the email address to appear in the From section of the email.
</li>
</ul>
</li>

<li>&amp;automessage - <em>Optional</em>
<ul>
<li>chunk name (non-numeric) or document id (numeric) to use as an auto-responder message Can include <span class="error">[+form fields+]</span>. E.g. <span class="error">[+firstname+]</span> - tags: <span class="error">[form_fields]</span>,<span class="error">[postdate]</span> - note: eForm will send the auto-respond message to the email address specified inside the <span class="error">[email]</span> form field.
<br />
<b>More to Come...</b>
</li>
</ul>
</li>
</ul>

<h2>
<a name="eForm-Events" id="eForm-Events"></a>Events
</h2>

<h4>
<a name="eForm-eFormOnBeforeFormParse" id="eForm-eFormOnBeforeFormParse"></a>eFormOnBeforeFormParse
</h4>

<p>
Called just before the form is parsed, Parsing is done <b>only</b> if there is $_POST data valid to the form.
</p>

<h4>
<a name="eForm-eFormOnValidate" id="eForm-eFormOnValidate"></a>eFormOnValidate
</h4>

<p>
Called after built-in validation is parsed, for use with extended validation.
</p>

<h4>
<a name="eForm-eFormOnBeforeMailSent" id="eForm-eFormOnBeforeMailSent"></a>eFormOnBeforeMailSent
</h4>

<p>
Called before the message is sent. This function is called regardless of wether &amp;noemail is set.
</p>

<h4>
<a name="eForm-eFormOnMailSent" id="eForm-eFormOnMailSent"></a>eFormOnMailSent
</h4>

<p>
Called after the message is sent. If &amp;to is not set, or is not a valid address, this event is not called.
</p>

<h4>
<a name="eForm-eFormOnBeforeFormMerge" id="eForm-eFormOnBeforeFormMerge"></a>eFormOnBeforeFormMerge
</h4>

<p>
Very last event called before the form is pushed to the client browser.
</p>

<h2>
<a name="eForm-Examples" id="eForm-Examples"></a>Examples
</h2>

<h3>
<a name="eForm-eFormForms" id="eForm-eFormForms"></a>eForm Forms
</h3>

<h4>
<a name="eForm-ASimpleContactFormchunk" id="eForm-ASimpleContactFormchunk"></a>A Simple ContactForm chunk
</h4>

<pre class="brush: php">
    &lt;p&gt;This is a response sent by &lt;b&gt;[+name+]&lt;/b&gt; using the feedback form on this website. The details of the message follow below:&lt;/p&gt;

&lt;p&gt;Name: [+name+]&lt;/p&gt;
&lt;p&gt;Email: [+email+]&lt;/p&gt;
&lt;p&gt;Regarding: [+subject+]&lt;/p&gt;
&lt;p&gt;Comments:&lt;br /&gt;[+message+]&lt;/p&gt;

&lt;p&gt;You can use this link to reply: &lt;a href="mailto:[+email+]?subject=RE: [+subject+]"&gt;[+email+]&lt;/a&gt;&lt;/p&gt;

    
</pre>
<p>
--ScottyDelicious 16:00, 5 December 2006 (PST)
</p>

<h3>
<a name="eForm-eFormDocumentSnippetCalls" id="eForm-eFormDocumentSnippetCalls"></a>eForm Document Snippet Calls
</h3>

<pre class="brush: php">
    var postData:String = "";
postData += "action=index.php?id=&lt;eFormPage&gt;";
postData += "&amp;name="+escape(Util.trim(input_name.text));

fileRef["postData"] = postData;
fileRef.upload(url);

    
</pre>
<p>
You can format the report template as an xml document to send back to Flash to notify the success of the operation:
</p>

<pre class="brush: php">
    &lt;input type="text" name="color" eform="A Color:string:1" /&gt;
    
</pre>
<p>
The basic format of the eform attribute is:
</p>

<p>
description/title:datatype:required:validation message:validation rule
</p>

<h3>
<a name="eForm-Datatypes" id="eForm-Datatypes"></a>Data types
</h3>

<p>
You only need to set the following data types. Others will be set automatically (radio &amp; checkbox as they are, string for textbox and listbox for select)
</p>

<p>
Standard validation: All fields that are required will be checked if they are left empty.
</p>

<ul>
<li>string - No specific validation besides checking if it's empty if the field is required.
</li>

<li>date - Checks if it is a valid date (based on php's strtotime() function)
</li>

<li>integer - Checks if it is a number (does not check if it is in fact an integer)
</li>

<li>float - Checks if it is a number
</li>

<li>email - Checks if it's a valid email address using a simple regular expression
</li>

<li>file - (for file upload input) - checks if a size error occurs, does not currently check file type
</li>

<li>html - Same as string except that it converts line endings (\n) to tags
</li>
</ul>

<p>
The listbox, checkbox and radio fields do normally not require the datatype to be set. eForm will recognize these automatically. It will validate the values against the list of values placed in the form. The option tags in the listbox and the checkbox must have their value attributes explicitly set for this automatic validation to work. Eg.
</p>

<pre class="brush: php">
    &lt;option&gt;Mr&lt;/option&gt;
    
</pre>
<h2>
<a name="eForm-ExtendedServerValidation" id="eForm-ExtendedServerValidation"></a>Extended Server Validation
</h2>

<p>
This version introduces extended server validation and word filtering using very flexible validation rules that can be set in the eformattribute. You can set 2 extra validation parameters, a custom error message and a validation or filter rule.
</p>

<p>
<b>Example</b>
</p>

<pre class="brush: php">
                function myFilterFunction($value){
               $badWords = array('scribble','coding');
               $goodWords = array('design','sleep');
               return str_replace($badWords,$goodWords,$value);
            }
            
    
</pre>
<p>
o #FILTER #REGEX
<br />
regular expression replace - syntax as for preg_replace() separate the search and replacement expression with a double
<br />
pipe symbol (||)
<br />
TODO: example
</p>

<h3>
<a name="eForm-Hiddenfields%2Cselectboxes%2Cradiooptionsandcheckboxfields"></a>Hidden fields, select boxes, radio options and checkbox fields
</h3>

<p>
Select boxes, radio options and checkbox fields now have working automatic validation. Any input for these fields is validated against the values set in your form template. This avoids anyone tampering with the form by adding their own values to these fields.
</p>

<h4>
<a name="eForm-Hiddenfields" id="eForm-Hiddenfields"></a>Hidden fields
</h4>

<p>
By default hidden fields are validated as a protection against tampering by comparing the input against the value set in the form template (much like the select, checkbox and radio fields) In some circumstances this may not be desirable however. For instance when you use some javascript in your form to store a result in a hidden field. In those cases you can turn this behaviour off by setting the eform attribute (with or without it's own validation).
</p>

<p>
<b>Hidden field examples</b>
</p>

<p>
<b>1.</b> The default behaviour is handy for instance if you are storing a document id and want to be sure no one can tamper with the id. the field would look like this:
</p>

<pre class="brush: php">
    &lt;input type="hidden" name="calculatedField" value="" eform="::0::" /&gt;

    
</pre>
<p>
<b>3.</b> Same as example 2 but suppose you want to make sure a value is returned and that it stays within a certain range. The eform attribute is set with: title,integer data type, required field, error message and validation with #RANGE (in this example a value between 1-10)
</p>

<pre class="brush: php">
    &lt;select name="mySelect" eform="Select Country::1" /&gt; (datatype left blank)
&lt;option value="en-au"&gt;Australia&lt;/option&gt;
&lt;option value="en-us"&gt;USA&lt;/option&gt;
&lt;/select&gt;

    
</pre>
<p>
<b>Textbox</b> - required and format set to date
</p>

<pre class="brush: php">
    &lt;input type="checkbox" name="myColors[]" value="Red" eform="Colors::1" /&gt; (datatype left blank)
&lt;input type="checkbox" name="myColors[]" value="Green" /&gt; (datatype left blank)

    
</pre>
<h2>
<a name="eForm-Notes" id="eForm-Notes"></a>Notes
</h2>

<ul>
<li>If you use a template rather than a chunk for the form (the tpl parameter), make sure you turn the 'rich text' attribute of the template off. Otherwise all of the 'eform' pseudo attributes will be stripped off the first time you edit the form.
</li>
</ul>

<ul>
<li>The "tick marks" in the snippet call are not single quotes, but back ticks. Using single quotes will give you a "Document or chunk not found for template id=" error.
</li>
</ul>

<h2>
<a name="eForm-Resources" id="eForm-Resources"></a>Resources
</h2>

<ul>
<li>
<a href="http://wiki.modxcms.com/index.php/Category:EForm" class="external-link" rel="nofollow">eForm Howtos</a> on old MODxWiki
</li>
</ul>

<p>
LInk to author's page (www.partout.info/assets/snippets/eform/docs/eform.htm)
</p>