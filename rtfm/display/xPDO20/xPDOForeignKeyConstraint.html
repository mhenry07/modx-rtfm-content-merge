<h2>
<a name="xPDOForeignKeyConstraint-WhatDoestheRuleDo%3F"></a>What Does the Rule Do?
</h2>

<p>
This rule tests the validity of a foreign key for a defined relationship.
</p>

<h2>
<a name="xPDOForeignKeyConstraint-UsingtheRule" id="xPDOForeignKeyConstraint-UsingtheRule"></a>Using the Rule
</h2>

<p>
Here we want to make sure no category ID is assigned to our object that doesnt have a category that exists.
</p>

<p>
First, our model:
</p>

<pre class="brush: php">
    $output = '';
$modx-&gt;addPackage('test','/path/to/my/test/model/','test_');
$obj = $modx-&gt;newObject('myTest');
$obj-&gt;set('category',123);
$validator = $obj-&gt;getValidator();
if ($validator-&gt;validate() == false) {
    $messages = $validator-&gt;getMessages();
    foreach ($messages as $errorMsg) {
        $output .= $errorMsg['message'];
    }
}

    
</pre>
<p>
This will display, assuming that a category doesn't exist with ID '123':
</p>

<blockquote>
<p>
The category specified does not exist.
</p>
</blockquote>

<p>
Similarly, we could have used the 'name' field as the "foreign" attribute in our schema, if we were setting our myTest object's category field to that name.
</p>

<h2>
<a name="xPDOForeignKeyConstraint-SeeAlso" id="xPDOForeignKeyConstraint-SeeAlso"></a>See Also
</h2>