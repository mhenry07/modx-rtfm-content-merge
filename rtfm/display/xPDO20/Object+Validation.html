<div>
<ul>
<li>
<a href="xpdo/2.x/advanced-features/object-validation#ObjectValidation-WhatisObjectValidationinxPDO%3F">What is Object Validation in xPDO?</a>
</li>

<li>
<a href="xpdo/2.x/advanced-features/object-validation#ObjectValidation-HowisitDone%3F">How is it Done?</a>
</li>

<li>
<a href="xpdo/2.x/advanced-features/object-validation#ObjectValidation-ExampleUsage">Example Usage</a>
</li>

<li>
<a href="xpdo/2.x/advanced-features/object-validation#ObjectValidation-Rules">Rules</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href="xpdo/2.x/advanced-features/object-validation#ObjectValidation-The%27callable%27Rule">The 'callable' Rule</a>
</li>

<li>
<a href="xpdo/2.x/advanced-features/object-validation#ObjectValidation-The%27pregmatch%27Rule">The 'preg_match' Rule</a>
</li>

<li>
<a href="xpdo/2.x/advanced-features/object-validation#ObjectValidation-The%27xPDOValidationRule%27Rule">The 'xPDOValidationRule' Rule</a>
</li>
</ul>
</li>

<li>
<a href="xpdo/2.x/advanced-features/object-validation#ObjectValidation-SeeAlso">See Also</a>
</li>
</ul>
</div>

<h2>
<a name="ObjectValidation-WhatisObjectValidationinxPDO%3F"></a>What is Object Validation in xPDO?
</h2>

<p>
Object validation is done through xPDOValidator, xPDO's validation class. It's automatically accessible from any xPDOObject, via the getValidator method.
</p>

<h2>
<a name="ObjectValidation-HowisitDone%3F"></a>How is it Done?
</h2>

<p>
Validation can be done either via the XML schema, or during run-time by <a href="display/xPDO20/xPDOValidator" title="xPDOValidator">xPDOValidator</a> methods.
</p>

<h2>
<a name="ObjectValidation-ExampleUsage" id="ObjectValidation-ExampleUsage"></a>Example Usage
</h2>

<p>
First, let's create our model with this object:
</p>

<pre class="brush: php">
    $output = '';
$modx-&gt;addPackage('test','/path/to/my/test/model/','test_');
$obj = $modx-&gt;newObject('myTest');
$validator = $obj-&gt;getValidator();
if ($validator-&gt;validate() == false) {
    $messages = $validator-&gt;getMessages();
    foreach ($messages as $errorMsg) {
        $output .= 'An error occurred on field "'.$errorMsg['field'].'": '.$errorMsg['message'];
    }
}

    
</pre>
<p>
This will output:
</p>

<blockquote>
<p>
An error occurred on field "name": Please specify a name.
</p>
</blockquote>

<h2>
<a name="ObjectValidation-Rules" id="ObjectValidation-Rules"></a>Rules
</h2>

<p>
There are three different types of rules, 'callable', 'preg_match', and 'xPDOValidationRule'.
</p>

<h3>
<a name="ObjectValidation-The%27callable%27Rule"></a>The 'callable' Rule
</h3>

<p>
A callable rule simply is a rule based upon a function that you pass.
</p>

<p>
This can be done a few ways. In the "rule" parameter of the schema, you can specify a function name, let's say, 'myCallable', and then make sure to define the function before you call validate().
</p>

<p>
The function is passed two parameters, the first of which is the value of the column in question, and the second an array of the other attributes on the Rule field in the schema. For example, a model with a rule as such:
</p>

<pre class="brush: php">
    function myCallable($value,$parameters) {
    return $value &lt; $parameters['min'];
}
$obj-&gt;set('number',101);
$validator = $obj-&gt;getValidator();
if ($validator-&gt;validate() == false) {
    $messages = $validator-&gt;getMessages();
    foreach ($messages as $errorMsg) {
        $o .= 'An error occurred on field "'.$errorMsg['field'].'": '.$errorMsg['message'].'&lt;br /&gt;';
    }
}

    
</pre>
<p>
Will return:
</p>

<blockquote>
<p>
An error occurred on field "number": Callable failed.
</p>
</blockquote>

<div class="note">
You can also call class methods as well; if you have class A with method B, you can make the rule xml attribute be "A::B" to access the function.
</div>

<h3>
<a name="ObjectValidation-The%27pregmatch%27Rule"></a>The 'preg_match' Rule
</h3>

<p>
A preg_match rule is simply a regular expression rule that must pass on a field in order for the object to validate. An example rule in the schema is like such - this one checks to see if the field contains the string 'php':
</p>

<pre class="brush: php">
    $obj-&gt;set('name','test');
$validator = $obj-&gt;getValidator();
if ($validator-&gt;validate() == false) {
    $messages = $validator-&gt;getMessages();
    foreach ($messages as $errorMsg) {
        $o .= 'An error occurred on field "'.$errorMsg['field'].'": '.$errorMsg['message'].'&lt;br /&gt;';
    }
}

    
</pre>
<p>
This outputs:
</p>

<blockquote>
<p>
An error occurred on field "name": Does not contain the string 'php'.
</p>
</blockquote>

<h3>
<a name="ObjectValidation-The%27xPDOValidationRule%27Rule"></a>The 'xPDOValidationRule' Rule
</h3>

<p>
An xPDOValidationRule rule is a specific rule type that is based upon a class extension of the xPDOValidationRule class. This allows you to do more advanced rules, as well as use the built-in rules. The built in rules include:
</p>

<ol class="ug-toc">
<li>
<a href="/xpdo/2.x/advanced-features/object-validation/xpdoforeignkeyconstraint">xPDOForeignKeyConstraint</a>
</li>

<li>
<a href="/xpdo/2.x/advanced-features/object-validation/xpdomaxlengthvalidationrule">xPDOMaxLengthValidationRule</a>
</li>

<li>
<a href="/xpdo/2.x/advanced-features/object-validation/xpdomaxvaluevalidationrule">xPDOMaxValueValidationRule</a>
</li>

<li>
<a href="/xpdo/2.x/advanced-features/object-validation/xpdominlengthvalidationrule">xPDOMinLengthValidationRule</a>
</li>

<li>
<a href="/xpdo/2.x/advanced-features/object-validation/xpdominvaluevalidationrule">xPDOMinValueValidationRule</a>
</li>
</ol>

<ul>
<li>
<a href="display/xPDO20/xPDOValidator" title="xPDOValidator">xPDOValidator</a>
</li>
</ul>