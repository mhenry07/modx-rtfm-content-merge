<div>
<ul>
<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-CodeStandards">Code Standards</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-GeneralPractices">General Practices</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-IndentationandLineBreaks">Indentation and Line Breaks</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-TrailingSpaces">Trailing Spaces</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-Compression">Compression</a>
</li>
</ul>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-HTML">HTML</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-Validation">Validation</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-InlineHTMLinSnippets">Inline HTML in Snippets</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-SelfclosingElements">Self-closing Elements</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-Terseness">Terseness</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-Doctype">Doctype</a>
</li>
</ul>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-TagsandAttributes">Tags and Attributes</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-Quotes">Quotes</a>
</li>
</ul>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-CSS">CSS</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-InlineStyles">Inline Styles</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-CSSValidation">CSS Validation</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-CSSFormatting">CSS Formatting</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-Pixelsvs.Ems">Pixels vs. Ems</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-InternetExplorerBugs">Internet Explorer Bugs</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-Shorthand">Shorthand</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-Margin%26Padding">Margin &amp; Padding</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-HexColors">Hex Colors</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-Background">Background</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-Border">Border</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-Font">Font</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-Longhand">Longhand</a>
</li>
</ul>
</li>
</ul>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-Javascript">Javascript</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-TypeCoercion">Type Coercion</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-Whitespace">White-space</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-Variables%2CID%26Class">Variables, ID &amp; Class</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-Quotes">Quotes</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-EventListeners">Event Listeners</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-EventDelegation">Event Delegation</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-Closures%26Scope">Closures &amp; Scope</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-Objects%26Arrays">Objects &amp; Arrays</a>
</li>
</ul>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-PHP">PHP</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-General">General</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-Parenthesis">Parenthesis</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-Classes">Classes</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-Variables">Variables</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-FunctionArgumentsandClassVariables">Function Arguments and Class Variables</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-Arrays">Arrays</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-Constants">Constants</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-FileStructure">File Structure</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-Prefixing">Prefixing</a>
</li>
</ul>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/code-standards#CodeStandards-SQL">SQL</a>
</li>
</ul>
</li>
</ul>
</div>

<h2>
<a name="CodeStandards-CodeStandards"></a>Code Standards
</h2>

<p>
This page describes the MODX coding standards for any MODX Component, Extension or core code. These are not de-facto rules, but guidelines for easier development and collaboration between developers.
</p>

<p>
This page was heavily borrowed from <a href="http://developer.fellowshipone.com/patterns/code.php" class="external-link" rel="nofollow">Fellowship One's Design Standards</a>. Thanks!
</p>

<h2>
<a name="CodeStandards-GeneralPractices"></a>General Practices
</h2>

<h3>
<a name="CodeStandards-IndentationandLineBreaks"></a>Indentation and Line Breaks
</h3>

<p>
All indentation must be done with <strong>4 spaces</strong>, not tabs. Make sure to change your editor settings to reflect this. Line breaks must be in <strong>UNIX</strong> format.
</p>

<h3>
<a name="CodeStandards-TrailingSpaces"></a>Trailing Spaces
</h3>

<p>
MODX recommends removing any trailing spaces in a line in code, unless that spacing is for design purposes.
</p>

<h3>
<a name="CodeStandards-Compression"></a>Compression
</h3>

<p>
MODX suggests packaging both compressed and uncompressed JS/CSS. MODX recommends using the compressed JS/CSS in production environments, but allowing users the option to toggle between compressed and uncompressed JS/CSS. This allows for easier debugging.
</p>

<p>
MODX does not advocate PHP compression.
</p>

<h2>
<a name="CodeStandards-HTML"></a>HTML
</h2>

<p>
HTML5 is a new version of HTML and XHTML. The HTML5 draft specification defines a single language that can be written in HTML and XML. It attempts to solve issues found in previous iterations of HTML and addresses the needs of Web Applications, an area previously not adequately covered by HTML. (<a href="http://html5.org/" class="external-link" rel="nofollow">from html5.org</a>)
</p>

<p>
MODX recommends following the HTML5 specs: <a href="http://whatwg.org/specs/web-apps/current-work/" class="external-link" rel="nofollow">http://whatwg.org/specs/web-apps/current-work/</a>
</p>

<h3>
<a name="CodeStandards-Validation"></a>Validation
</h3>

<p>
All HTML must be HTML5-validated. MODX recommends using the <a href="http://validator.w3.org/" class="external-link" rel="nofollow">W3C Validator</a>.
</p>

<h3>
<a name="CodeStandards-InlineHTMLinSnippets"></a>Inline HTML in Snippets
</h3>

<p>
MODX requires that <strong>no html</strong> be echo'ed or inline in a Snippet. MODX also recommends externalizing any HTML in PHP code into <a href="display/revolution20/Chunks" title="Chunks">Chunks</a>.
</p>

<p>
All HTML pages should be verified against the W3C validator, to ensure that the markup is well formed. This in and of itself is not directly indicative of good code, but it helps to weed out problems that are able to be tested via automation. It is no substitute for manual code review.
</p>

<p>
Note: In TextMate, Control + Shift + V will check the validity of the currently open HTML document.
</p>

<h3>
<a name="CodeStandards-SelfclosingElements"></a>Self-closing Elements
</h3>

<p>
Though we are using HTML5, which allows for either HTML or XHTML style syntax, we prefer the strictness of XHTML. Therefore, all tags must be properly closed. For tags that can wrap nodes such as text or other elements, termination is a trivial enough task. For tags that are self-closing, the forward slash should have exactly one space preceding it
<br />
vs. the compact but incorrect
<br />
. The W3C specifies that a single space should precede the self-closing slash (source).
</p>

<h3>
<a name="CodeStandards-Terseness"></a>Terseness
</h3>

<h4>
<a name="CodeStandards-Doctype"></a>Doctype
</h4>

<p>
A nice aspect of HTML5 is that it streamlines the amount of code that is required. Meaningless attributes have been dropped, and the DOCTYPE declaration has been simplified significantly. Additionally, there is no need to use CDATA to escape inline JavaScript, formerly a requirement to meet XML strictness in XHTML.
</p>

<pre class="brush: php">
    &lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
</pre>
<h3>
<a name="CodeStandards-TagsandAttributes"></a>Tags and Attributes
</h3>

<p>
All tags and attributes must be written in lowercase. Additionally, we prefer that any attribute values also be lowercase, when the purpose of the text therein is only to be interpreted by machines. For instances in which the data needs to be human readable, proper title capitalization should be followed, such as:
</p>

<pre class="brush: php">
    &lt;a href="http://example.com/" title="Description Goes Here"&gt;Example.com&lt;/a&gt;
</pre>
<h3>
<a name="CodeStandards-Quotes"></a>Quotes
</h3>

<p>
In keeping with the strictness of XHTML code conventions, according to the W3C, all attributes must have a value, and must use double-quotes (source). The following are examples of proper and improper usage of quotes and attribute/value pairs.
</p>

<pre class="brush: php">
    &lt;input type=text name=email disabled&gt;
</pre>
<h2>
<a name="CodeStandards-CSS"></a>CSS
</h2>

<h3>
<a name="CodeStandards-InlineStyles"></a>Inline Styles
</h3>

<p>
We strive to maintain proper separation of content and design, and therefore highly discourage the use of inline style="..." attributes. This not only makes maintenance a nightmare, but inextricably ties the presentation to the data it represents. All of our CSS will be stored in external files, with one master.css file called per page. That single file will incorporate other files as necessary with the @import syntax.
</p>

<p>
Note: An exception to this rule is style="display:none" for revealing hidden elements via JavaScript.
</p>

<h3>
<a name="CodeStandards-CSSValidation"></a>CSS Validation
</h3>

<p>
All cascading stylesheets should be verified against the W3C validator, to ensure correct syntax and to check for possible accessibility issues with text and background colors. This in and of itself is not directly indicative of good code, but it helps to weed out problems that are able to be tested via automation. It is no substitute for manual code review.
</p>

<p>
Note: In TextMate, Control + Shift + V will check the validity of the currently open CSS document.
</p>

<h3>
<a name="CodeStandards-CSSFormatting"></a>CSS Formatting
</h3>

<p>
To ease potential headaches for maintenance, we require that all CSS be written in a consistent manner. For one, all CSS selectors must be listed on their own line. As a general rule of thumb, if there is a comma in CSS, it should immediately be followed by a line break. This way, we know that all text on a single line is part of the same selector. Likewise, all property/value pairs must be on their own line, with one tab of indentation. The closing brace must be on the same level of indentation as the selector that began it - flush left.
</p>

<pre class="brush: php">
    #selector_1 span, #selector_2 span, #selector_3 span {
    background: #fff; color: #000;
}
</pre>

<pre class="brush: php">
    /*
13 * 1.5 = 19.5 ~ Rounds to 20px.
*/
#selector {
    font-size: 13px;
    line-height: 1.5;
}
</pre>

<pre class="brush: php">
    &lt;!--[if IE 7]&gt;
&lt;link type="text/css" rel="stylesheet" href="assets/styleshseets/ie7.css" /&gt;
&lt;![endif]--&gt;
&lt;!--[if IE 8]&gt;
&lt;link type="text/css" rel="stylesheet" href="assets/styleshseets/ie8.css" /&gt;
&lt;![endif]--&gt;
</pre>
<h3>
<a name="CodeStandards-Shorthand"></a>Shorthand
</h3>

<p>
In general, CSS shorthand is preferred because of its terseness, and the ability to later go back and add in values that are already present, such as the case with margin and padding. Developers should be aware of the TRBL acronym, denoting the order in which the sides of an element are defined, in a clock-wise manner: Top, Right, Bottom, Left. If bottom is undefined, it inherits its value from top. Likewise, if left is undefined, it inherits its value from right. If only the top value is defined, all sides inherit from that one declaration.
</p>

<p>
For more on reducing stylesheet code redundancy, and using CSS shorthand in general:
</p>

<ul>
<li>
<a href="http://qrayg.com/journal/news/css-background-shorthand" class="external-link" rel="nofollow">http://qrayg.com/journal/news/css-background-shorthand</a>
</li>

<li>
<a href="http://sonspring.com/journal/css-redundancy" class="external-link" rel="nofollow">http://sonspring.com/journal/css-redundancy</a>
</li>

<li>
<a href="http://dustindiaz.com/css-shorthand" class="external-link" rel="nofollow">http://dustindiaz.com/css-shorthand</a>
</li>
</ul>

<h4>
<a name="CodeStandards-Margin&amp;Padding"></a>Margin &amp; Padding
</h4>

<pre class="brush: php">
    #selector {
    margin: 0 0 10px 0;
    padding: 0 0 10px 0;
}
</pre>
<h4>
<a name="CodeStandards-HexColors"></a>Hex Colors
</h4>

<p>
We prefer hex values for all colors, written in lower-case. No upper-case or RGB, please! Additionally, all colors should be written as tersely as possible. This means that colors such as full blue, which can be written lengthily as #0000FF, should be simply written as #00f. Obviously, for colors that require more precision, all six characters should be used. For example, a light shade of grayish beige: #f9f9f0.
</p>

<h4>
<a name="CodeStandards-Background"></a>Background
</h4>

<pre class="brush: php">
    #selector {
    background-color: #fff;
    background-image: url(../images/file.png);
    background-repeat: repeat-x;
    background-attachment: fixed;
    background-position: left bottom;
}
</pre>
<h4>
<a name="CodeStandards-Border"></a>Border
</h4>

<p>
In general, border should be a single line declaration, assuming that the values of the border are the same on all sides of the element. The order in which values are declared are: width, style, and color.
</p>

<pre class="brush: php">
    #selector {
    border-color: #fff #999 #666 #ccc;
    border-style: solid dashed dotted double;
    border-width: 1px 2px 3px 4px;
}
</pre>

<pre class="brush: php">
    #selector {
    border-top-color: #fff;
    border-right-color: #999;
    border-bottom-color: #666;
    border-left-color: #ccc;
    border-top-style: solid;
    border-right-style: dashed;
    border-bottom-style: dotted;
    border-left-style: double;
    border-top-width: 1px;
    border-right-width: 2px;
    border-bottom-width: 3px;
    border-left-width: 4px;
}
</pre>
<h4>
<a name="CodeStandards-Font"></a>Font
</h4>

<p>
Not to be confused with the inadvisable <font>tag, the CSS font property can be written in a few different ways. The shorthand property puts all the aspects of the font into a single declaration, whereas the longhand splits it out over several lines. While the contrast between methods is not as stark as with that of the border property, there is still space to be saved by using shorthand. While line-height can be defined within the scope of the font declaration, but when written in longhand it has its own unique property.</font>
</p>

<p>
<font>Note: Times New Roman is encapsulated in quotes, because the font name itself contains spaces.</font>
</p>

<pre class="brush: php">
<font>    #selector {
    font-style: italic;
    font-variant: small-caps;
    font-weight: bold;
    font-size: 15px;
    line-height: 1.5;
    font-family: Cambria, 'Times New Roman', sans-serif;
}
    </font>
</pre>
<h4>
<font><a name="CodeStandards-Longhand"></a>Longhand</font>
</h4>

<p>
<font>When overriding only parts of a style, longhand declaration is preferred. This way, by sticking to shorthand for initial style declarations, anytime we see a longhand declaration used, we know that we are specifically overriding only a very precise part of an overall style, thereby leaving other aspects unaffected.</font>
</p>

<pre class="brush: php">
<font>    var test_1 = 'true';
var test_2 = 0;
if (test_1 == true) {
    // Code here will run.
    // But it shouldn't.
}
if (test_1 === true) {
    // Code here won't run.
    // Correct behavior.
}
if (test_2 != false) {
    // Code here won't run.
    // But it should.
}
if (test_2 !== false) {
    // Code here will run.
    // Correct behavior.
}
    </font>
</pre>
<p>
<font>As you can see in the example above, simply using == and != is insufficient because it makes for potentially unpredictable results. Therefore, the stricter comparison operators should always be used. There is never a good reason to use the lesser form of comparison operators. To simply for the existence of elements in the DOM, there is an even more abbreviated way, that leaves no room for ambiguity. If you are unsure if certain elements will be present in an HTML page, use one of the following techniques.</font>
</p>

<pre class="brush: php">
<font>    
for (var i=0, j=arr.length; i&lt;j; i++) {
    // Do something.
}
    </font>
</pre>

<pre class="brush: php">
<font>    var my_html = '&lt;img class="photo" src="path/file.jpg" alt="Text" /&gt;';
    </font>
</pre>

<pre class="brush: php">
<font>    (function() {
    var first_variable = 'value 1';
    var second_variable = 'value 2';
    function first_func() {
        // Do something.
    }
    function second_func() {
        // Do something.
    }
})();
    </font>
</pre>
<h3>
<font><a name="CodeStandards-Objects&amp;Arrays"></a>Objects &amp; Arrays</font>
</h3>

<p>
<font>Objects can be thought of as tiered variables that contain multiple attributes. Similarly, an array could be described as a list of data that all share common characteristics. The following code snippets show examples of objects and arrays, and the different ways in which they can be defined. Note that values such as John Doe's age and marital status do not have quotation marks around them. This is because age is truely numerical, and true is a Boolean value.</font>
</p>

<p>
<font>Note also that the commas are before the variable or method declaration. This prevents errors with trailing commas in IE and other browsers.</font>
</p>

<p>
<font>Objects (and arrays) are an important part of JSON - JavaScript Object Notation, which is a platform and language independent way of transmitting data, used as an alternative to XML.</font>
</p>

<pre class="brush: php">
<font>    /*
Could also be written:
var john_doe = new Object();
*/
var john_doe = {};
john_doe.first_name = 'John';
john_doe.last_name = 'Doe';
john_doe.job = 'Everyman Representative';
john_doe.email = 'john.doe@example.com';
john_doe.married = true;
john_doe.age = 30;
    </font>
</pre>

<pre class="brush: php">
<font>    /*
Could also be written:
var doe_family = new Array();
*/
var doe_family = [];
doe_family[0] = 'John';
doe_family[1] = 'James';
doe_family[2] = 'Jane';
doe_family[3] = 'Jenny';
doe_family[4] = 'Jared';
doe_family[5] = 'Jerome';
    </font>
</pre>
<h2>
<font><a name="CodeStandards-PHP"></a>PHP</font>
</h2>

<h3>
<font><a name="CodeStandards-General"></a>General</font>
</h3>

<ul>
<li>
<font>Beginning brackets do NOT linebreak. They start one space after the end parenthesis, as according to traditional Unix policy.</font>
</li>

<li>
<font>Do not do any real logic in object constructors. Create class methods to do so.
<br />
null, true and false should always be lowercase.</font>
</li>

<li>
<font>Avoid embedded assignments (ex: $d = ($a = $b + $c) is bad).</font>
</li>

<li>
<font>Never use extract().</font>
</li>

<li>
<font>Avoid using global variables if at all possible.</font>
</li>

<li>
<font>Document EVERYTHING.</font>
</li>
</ul>

<h3>
<font><a name="CodeStandards-Parenthesis"></a>Parenthesis</font>
</h3>

<ul>
<li>
<font>Do not put parenthesis next to keywords. Put a space between.</font>
</li>

<li>
<font>Do put parenthesis next to function names.</font>
</li>

<li>
<font>Do not use parenthesis in return statements when it's not necessary. Example:</font>

<pre class="brush: php">
<font>    class modFactor {
    public $publicVar;
    private $_privateVar;
    private function _privateFunc() { }
    public function publicFunc() { }
}
        </font>
</pre>
</li>
</ul>

<h3>
<font><a name="CodeStandards-Variables"></a>Variables</font>
</h3>

<p>
<font>Note these are not function arguments.</font>
</p>

<ul>
<li>
<font>Use all lowercase letters.</font>
</li>

<li>
<font>Separate words with the underscore.</font>
</li>
</ul>

<h3>
<font><a name="CodeStandards-FunctionArgumentsandClassVariables"></a>Function Arguments and Class Variables</font>
</h3>

<ul>
<li>
<font>The first letter is lowercase, rest are camelCase. Example:</font>

<pre class="brush: php">
<font>    $_lang['chunk_create_text'] = 'Test';
        </font>
</pre>
</li>
</ul>

<h3>
<font><a name="CodeStandards-Constants"></a>Constants</font>
</h3>

<ul>
<li>
<font>Constants must be in all UPPERCASE letters.</font>
</li>

<li>
<font>Use only if absolutely necessary.</font>
</li>
</ul>

<h3>
<font><a name="CodeStandards-FileStructure"></a>File Structure</font>
</h3>

<ul>
<li>
<font>Always name PHP class files in name.class.php format.</font>
</li>
</ul>

<h3>
<font><a name="CodeStandards-Prefixing"></a>Prefixing</font>
</h3>

<ul>
<li>
<font>Lexicon strings for Components need to be prefixed:</font>
</li>
</ul>

<pre class="brush: php">
<font>    UPDATE `mydatabase`.`mytable`
SET `name` = "Johnny"
WHERE `id` = 123;
</font>
</pre>
<figure class="code">
<figcaption>
<font>"Incorrect"</font>
</figcaption>

<pre class="brush: php">
<font>    update mydatabase.mytable set name='Johnny' where id=12
</font>
</pre>
</figure>