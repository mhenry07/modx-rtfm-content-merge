<div>
<ul>
<li>
<a href="#MODExtMODxObject-TheMODxJSObject">The MODx JS Object</a>
</li>

<li>
<a href="#MODExtMODxObject-CustomClassVariables">Custom Class Variables</a>
<ul>
<li>
<a href="#MODExtMODxObject-MODx.request">MODx.request</a>
</li>

<li>
<a href="#MODExtMODxObject-MODx.config">MODx.config</a>
<ul>
<li>
<a href="#MODExtMODxObject-OtherVariables">Other Variables</a>
</li>
</ul>
</li>

<li>
<a href="#MODExtMODxObject-MODx.action">MODx.action</a>
</li>

<li>
<a href="#MODExtMODxObject-MODx.version">MODx.version</a>
</li>

<li>
<a href="#MODExtMODxObject-MODx.user">MODx.user</a>
</li>

<li>
<a href="#MODExtMODxObject-MODx.perm">MODx.perm</a>
</li>
</ul>
</li>

<li>
<a href="#MODExtMODxObject-CustomMethods">Custom Methods</a>
<ul>
<li>
<a href="#MODExtMODxObject-MODx.load">MODx.load</a>
</li>

<li>
<a href="#MODExtMODxObject-MODx.clearCache">MODx.clearCache</a>
</li>

<li>
<a href="#MODExtMODxObject-MODx.releaseLock">MODx.releaseLock</a>
</li>

<li>
<a href="#MODExtMODxObject-MODx.sleep">MODx.sleep</a>
</li>

<li>
<a href="#MODExtMODxObject-MODx.logout">MODx.logout</a>
</li>

<li>
<a href="#MODExtMODxObject-MODx.loadHelpPane">MODx.loadHelpPane</a>
</li>

<li>
<a href="#MODExtMODxObject-MODx.preview">MODx.preview</a>
</li>

<li>
<a href="#MODExtMODxObject-MODx.isEmpty">MODx.isEmpty</a>
</li>

<li>
<a href="#MODExtMODxObject-MODx.debug">MODx.debug</a>
</li>
</ul>
</li>
</ul>
</div>

<h2 id="MODExtMODxObject-TheMODxJSObject">
The MODx JS Object
</h2>

<p>
MODExt comes with a global MODx JS object on each manager page. This object has a few custom methods that can be executed from any custom manager page using MODExt, and also sets up some default settings and customizations.
</p>

<h2 id="MODExtMODxObject-CustomClassVariables">
Custom Class Variables
</h2>

<p>
The following variables are accessible from the MODx JS object:
</p>

<h3 id="MODExtMODxObject-MODx.request">
MODx.request
</h3>

<p>
This is a JS object that contains all the current GET parameters for the page. Example:
</p>

<pre class="brush: php">
var id = MODx.request.id;
</pre>
<h3 id="MODExtMODxObject-MODx.config">
MODx.config
</h3>

<p>
This object contains all the active System Settings in MODX by key:
</p>

<pre class="brush: php">
var tpl = MODx.config.default_template;
</pre>
<h4 id="MODExtMODxObject-OtherVariables">
Other Variables
</h4>

<p>
There are a few other variables available on the MODx.config object that are not <a href="/display/revolution20/System+Settings" title="System Settings">System Settings</a>:
</p>

<table>
<tbody>
<tr>
<th>
Key
</th>
<th>
Description
</th>
</tr>

<tr>
<td>
base_url
</td>
<td>
The base URL for the MODX site and/or active context.
</td>
</tr>

<tr>
<td>
connectors_url
</td>
<td>
The URL to the connectors directory.
</td>
</tr>

<tr>
<td>
manager_url
</td>
<td>
The URL to the manager.
</td>
</tr>

<tr>
<td>
http_host
</td>
<td>
The HTTP host variable for the active context.
</td>
</tr>

<tr>
<td>
site_url
</td>
<td>
The full Site URL for the active context.
</td>
</tr>

<tr>
<td>
custom_resource_classes
</td>
<td>
An array of custom Resource classes pulled from the System Setting custom_resource_classes
</td>
</tr>
</tbody>
</table>

<h3 id="MODExtMODxObject-MODx.action">
MODx.action
</h3>

<p>
This object contains a map of all the modAction objects (or MODX manager controllers), mapped by their controller to their ID:
</p>

<pre class="brush: php">
var actionId = MODx.action['resource/create'];
</pre>
<p>
As of MODX 2.2, the non-core Actions are prefixed with their namespace. Prior to 2.2 it would just be the action controller. For example a "controllers/index" action in a "mycomponent" namespace would be retrievable using the following in 2.2 and up:
</p>

<pre class="brush: php">
var actionId = MODx.action['mycomponent:controllers/index'];
</pre>
<h3 id="MODExtMODxObject-MODx.version">
MODx.version
</h3>

<p>
Contains MODX version information, with the following attributes:
</p>

<table>
<tbody>
<tr>
<th>
Key
</th>
<th>
Example
</th>
</tr>

<tr>
<td>
version
</td>
<td>
2
</td>
</tr>

<tr>
<td>
major_version
</td>
<td>
1
</td>
</tr>

<tr>
<td>
minor_version
</td>
<td>
0
</td>
</tr>

<tr>
<td>
patch_level
</td>
<td>
pl
</td>
</tr>

<tr>
<td>
code_name
</td>
<td>
Revolution
</td>
</tr>

<tr>
<td>
distro
</td>
<td>
<input type="text" name="variableValues.traditional" size="12" onkeyup="updateOthers(this)" />&nbsp;<span class="templateparameter">(traditional)</span>
</td>
</tr>

<tr>
<td>
full_version
</td>
<td>
2.1.0-pl
</td>
</tr>

<tr>
<td>
full_appname
</td>
<td>
MODX Revolution 2.1.0-pl (traditional)
</td>
</tr>
</tbody>
</table>

<p>
Example:
</p>

<pre class="brush: php">
var fv = MODx.version.full_version;
</pre>
<h3 id="MODExtMODxObject-MODx.user">
MODx.user
</h3>

<p>
This object will contain the two following properties for the currently logged-in manager user:
</p>

<table>
<tbody>
<tr>
<td>
MODx.user.id
</td>
<td>
The ID of the user.
</td>
</tr>

<tr>
<td>
MODx.user.username
</td>
<td>
The username of the user.
</td>
</tr>
</tbody>
</table>

<pre class="brush: php">
var userId = MODx.user.id;
</pre>
<h3 id="MODExtMODxObject-MODx.perm">
MODx.perm
</h3>

<p>
This will contain the following permissions should they be granted to the user (they will not exist if the user does not have the permission):
</p>

<table>
<tbody>
<tr>
<th>
Name
</th>
<th>
Description
</th>
</tr>

<tr>
<td>
MODx.perm.resource_tree
</td>
<td>
To view the Resources tree.
</td>
</tr>

<tr>
<td>
MODx.perm.element_tree
</td>
<td>
To view the Elements tree.
</td>
</tr>

<tr>
<td>
MODx.perm.file_tree
</td>
<td>
To view the Files tree.
</td>
</tr>

<tr>
<td>
MODx.perm.file_upload
</td>
<td>
To be able to upload files.
</td>
</tr>

<tr>
<td>
MODx.perm.file_manager
</td>
<td>
To use the MODX file browser.
</td>
</tr>

<tr>
<td>
MODx.perm.new_chunk
</td>
<td>
To create a new Chunk.
</td>
</tr>

<tr>
<td>
MODx.perm.new_plugin
</td>
<td>
To create a new Plugin.
</td>
</tr>

<tr>
<td>
MODx.perm.new_snippet
</td>
<td>
To create a new Snippet.
</td>
</tr>

<tr>
<td>
MODx.perm.new_template
</td>
<td>
To create a new Template.
</td>
</tr>

<tr>
<td>
MODx.perm.new_tv
</td>
<td>
To create a new Template Variable.
</td>
</tr>

<tr>
<td>
MODx.perm.directory_create
</td>
<td>
To be able to create a directory on the filesystem.
</td>
</tr>
</tbody>
</table>

<pre class="brush: php">
if (MODx.perm.file_upload) { /* ...code... */ }
</pre>
<h2 id="MODExtMODxObject-CustomMethods">
Custom Methods
</h2>

<p>
The MODx object also has quite a few custom methods available to it:
</p>

<h3 id="MODExtMODxObject-MODx.load">
MODx.load
</h3>

<p>
This method will create a new object of any specified xtype and passed in configuration parameters. Example:
</p>

<pre class="brush: php">
var w = MODx.load({
  xtype: 'modx-window-namespace-create'
  ,blankValues: true
});
w.setValues({ name: 'My Namespace' });
w.show();
</pre>
<p>
Any defined class that has a registered xtype can be loaded from this method.
</p>

<h3 id="MODExtMODxObject-MODx.clearCache">
MODx.clearCache
</h3>

<p>
This fires up the console that clears the MODX cache. It will also fire the 'beforeClearCache' and 'afterClearCache' events on the MODx object. If the System Setting <a href="/display/revolution20/clear_cache_refresh_trees" title="clear_cache_refresh_trees">clear_cache_refresh_trees</a> is set to 1, it will also refresh all the active left-hand trees.
</p>

<h3 id="MODExtMODxObject-MODx.releaseLock">
MODx.releaseLock
</h3>

<p>
This will release the lock on the current active Resource. This method should not be fired on non-Resource editing pages. It will fire the 'beforeReleaseLocks' and 'afterReleaseLocks' events on the MODx object.
</p>

<h3 id="MODExtMODxObject-MODx.sleep">
MODx.sleep
</h3>

<p>
This method will cause JavaScript to sleep (or halt) for a specified number of seconds:
</p>

<pre class="brush: php">
MODx.sleep(3); /* sleep for 3 seconds */
</pre>
<h3 id="MODExtMODxObject-MODx.logout">
MODx.logout
</h3>

<p>
This method will automatically logout the active manager user. It fires the 'beforeLogout' and 'afterLogout' events on the MODx object. If both events are successful, it will then redirect the user to the login screen.
</p>

<h3 id="MODExtMODxObject-MODx.loadHelpPane">
MODx.loadHelpPane
</h3>

<p>
This will load the current Help screen for the active page. Normally this is set by default on the modAction record for the page, and its URL can be found by the MODx.config.help_url property. You can, however, override this to fire up any URL into the panel:
</p>

<pre class="brush: php">
/* show the modx.com site in the Help modal */
MODx.config.help_url = 'http://modx.com/';
MODx.loadHelpPane();
</pre>
<h3 id="MODExtMODxObject-MODx.preview">
MODx.preview
</h3>

<p>
Loads the current MODX site for the active Context.
</p>

<h3 id="MODExtMODxObject-MODx.isEmpty">
MODx.isEmpty
</h3>

<p>
Checks to see if the specified variable is "empty" (in the PHP sense). This means it is either:
</p>

<ul>
<li>false, 'false', or 'FALSE'
</li>

<li>0 or '0'
</li>

<li>'' (blank string)
</li>

<li>null
</li>

<li>undefined
</li>
</ul>

<h3 id="MODExtMODxObject-MODx.debug">
MODx.debug
</h3>

<p>
(2.1+ only)
</p>

<p>
This will send off a debug message if and only if the MODX <a href="/display/revolution20/Settings" title="Settings">System Setting</a> <a href="/display/revolution20/ui_debug_mode" title="ui_debug_mode">ui_debug_mode</a> is set to Yes/1. The debug message will use console.log to output to the console. This can be useful to add debugging and assertions to your code without breaking it in production sites (which would presumably have <a href="/display/revolution20/ui_debug_mode" title="ui_debug_mode">ui_debug_mode</a> off).
</p>