<h2>
<a name="TemplatingYourSnippets-TemplatingSnippets" id="TemplatingYourSnippets-TemplatingSnippets"></a>Templating Snippets
</h2>

<p>
One of the best practices in Snippet design is to make sure that you never write HTML directly in the Snippet, but template out the HTML into Chunks. This tutorial shows you how to do that in a Snippet.
</p>

<div>
<ul>
<li>
<a href="revolution/2.x/developing-in-modx/basic-development/snippets/templating-your-snippets#TemplatingYourSnippets-TemplatingSnippets">Templating Snippets</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href="revolution/2.x/developing-in-modx/basic-development/snippets/templating-your-snippets#TemplatingYourSnippets-OurInitialSnippet">Our Initial Snippet</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/basic-development/snippets/templating-your-snippets#TemplatingYourSnippets-TemplatingtheSnippet">Templating the Snippet</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/basic-development/snippets/templating-your-snippets#TemplatingYourSnippets-AddingARowClass">Adding A Row Class</a>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/basic-development/snippets/templating-your-snippets#TemplatingYourSnippets-PassingaCustomID">Passing a Custom ID</a>
</li>
</ul>
</li>

<li>
<a href="revolution/2.x/developing-in-modx/basic-development/snippets/templating-your-snippets#TemplatingYourSnippets-SeeAlso">See Also</a>
</li>
</ul>
</div>

<h3>
<a name="TemplatingYourSnippets-OurInitialSnippet" id="TemplatingYourSnippets-OurInitialSnippet"></a>Our Initial Snippet
</h3>

<p>
Let's take a case scenario; say you want to iterate across the published, non-deleted Resources that are children of the Resource with ID 390, sorted by menuindex, and then output them as LI tags with the pagetitle and a link to click them.
</p>

<p>
Go ahead and create a snippet called 'ResourceLister', and put this inside:
</p>

<pre class="brush: php">
    &lt;li&gt;&lt;a href="[[~[[+id]]]]"&gt;[[+pagetitle]]&lt;/a&gt;&lt;/li&gt;

    
</pre>
<p>
Basically, we make an LI tag, and put some placeholders were our content was. We have available any field in the Resource, and here we're just using the ID and pagetitle fields. The [[~ tells MODx to make a link from the ID passed in the [[+id]] property. Now let's add a default property to the snippet, called 'tpl', to the top of our snippet code:
</p>

<pre class="brush: php">
    foreach ($resources as $resource) {
   $resourceArray = $resource-&gt;toArray();
   $output .= $modx-&gt;getChunk($tpl,$resourceArray);
}

    
</pre>
<p>
The code first turns the modResource object into an array of field=name pairs (ie, $resourceArray['pagetitle'] is the pagetitle) via the toArray() method. Then, we use $modx-&gt;getChunk() to pass our tpl Chunk and the resource array into it as properties. MODx parses the chunk, replaces the properties, and returns us some content.
</p>

<p>
An alternative and slightly faster (especially helpful when looping through a big xPDO result) but also a bit longer way to do the same would be
</p>

<pre class="brush: php">
    [[!ResourceLister? &amp;tpl=`MyOwnChunk`]]

    
</pre>
<p>
Meaning they can template their results however they want - using LIs, or table rows, or whatever! You've now created a flexible, powerful snippet. The available placeholders depend on what array is passed to $modx-&gt;getChunk(); or $tpl-&gt;process() methods. In this example the available placeholders would be all default fields (no TVs!) of a resource like for example&nbsp;[[+pagetitle]],&nbsp;[[+id]] or&nbsp;[[+content]].
</p>

<h3>
<a name="TemplatingYourSnippets-AddingARowClass" id="TemplatingYourSnippets-AddingARowClass"></a>Adding A Row Class
</h3>

<p>
What if we want the user to be able to specify a CSS class for each LI row, but not have to make their own custom chunk? Simple, we just add a default property 'rowCls' to our snippet code at the top, below our first getOption call:
</p>

<pre class="brush: php">
    &lt;li class="[[+rowCls]]"&gt;&lt;a href="[[~[[+id]]]]"&gt;[[+pagetitle]]&lt;/a&gt;&lt;/li&gt;

    
</pre>
<p>
And finally, change our foreach loop to this:
</p>

<pre class="brush: php">
    $id = (int)$modx-&gt;getOption('id',$scriptProperties,390);

    
</pre>
<p>
Basically, allow the user to override the parent ID for the Snippet - to say Resource 123, with an &amp;id=`123` property - in their snippet call. But we want it to default to 390. And then we'll change the getChildIds line to this:
</p>

<pre class="brush: php">
    $tpl = $modx-&gt;getOption('tpl',$scriptProperties,'ResourceItem');
$id = (int)$modx-&gt;getOption('id',$scriptProperties,390);
$rowCls = $modx-&gt;getOption('rowCls',$scriptProperties,'resource-item');

$c = $modx-&gt;newQuery('modResource');
$c-&gt;where(array(
  'published' =&gt; true,
  'deleted' =&gt; false,
));
$children = $modx-&gt;getChildIds($id);
if (count($children) &gt; 0) {
    $c-&gt;where(array(
        'id:IN' =&gt; $children,
    ));
}
$c-&gt;sortby('menuindex','ASC');
$resources = $modx-&gt;getCollection('modResource',$c);

$output = '';
foreach ($resources as $resource) {
    $resourceArray = $resource-&gt;toArray();
    $resourceArray['cls'] = $rowCls;
    $output .= $modx-&gt;getChunk($tpl,$resourceArray);
}
return $output;

    
</pre>
<h2>
<a name="TemplatingYourSnippets-SeeAlso" id="TemplatingYourSnippets-SeeAlso"></a>See Also
</h2>