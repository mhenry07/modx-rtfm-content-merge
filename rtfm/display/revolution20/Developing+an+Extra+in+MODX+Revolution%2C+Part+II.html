<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
            <title>Developing an Extra in MODX Revolution, Part II - MODx Revolution 2.x - MODX Documentation</title>
    
        

                        
    

            
<meta id="confluence-context-path" name="confluence-context-path" content="">
<meta id="atlassian-token" name="atlassian-token" content="kK-U55C3Nx">
<meta id="confluence-space-key" name="confluence-space-key" content="revolution20">

<script type="text/javascript">
    // Deprecated global variables. To be removed in a future version of Confluence.
    var contextPath = '';
</script>

    

<!-- include system css resources -->
<link type="text/css" rel="stylesheet" href="/s/1911/69/2/_/download/superbatch/css/batch.css" media="all">
<!--[if IE]>
<link type="text/css" rel="stylesheet" href="/s/1911/69/2/_/download/superbatch/css/batch.css?ieonly=true" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="/s/1911/69/2/_/download/superbatch/css/batch.css?media=print" media="print">
<link type="text/css" rel="stylesheet" href="/s/1911/69/1.20/_/download/batch/com.atlassian.confluence.plugins.pagetree:pagetree-resources/com.atlassian.confluence.plugins.pagetree:pagetree-resources.css" media="all">
<link type="text/css" rel="stylesheet" href="/s/1911/69/1.0/_/download/batch/confluence.web.resources:view-comment/confluence.web.resources:view-comment.css" media="all">
<!--[if IE]>
<link type="text/css" rel="stylesheet" href="/s/1911/69/1.0/_/download/batch/confluence.web.resources:view-comment/confluence.web.resources:view-comment.css?ieonly=true" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="/s/1911/69/1.9.3/_/download/batch/confluence.macros.advanced:fancy-box/confluence.macros.advanced:fancy-box.css" media="all">
<link type="text/css" rel="stylesheet" href="/s/1911/69/1.0.8/_/download/batch/com.atlassian.confluence.plugins.drag-and-drop:support/com.atlassian.confluence.plugins.drag-and-drop:support.css" media="all">
<link type="text/css" rel="stylesheet" href="/s/1911/69/1.0/_/download/resources/confluence.web.resources:aui-forms/confluence-forms.css" media="all">
<!--[if IE]>
<link type="text/css" rel="stylesheet" href="/s/1911/69/1.0/_/download/batch/confluence.web.resources:aui-forms/confluence.web.resources:aui-forms.css?ieonly=true" media="all">
<![endif]-->

<!-- end system css resources -->

    <link rel="stylesheet" href="/s/1911/69/6/_/styles/combined.css?spaceKey=revolution20" type="text/css">

    <meta name="confluence-request-time" content="1381731556121">

<meta name="loggedInUsername" content="">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="icon" type="image/png" href="/s/1911/69/_/images/logo/confluence_16.png">

<link rel="search" type="application/opensearchdescription+xml" href="/opensearch/osd.action" title="MODX Documentation"/>

        <!-- include system javascript resources -->
                        
    
    <script type="text/javascript" src="/s/1911/69/2/_/download/superbatch/js/batch.js" ></script>
<script type="text/javascript" src="/s/1911/69/1.20/_/download/batch/com.atlassian.confluence.plugins.pagetree:pagetree-resources/com.atlassian.confluence.plugins.pagetree:pagetree-resources.js" ></script>
<script type="text/javascript" src="/s/1911/69/1.9.3/_/download/batch/confluence.macros.advanced:fancy-box/confluence.macros.advanced:fancy-box.js" ></script>
<script type="text/javascript" src="/s/1911/69/1.9.3/_/download/batch/confluence.macros.advanced:thumbnail-images/confluence.macros.advanced:thumbnail-images.js" ></script>
<script type="text/javascript" src="/s/1911/69/3.3/_/download/batch/com.atlassian.confluence.plugins.fixedwidth-theme:fixedwidth-resources/com.atlassian.confluence.plugins.fixedwidth-theme:fixedwidth-resources.js" ></script>
<script type="text/javascript" src="/s/1911/69/1.0.8/_/download/batch/com.atlassian.confluence.plugins.drag-and-drop:support/com.atlassian.confluence.plugins.drag-and-drop:support.js" ></script>
<script type="text/javascript" src="/s/1911/69/1.0.8/_/download/batch/com.atlassian.confluence.plugins.drag-and-drop:drag-and-drop-for-view-content/com.atlassian.confluence.plugins.drag-and-drop:drag-and-drop-for-view-content.js" ></script>
<script type="text/javascript" src="/s/1911/69/1.2/_/download/batch/com.atlassian.confluence.plugins.doctheme:splitter/com.atlassian.confluence.plugins.doctheme:splitter.js" ></script>
<script type="text/javascript" src="/s/1911/69/1.0/_/download/batch/legacy.confluence.web.resources:prototype/legacy.confluence.web.resources:prototype.js" ></script>

    <!-- end system javascript resources -->

    <link type="text/css" rel="stylesheet" href="http://misc.modx.com/confluence/docs.css" />
<link type="text/css" rel="stylesheet" href="http://misc.modx.com/confluence/syntaxhighlighter/css/all.css" />
<!--<script type="text/javascript" src="http://misc.modx.com/js/jquery-1.3.2.min.js"></script>-->
<script type="text/javascript" src="http://misc.modx.com/confluence/syntaxhighlighter/js/all.js"></script>
<script type="text/javascript" src="http://misc.modx.com/confluence/loadcode.js"></script>
<link type="text/css" rel="stylesheet" href="http://misc.modx.com/confluence/promo/ad.css" />

    
    <link rel="canonical" href="http://oldrtfm.modx.com/display/revolution20/Developing+an+Extra+in+MODX+Revolution%2C+Part+II">
    <link rel="shortlink" href="http://oldrtfm.modx.com/x/GQAGAg">
    <meta name="wikilink" content="[revolution20:Developing an Extra in MODX Revolution, Part II]">

</head>

<body             onload="placeFocus()"
     id="com-atlassian-confluence" class="theme-documentation ">
<div id="full-height-container">
<!-- CODE FOR AD THAT SEEMS TO BE INSERTABLE DIRECTLY AFTER OPEN BODY TAG IN CONFLUENCE THEME ADMIN -->
<!--<a href="https://modxcloud.com/signup/lab-account.html?utm_source=rtfm&utm_medium=banner&utm_campaign=one_percent%2B" class="modx-cloud-link">
    <div class="modx-cloud-ad-wrap">
        <div class="modx-cloud-ad">
            <div class="logo-wrap">
                <img src="http://misc.modx.com/confluence/promo/modx-cloud-logo.png" alt="MODX Cloud" width="161" height="40">
            </div>
            <p>The Most Productive MODX Learning Playground Ever</p>
            <span class="faux-btn">
                Claim Free Lab Account
            </span>

        </div>
    </div>
</a>-->
<!-- END OF AD -->

<div class="editors_note" style="background-color:#ff9a91;border: 1px solid red; padding:5px;color:black;">
    <strong>Important Note:</strong> This is an archive of the official MODX Documentation. Please do not edit or make changes here.  The current documentation is located at <a href="rtfm.modx.com">rtfm.modx.com</a>.
</div>


<fieldset class="hidden parameters">
    <input type="hidden" id="statusDialogHeading" value="What are you working on?">
    <input type="hidden" id="statusDialogAccessibilityLabel" value="Enter your status (140 character limit)">
    <input type="hidden" id="statusDialogLatestLabel" value="Last update:">
    <input type="hidden" id="statusDialogUpdateButtonLabel" value="Update">
    <input type="hidden" id="statusDialogCancelButtonLabel" value="Cancel">
</fieldset>

<fieldset class="hidden parameters">
    <input type="hidden" id="globalSettingsAttachmentMaxSize" value="10485760">
    <input type="hidden" id="userLocale" value="en_GB">
    <input type="hidden" id="staticResourceUrlPrefix" value="/s/1911/69/_">
    <input type="hidden" id="contextPath" value="">
</fieldset>

    
<div id="header" class="sectionbottom ">
        <form id="quick-search" class="quick-search" method="get" action="/dosearchsite.action">
        <fieldset>
            <legend>Quick Search</legend>
            <input class="quick-search-query" id="quick-search-query" type="text" accessKey="q" autocomplete="off" name="queryString" size="25" />
            <input class="quick-search-submit" id="quick-search-submit" type="submit" value="Search" />
            <div class="aui-dd-parent quick-nav-drop-down"><!-- Quick nav appears here --></div>
        </fieldset>
        <fieldset class="hidden parameters">
            <input type="hidden" id="quickNavEnabled" value="true" />
                    </fieldset>
    </form>
    <ul id="header-menu-bar" class="ajs-menu-bar">
                    
        
            <li class="normal ajs-menu-item">
        <a id="browse-menu-link" class="browse trigger ajs-menu-title" href="#"><span><span>Browse</span></span></a>         <div class="hidden ajs-drop-down">
                        <ul  id="browse-menu-link-leading"                 class="section-leading first">
                                        <li>
    
        
    
    <a  id="space-pages-link" href="/pages/listpages.action?key=revolution20"  class=""   title="Attachments: 8">
                   <span>Pages</span></a>        </li>
                                        <li>
    
        
    
    <a  id="space-blogposts-link" href="/pages/viewrecentblogposts.action?key=revolution20"  class=""   title="Attachments: 8">
                   <span>Blog</span></a>        </li>
                                        <li>
    
        
    
    <a  id="space-labels-link" href="/labels/listlabels-heatmap.action?key=revolution20"  class=""   title="Attachments: 8">
                   <span>Labels</span></a>        </li>
                                        <li>
    
        
    
    <a  id="space-attachments-link" href="/spaces/listattachmentsforspace.action?key=revolution20"  class=""   title="Attachments: 8">
                   <span>Attachments</span></a>        </li>
                                        <li>
    
        
    
    <a  href="/spaces/space-bookmarks.action?spaceKey=revolution20"  class=""   title="Browse bookmarks in the MODx Revolution 2.x space">
                   <span>Bookmarks</span></a>        </li>
                                        <li>
    
        
    
    <a  id="space-mail-link" href="/spaces/viewmailarchive.action?key=revolution20"  class=""   title="Browse bookmarks in the MODx Revolution 2.x space">
                   <span>Mail</span></a>        </li>
                                        <li>
    
        
    
    <a  id="space-advanced-link" href="/spaces/viewspacesummary.action?key=revolution20"  class=""   title="Browse bookmarks in the MODx Revolution 2.x space">
                   <span>Advanced</span></a>        </li>
                            </ul>
                        <ul  id="browse-menu-link-global"                 class="section-global">
                                        <li>
    
            
    
    <a  id="gadget-directory-link" href="#"  class="user-item administration-link"   title="Browse gadgets provided by Confluence">
                   <span>Confluence Gadgets</span></a>        </li>
                            </ul>
                    </div>
    </li>
        
                                                         <li class="ajs-menu-item normal">
        
        
    
    <a  id="login-link" href="/login.action?os_destination=%2Fdisplay%2Frevolution20%2FDeveloping%2Ban%2BExtra%2Bin%2BMODX%2BRevolution%2C%2BPart%2BII"  class="user-item login-link"  >
                   <span>Log In</span></a>        </li>
                                <li class="normal ajs-menu-item">
            <div id="splitter-button" class="hidden" title="Sidebar"></div>
        </li>

    </ul>
    
    
    <ol id="breadcrumbs">
                    
        <li class="first" >
                                    <span><a href="/dashboard.action">Dashboard</a></span>
                </li>
                    
        <li>
                                    <span><a href="/display/revolution20">MODx Revolution 2.x</a></span>
                </li>
                                        <li id="ellipsis" title="    &#8230;
                    Home
             &gt;         Case Studies and Tutorials
        &#8230;
"><span><strong>&#8230;</strong></span></li>
                                    
        <li class="hidden-crumb" >
                                    <span><a href="/display/revolution20/Home">Home</a></span>
                </li>
                                
        <li class="hidden-crumb" >
                                    <span><a href="/display/revolution20/Case+Studies+and+Tutorials">Case Studies and Tutorials</a></span>
                </li>
                    
        <li>
                                    <span><a href="/display/revolution20/Developing+an+Extra+in+MODX+Revolution">Developing an Extra in MODX Revolution</a></span>
                </li>
                    
        <li>
                                    <span>Developing an Extra in MODX Revolution, Part II</span>
                </li>
        </ol>

</div>

    <div id="splitter">
    <div id="splitter-sidebar">

        

                    
    
    

<div class="plugin_pagetree">

                <div id="pagetreesearch">
            <form method="POST" action="/plugins/pagetreesearch/pagetreesearch.action" name="pagetreesearchform">
                                    <input type="hidden" name="ancestorId" value="18678050">
                                <input type="hidden" name="spaceKey" value="revolution20">
                <input type="text"  size="20" name="queryString">
                <input type="submit" value="Search">
            </form>
        </div>
    
        
    <ul class="plugin_pagetree_children_list plugin_pagetree_children_list_noleftspace">
        <div class="plugin_pagetree_children">
        </div>
    </ul>

    <fieldset class="hidden">
        <input type="hidden" name="treeId" value="">
        <input type="hidden" name="treeRequestId" value="/plugins/pagetree/naturalchildren.action?decorator=none&amp;excerpt=false&amp;sort=position&amp;reverse=false&amp;disableLinks=false">
        <input type="hidden" name="treePageId" value="33947673">

        <input type="hidden" name="noRoot" value="false">
        <input type="hidden" name="rootPageId" value="18678050">

        <input type="hidden" name="rootPage" value="">
        <input type="hidden" name="startDepth" value="0">
        <input type="hidden" name="spaceKey" value="revolution20" >

        <input type="hidden" name="i18n-pagetree.loading" value="Loading...">
        <input type="hidden" name="i18n-pagetree.error.permission" value="Unable to load page tree. It seems that you do not have permission to view the root page.">
        <input type="hidden" name="i18n-pagetree.eeror.general" value="There was a problem retrieving the page tree. Please check the server log file for more information.">
        <input type="hidden" name="loginUrl" value="/login.action?os_destination=%2Fdisplay%2Frevolution20%2FDeveloping%2Ban%2BExtra%2Bin%2BMODX%2BRevolution%2C%2BPart%2BII">

                <fieldset class="hidden">
                                                <input type="hidden" name="ancestorId" value="33587481">
                                    <input type="hidden" name="ancestorId" value="18678106">
                                    <input type="hidden" name="ancestorId" value="18678050">
                                    </fieldset>
    </fieldset>
</div>



            </div>
    <div id="splitter-content">

                    <script type="text/javascript" src="/s/1911/69/2/_/download/resources/com.atlassian.confluence.plugins.doctheme:resources/doc-theme.js"></script>
    
            
    
<div id="main" >
    
    
    <div id="navigation" class="content-navigation view">
        <fieldset class="hidden parameters">
            <input type="hidden" id="pageId" value="33947673">
        </fieldset>
        <ul class="ajs-menu-bar">
                                
                        
            <li class="normal ajs-menu-item">
        <a id="action-menu-link" class="action trigger ajs-menu-title" href="#"><span><span>Tools</span></span></a>         <div class="hidden ajs-drop-down">
                        <ul  id="action-menu-link-primary"                 class="section-primary first">
                                        <li>
    
        
    
    <a  id="view-attachments-link" href="/pages/viewpageattachments.action?pageId=33947673"  class="action-view-attachments"  accessKey="a" >
                   <span><u>A</u>ttachments (8)</span></a>        </li>
                                        <li>
    
        
    
    <a  id="action-view-history-link" href="/pages/viewpreviousversions.action?pageId=33947673"  class="action-view-history"  >
                   <span>Page History</span></a>        </li>
                                        <li>
    
        
    
    <a  id="mailPageLink" href="/pages/mailpage/mailpage.action?pageId=33947673"  class=""  >
                    <span>
                <img alt="E-mail" src="/images/icons/mail_content_16.gif" height="16" width="16" title="E-mail">
                E-mail
            </span></a>        </li>
                                        <li>
    
        
    
    <a  id="action-page-permissions-link" href="/pages/viewinfo.action?pageId=33947673"  class="action-page-permissions"  >
                   <span>Restrictions</span></a>        </li>
                            </ul>
                        <ul  id="action-menu-link-secondary"                 class="section-secondary">
                                        <li>
    
        
    
    <a  id="view-page-info-link" href="/pages/viewinfo.action?pageId=33947673"  class="action-view-info"  >
                   <span>Info</span></a>        </li>
                                        <li>
    
        
    
    <a  id="link-to-page-link" href="/pages/viewinfo.action?pageId=33947673"  class=""  >
                   <span>Link to this Page&hellip;</span></a>        </li>
                                        <li>
    
        
    
    <a  id="view-in-hierarchy-link" href="/pages/listpages-dirview.action?key=revolution20&openId=33947673#selectedPageInHierarchy"  class=""  >
                   <span>View in Hierarchy</span></a>        </li>
                                        <li>
    
        
    
    <a  id="action-view-source-link" href="/pages/viewpagesrc.action?pageId=33947673"  class="action-view-source popup-link"  >
                   <span>View Wiki Markup</span></a>        </li>
                            </ul>
                    </div>
    </li>
            </ul>
    </div>

    
    <h1 id="title-heading" class="pagetitle">
                    <a href="/display/revolution20"><img class="logo global custom" src="/download/attachments/9109505/global.logo?version=2&modificationDate=1356105314000" alt=""></a>        
		<span id="title-text">
					            <a href="/display/revolution20/Developing+an+Extra+in+MODX+Revolution%2C+Part+II">Developing an Extra in MODX Revolution, Part II</a>
    				</span>
    </h1>

    

    
    
    
    <div id="content" class="page view">
    



<fieldset id="link-to-page-fields" class="hidden parameters">
    <input type="hidden" id="linkToThisPageHeading" value="Link to this Page">
    <input type="hidden" id="linkToThisPageLink" value="Link">
    <input type="hidden" id="linkToThisPageTinyLink" value="Tiny Link">
    <input type="hidden" id="linkToThisPageWikiMarkup" value="Wiki Markup">
    <input type="hidden" id="linkToThisPageClose" value="Close">
</fieldset>
<fieldset class="hidden parameters">
    <input type="hidden" title="movePageDialogViewPageTitle" value="Move Page &ndash; &#8216;Developing an Extra in MODX Revolution, Part II&#8217;">
    <input type="hidden" title="movePageDialogEditPageTitle" value="Set Page Location">
    <input type="hidden" title="movePageDialogMoveButton" value="Move">
    <input type="hidden" title="movePageDialogOkButton" value="OK">
    <input type="hidden" title="movePageDialogCancelButton" value="Cancel">
    <input type="hidden" title="movePageDialogBrowsePanelTip" value="Click to select the new parent page for this page and its children.">
    <input type="hidden" title="movePageDialogSearchPanel" value="Search">
    <input type="hidden" title="movePageDialogHistoryPanel" value="Recently Viewed">
    <input type="hidden" title="movePageDialogHistoryNoResults" value="There were no recently viewed pages found.">
    <input type="hidden" title="movePageDialogLocationPanel" value="Known Location">
    <input type="hidden" title="movePageDialogLocationNotFound" value="The specified page was not found.">
    <input type="hidden" title="movePageDialogBrowsePanel" value="Browse">
    <input type="hidden" title="movePageDialogPanelLoadErrorMsg" value="Error reading the panel content from the server.">
    <input type="hidden" title="movePageDialogPanelLoadErrorTip" value="You could try reloading the page and launching the dialog again.">
    <input type="hidden" title="movePageDialogPanelLoadErrorStatus" value="HTTP Status">
    <input type="hidden" title="movePageDialogNoSelectionErrorMsg" value="You must make a selection in the tree before you can move the page.">
    <input type="hidden" title="movePageDialogSearchError" value="Failed to retrieve search results from the server.">
    <input type="hidden" title="movePageDialogSearchNoResults" value="There were no pages found containing <b>{0}</b>.">
    <input type="hidden" title="movePageDialogSearchResultCount" value="Showing <b>{0}</b>-<b>{1}</b> of <b>{2}</b> pages containing <b>{3}</b>.">
    <input type="hidden" title="movePageDialogMoveFailed" value="Move failed. There was a problem contacting the server.">
    <input type="hidden" title="movePageDialogCannotChangeSpace" value="You cannot move this page to another space because you do not have permission to remove it from this space.">
    <input type="hidden" title="pageTitle" value="Developing an Extra in MODX Revolution, Part II"/>
    <input type="hidden" title="parentPageTitle" value="Developing an Extra in MODX Revolution"/>
    <input type="hidden" title="fromPageTitle" value=""/>
    <input type="hidden" title="spaceKey" value="revolution20"/>
    <input type="hidden" title="spaceName" value="MODx Revolution 2.x"/>
    <input type="hidden" title="movePageDialogInvalidLocation" value="You cannot move a page to be underneath itself or its children."/>
    <input type="hidden" title="movePageDialogOrderingTitle" value="Page Ordering"/>
    <input type="hidden" title="movePageDialogBackButton" value="Back"/>
    <input type="hidden" title="movePageDialogMoveAndOrderButton" value="Reorder"/>
    <input type="hidden" title="movePageDialogNextButton" value="Move"/>    
</fieldset>

<script type="text/x-template" title="movePageDialog">
    <div class="row information">
        Specify the new parent page for this page and its children by space and title.
    </div>
    <div class="form">
        <fieldset>
            

    <legend class="assistive"><span>Change the Parent Page to a Known Page</span></legend>
            <div class="row">
                <label for="new-space">New space:</label>
                <div class="value new-space-value">
                    <input id="new-space-key" name="new-space-key" type="hidden" value="revolution20">
                                            <span class="space-input">
                            <input id="new-space" name="new-space" value="MODx Revolution 2.x" disabled="disabled">
                        </span>
                        <span class="description warning">You cannot move this page to another space because you do not have permission to remove it from this space.</span>
                                        <div class="new-space-dropdown aui-dd-parent"></div>
                </div>
            </div>
            <div class="row">
                <label for="new-parent-page">New parent page:</label>
                <div class="value new-parent-page-value">
                    <span class="page-input">
                        <input id="new-parent-page" name="new-parent-page" value="Developing an Extra in MODX Revolution">
                    </span>
                    <span class="description">Start typing a page title to see a list of suggestions.</span>
                    <div class="new-parent-page-dropdown aui-dd-parent autocomplete"></div>
                </div>
            </div>
        </fieldset>
    </div>
    <div class="location-info">
        <div class="row">
            <label>Current location:</label>
            <div class="value breadcrumbs-container">
                <div class="breadcrumbs-line">
                    <ul id="current-parent-breadcrumbs" class="breadcrumbs">
                    </ul>
                </div>
            </div>
        </div>
        <div class="row">
            <label>New location:</label>
            <div class="value breadcrumbs-container">
                <div class="breadcrumbs-line">
                    <ul id="new-parent-breadcrumbs" class="breadcrumbs">
                    </ul>
                </div>
            </div>
        </div>
    </div>
</script>
<script type="text/x-template" title="movePageErrors">
    <div id="move-errors" class="hidden warning"></div>
</script>
<script type="text/x-template" title="movePageBreadcrumb">
    <li><a class="{2}" title="{3}" tabindex="-1"><span>{0}</span></a></li>
</script>
<script type="text/x-template" title="movePageBreadcrumbLoading">
    <li class="loading"><span>Loading breadcrumbs&hellip;</span></li>
</script>
<script type="text/x-template" title="movePageBreadcrumbError">
    <li class="warning last"><span>Error retrieving breadcrumbs.</span></li>
</script>
<script type="text/x-template" title="movePageNoMatchingPages">
    <ol><li><span class="warning">No matching pages found.</span></li></ol>
</script>
<script type="text/x-template" title="movePageNoMatchingSpaces">
    <ol><li><span class="warning">No matching spaces found.</span></li></ol>
</script>

<script type="text/x-template" title="movePageSearchPanel">
<div class="row information">
    Search for and select the new parent page for this page and its children.
</div>
<div id="move-page-search-container" class="row">
    <div class="search-form">
        <fieldset>
            

    <legend class="assistive"><span>Search for a New Parent Page</span></legend>
            

    <label  for="move-page-search-query" class="assistive">Search keywords</label>
            <input class="search-query" id="move-page-search-query">
            

    <label  for="move-page-search-space" class="assistive">Search in space</label>
                            <select id="move-page-search-space" class="search-space" disabled="disabled">
                    <option value="revolution20" selected="selected">MODx Revolution 2.x</option>
                </select>
                        <input type="button" value="Search">
                            <div class="description warning">You cannot move this page to another space because you do not have permission to remove it from this space.</div>
                    </fieldset>
    </div>
    <div class="search-results">
    </div>
</div>
</script>
<script type="text/x-template" title="movePageSearchResultsLoading">
    <div class="searching">Searching…</div>
</script>

<script type="text/x-template" title="movePageHistoryPanel">
<div class="row information">
    Select the new parent page for this page and its children from your history.
</div>
<div id="move-page-search-container" class="row">
    <div class="search-results">
    </div>
</div>
</script>
<script type="text/x-template" title="movePageHistoryLoading">
    <div class="searching">Loading…</div>
</script>
<script type="text/x-template" title="movePageBrowsePanel">
    <div class="row information">
        Click to select the new parent page for this page and its children.
    </div>
    <div class="tree"></div>
</script>
<script type="text/x-template" title="movePagePanelLoading">
    <span>Loading…</span>
</script>
<script type="text/x-template" title="movePageBrowsePanelSpace">
    <ul><li id='tree-root-node-item' class='root-node-list-item'><a class='root-node' href='#'>{0}</a></li></ul>
</script>
<script type="text/x-template" title="orderingPagePanel">
<div id="orderingPlaceHolder"></div>
</script>
<script type="text/x-template" title="reorderCheckbox">
<span id="reorderRequirement"><input id="reorderCheck" type="checkbox" name="reorderFlag" title="Choose the position of this page within the list of child pages."/><label for="reorderCheck" title="Choose the position of this page within the list of child pages.">Reorder</label></span>
</script>
<script type="text/x-template" title="move-help-link">
    <div class="dialog-help-link">
            <a href="http://docs.atlassian.com/confluence/docs-33/Moving+a+Page" target="_blank">Help</a>
    </div>
</script>
<script type="text/x-template" title="searchResultsGrid">
    <table>
        <thead>
            <tr class="header">
                <th class="search-result-title">Page Title</th>
                <th class="search-result-space">Space</th>
                <th class="search-result-date">Updated</th>
            </tr>
        </thead>
    </table>
</script>
<script type="text/x-template" title="searchResultsGridCount">
    <p class="search-result-count">{0}</p>
</script>
<script type="text/x-template" title="searchResultsGridRow">
    <tr class="search-result">
        <th class="search-result-title"><a href="{1}" class="content-type-{2}"><span>{0}</span></a></th>
        <td class="search-result-space"><a class="space" href="/display/{4}/" title="{3}">{3}</a></td>
        <td class="search-result-date"><span class="date" title="{6}">{5}</span></td>
    </tr>
</script>
<!-- Start restrictions section -->
<fieldset class="hidden parameters i18n">
        <input type="hidden" id="i18n.page.perms.error.invalid.entity.names" value="Unknown user or group:">
        <input type="hidden" id="i18n.page.perms.dialog.heading" value="Page Restrictions">
        <input type="hidden" id="i18n.page.perms.editing.restricted.to" value="Editing restricted to:">
        <input type="hidden" id="i18n.cancel.name" value="Cancel">
        <input type="hidden" id="i18n.close.name" value="Close">
        <input type="hidden" id="i18n.update.name" value="Save">
</fieldset>

<script type="text/x-template" title="page-permissions-div">
<div id="page-permissions-div">
    <div id="page-permissions-editor-form">

                <div id="page-permissions-error-div" class="hidden">
            <a href="#" id="permissions-error-div-close">Ok</a>
            <div></div>
        </div>

                <div id="page-permissions-type-radios" class="page-permissions-label-rows">
            <div>
                <input id="restrictViewRadio" type="radio" checked="checked" name="pagePermissionTypeRadio" value="view"/>
                <label for="restrictViewRadio">Restrict viewing of this page</label>
                <input id="restrictEditRadio" type="radio" name="pagePermissionTypeRadio" value="edit"/>
                <label for="restrictEditRadio">Restrict editing of this page</label>
            </div>
        </div>
        <div id="page-permissions-input" class="page-permissions-label-rows">
            <div class="page-permissions-label">To:</div>
            <div id="page-permissions-chooser-box">
                                <span id="page-permissions-choose-user" class="ajs-button">
                    



    



<a href="#" id='userpicker-popup-link-image' onClick="var picker = window.open('/spaces/openuserpicker.action?key=revolution20&amp;startIndex=0&amp;onPopupSubmit=AJS.PagePermissions.addUserPermissions', 'EntitiesPicker', 'status=yes,resizable=yes,top=100,left=200,width=700,height=680,scrollbars=yes'); picker.focus(); return false;"><img src="/s/1911/69/_/images/icons/user_16.gif" height=16 width=16 border=0 align="absmiddle"  title="Choose users" /></a>
<a href="#" id='userpicker-popup-link-text' onClick="var picker = window.open('/spaces/openuserpicker.action?key=revolution20&amp;startIndex=0&amp;onPopupSubmit=AJS.PagePermissions.addUserPermissions', 'EntitiesPicker', 'status=yes,resizable=yes,top=100,left=200,width=700,height=680,scrollbars=yes'); picker.focus(); return false;">Person...</a>


                </span>
                <span id="page-permissions-choose-group" class="ajs-button">
                    



    

 

<a href="#" id='grouppicker-popup-link-image' onClick="var picker = window.open('/spaces/opengrouppicker.action?key=revolution20&amp;startIndex=0&amp;actionName=dosearchgroups.action&amp;onPopupSubmit=AJS.PagePermissions.addGroupPermissions', 'EntitiesPicker', 'status=yes,resizable=yes,top=100,left=200,width=580,height=550,scrollbars=yes'); picker.focus(); return false;"><img src="/s/1911/69/_/images/icons/group_16.gif" height=16 width=16 border=0 align="absmiddle"  title="Choose groups" /></a>
<a href="#" id='grouppicker-popup-link-text' onClick="var picker = window.open('/spaces/opengrouppicker.action?key=revolution20&amp;startIndex=0&amp;actionName=dosearchgroups.action&amp;onPopupSubmit=AJS.PagePermissions.addGroupPermissions', 'EntitiesPicker', 'status=yes,resizable=yes,top=100,left=200,width=580,height=550,scrollbars=yes'); picker.focus(); return false;">Group...</a>


                </span>
            </div>
            <div id="page-permissions-input-box">
                                <span>
                    <input type="text" id="page-permissions-names-input" class="input-placeholder" value="Enter user or group name" name="permissionNames" size="30" autocomplete="off"/>
                </span>
                <input
    type="hidden"
                            id="page-permissions-names-hidden"           />                <img height="16px" width="1px" src="/s/1911/69/_/images/border/spacer.gif"/>
                <input type="button" id="add-typed-names" value="Restrict">
            </div>
        </div>
    </div>
    <div id="page-permissions-tables">
        <div id="page-permissions-table-div">
                        <table id="page-permissions-table" class="page-permissions-table">
                <tr id="page-permissions-no-views" class="marker-row">
                    <td colspan="3" class="page-permissions-marker-cell"><span>No view restrictions are defined for this page</span></td>
                </tr>
                <tr id="page-permissions-no-edits" class="marker-row">
                    <td colspan="3" class="page-permissions-marker-cell"><span>No edit restrictions are defined for this page</span></td>
                </tr>
            </table>
        </div>
        <div id="page-inherited-permissions-table-div" class="hidden">
            <span id="page-inherited-permissions-table-desc">
                <a class="icon twisty-closed">Show/Hide</a>
                <a id="toggle-inherited-permissions" title="Click to see inherited restrictions">This page has restricted parent pages. It can only be seen by users who can see those parent pages.</a>
            </span>
            <div id="page-inherited-permissions-tables" class="hidden page-inheritance-togglable"></div>
        </div>
    </div>
</div>
</script>

<script type="text/x-template" title="permissions-row-template">
    <tr class="permission-row">
                                
                <td class="page-permissions-marker-cell" width="20%">
            <span>Viewing restricted to:</span>
        </td>
                <td class="permission-entity" nowrap="true" width="40%">
            <span class="entity-container">
                <img class="permission-entity-picture"/>
                <span class="permission-entity-display-name"></span>
                <span class="permission-entity-name-wrap">&nbsp;(<span class="permission-entity-name"></span>)</span>
            </span>
        </td>
        <td class="permission-detail-column">
            <div class="permission-remove-div">
                <a href="#" class="remove-permission-link">Remove restriction</a>
            </div>
        </td>
    </tr>
</script>
<script type="text/x-template" title="permissions-username-no-suggestion-template">
    <ol>
        <li><a href="#" class="message"><span>No matches</span></a></li>
    </ol>
</script>
<script type="text/x-template" title="page-inherited-permissions-table-div-template">
        <div class="page-inherited-permissions-owner-div">
        <div class="page-inherited-permissions-table-desc">Viewing restrictions apply to “<a></a>”. In order to see “<span></span>”, a user must be in the following list of users and groups:</div>
        <table class="page-permissions-table"></table>
    </div>
</script>
<script type="text/x-template" title="page-restrictions-help-link">
    <div class="dialog-help-link">
            <a href="http://docs.atlassian.com/confluence/docs-33/Page+Restrictions" target="_blank">Help</a>
    </div>
</script>
<!-- End restrictions section -->

        
    
    
        <fieldset class="hidden parameters">
            <input type="hidden" title="parentPageId" value="33587481">
        </fieldset>

        
                            
    

                    

        
        <a href="#page-metadata-end" class="assistive">Skip to end of metadata</a>
<div id="page-metadata-start" class="assistive"></div>

    <div class="page-metadata">
        <ul>
                            <li class="page-metadata-item noprint">
    
            
    
    <a  id="content-metadata-page-restrictions" href="#"  class="page-metadata-icon page-restrictions hidden"   title="Page restrictions apply. Click the lock icon to view or edit the restriction.">
                   <span>Page restrictions apply</span></a>        </li>
                            <li class="page-metadata-item noprint">
    
        
    
    <a  id="content-metadata-attachments" href="/pages/viewpageattachments.action?pageId=33947673&metadataLink=true"  class="page-metadata-icon action-view-attachments"  accessKey="a"  title="Attachments: 8">
                   <span><span class="page-metadata-attachments-text">Attachments:</span><span class="page-metadata-attachments-count">8</span></span></a>        </li>
                        <li class="page-metadata-modification-info">
                                    Added by <a href="/display/~splittingred"
                          class="url fn"
                   >Shaun McCormick</a>, last edited by <a href="/display/~everettg_99"
                          class="url fn"
                   >Everett Griffiths</a> on Jun 25, 2013
                                                                <span class="noprint">&nbsp;(<a id="view-change-link" href="/pages/diffpages.action?pageId=33947673&originalId=46465128">view change</a>)</span>
                                                </li>
                            <li class="show-hide-comment-link">
                    <a id="show-version-comment" class="inline-control-link" href="#">show comment</a>
                    <a id="hide-version-comment" class="inline-control-link" style="display:none;" href="#">hide comment</a>
                </li>
                    </ul>
          <div id="version-comment" class="noteMacro" style="display: none;">
      <strong>Comment:</strong>
      Nevermind.  This page is driving me insane.<br />
  </div>
    </div>


<a href="#page-metadata-start" class="assistive">Go to start of metadata</a>
<div id="page-metadata-end" class="assistive"></div>
        
        <fieldset class="hidden parameters">
                        <input type="hidden" title="browsePageTreeMode" value="view">
        </fieldset>

        <div class="wiki-content">
           <!-- wiki content -->
            <div class="panel" style="border-width: 1px;"><div class="panelContent">
<p>This tutorial is part of a Series:</p>
<ul>
	<li><a href="/display/revolution20/Developing+an+Extra+in+MODX+Revolution" title="Developing an Extra in MODX Revolution">Part I: Getting Started and Creating the Doodles Snippet</a></li>
	<li>Part II: Creating our Custom Manager Page</li>
	<li><a href="/display/revolution20/Developing+an+Extra+in+MODX+Revolution%2C+Part+III" title="Developing an Extra in MODX Revolution, Part III">Part III: Packaging Our Extra</a></li>
</ul>
</div></div>

<div>
<ul>
    <li><a href='#DevelopinganExtrainMODXRevolution%2CPartII-FirstSetupSteps'>First Setup Steps</a></li>
<ul>
    <li><a href='#DevelopinganExtrainMODXRevolution%2CPartII-Namespaces'>Namespaces</a></li>
    <li><a href='#DevelopinganExtrainMODXRevolution%2CPartII-ActionsandMenus'>Actions and Menus</a></li>
    <li><a href='#DevelopinganExtrainMODXRevolution%2CPartII-Lexicons'>Lexicons</a></li>
</ul>
    <li><a href='#DevelopinganExtrainMODXRevolution%2CPartII-SettinguptheControllerswithMODExt'>Setting up the Controllers with MODExt</a></li>
<ul>
    <li><a href='#DevelopinganExtrainMODXRevolution%2CPartII-TheBaseController'>The Base Controller</a></li>
</ul>
    <li><a href='#DevelopinganExtrainMODXRevolution%2CPartII-OurDoodlesCMPPage'>Our Doodles CMP Page</a></li>
<ul>
    <li><a href='#DevelopinganExtrainMODXRevolution%2CPartII-TheSectionJSFile'>The Section JS File</a></li>
    <li><a href='#DevelopinganExtrainMODXRevolution%2CPartII-ThePanelJSFile'>The Panel JS File</a></li>
</ul>
    <li><a href='#DevelopinganExtrainMODXRevolution%2CPartII-TheDoodlesGrid'>The Doodles Grid</a></li>
<ul>
    <li><a href='#DevelopinganExtrainMODXRevolution%2CPartII-HookingUpviaConnectors'>Hooking Up via Connectors</a></li>
    <li><a href='#DevelopinganExtrainMODXRevolution%2CPartII-AddingSearch'>Adding Search</a></li>
    <li><a href='#DevelopinganExtrainMODXRevolution%2CPartII-AddinganUpdateWindow'>Adding an Update Window</a></li>
    <li><a href='#DevelopinganExtrainMODXRevolution%2CPartII-AddingaRemoveContextMenuOption'>Adding a Remove Context Menu Option</a></li>
    <li><a href='#DevelopinganExtrainMODXRevolution%2CPartII-CreatingtheCreateForm'>Creating the Create Form</a></li>
    <li><a href='#DevelopinganExtrainMODXRevolution%2CPartII-AddingInlineEditing'>Adding Inline-Editing</a></li>
</ul>
    <li><a href='#DevelopinganExtrainMODXRevolution%2CPartII-Summary'>Summary</a></li>
</ul></div>

<p>This section will cover creating the Custom Manager Page (CMP) for our Doodles Extra we created in <a href="/display/revolution20/Developing+an+Extra+in+MODX+Revolution" title="Developing an Extra in MODX Revolution">step 1</a>. This includes explaining controllers/connectors/processors, making our Namespace, Action and Menu item, and working with ExtJS to create the UI.</p>

<h2><a name="DevelopinganExtrainMODXRevolution%2CPartII-FirstSetupSteps"></a>First Setup Steps</h2>

<p>We've got our snippet and our basic directory structure. Now we need to setup a few things before we can start developing our Custom Manager Page. The first is our Namespace.</p>

<h3><a name="DevelopinganExtrainMODXRevolution%2CPartII-Namespaces"></a>Namespaces</h3>

<p><a href="/display/revolution20/Namespaces" title="Namespaces">Namespaces</a> in MODX Revolution are basically silos of development in the system. They load the base path for your CMP, and allow MODX to know where to grab the files for it and for Lexicon files (i18n). They allow you to develop and run your Extras without having to modify core MODX files or get in the way of Git/SVN deployments of MODX.</p>

<p>We'll want to create ours. Go ahead and click on the Namespaces submenu item in the System menu:</p>

<p><span class="image-wrap" style=""><img src="/download/attachments/33947673/namespaces-menu.png?version=1&amp;modificationDate=1295880720000" style="border: 0px solid black" /></span></p>

<p>From there, go ahead and click the 'Create New' button above the grid to load a Create Namespace window. Input these values into the form:</p>

<ul>
	<li><b>Name</b> &#45; doodles</li>
	<li><b>Core Path</b> &#45; /www/doodles/core/components/doodles/</li>
	<li><b>Assets Path</b> &#45; /www/doodles/assets/components/doodles/</li>
</ul>


<p>Let's explain. This gives us a Namespace key of 'doodles', which we can reference our Namespace with. Secondly, we're pointing the path to our doodles core directory that we've been developing in. This tells MODX to load the controller files that load the CMP (more on that in a sec) from that directory, which is what we want. When someone else installs this component later, their Namespace path will look like:</p>

<blockquote><p>{core_path}components/doodles/</p></blockquote>

<p>Because that's where we'll be installing the files with the Transport Package. However, setting it to an absolute path in our environment allows us to develop it outside of the MODX webroot.</p>

<p>Likewise the Assets Path allows MODx to find our assets files.</p>

<p>Now you can go to the System Settings, and edit the two settings you added for doodles.core_path and doodles.assets_url and set their Namespace to 'doodles' and their Area Lexicon Entry to 'Doodles'.</p>




<h3><a name="DevelopinganExtrainMODXRevolution%2CPartII-ActionsandMenus"></a>Actions and Menus</h3>

<p>Next, we'll need to create our Actions and Menus for the CMP. What is an "Action" in MODX? Well, it's basically an abstract representation of a Manager page. Each MODX manager page has an Action in the modx_actions table, which can be referenced. This allows you to create any number of "Actions" that can be used as CMPs in the manager.</p>

<p>Load up the Actions page on System &#45;&gt; Actions. This should load 2 trees:</p>

<p><span class="image-wrap" style=""><img src="/download/attachments/33947673/doodles-actions.png?version=1&amp;modificationDate=1295880720000" style="border: 0px solid black" /></span></p>

<p>We'll be first focused on the left-hand tree, which is the tree of Actions. The first level of the tree is all our Namespaces, which show as little computer icons. Below that are all the Actions for that Namespace. Our 'doodles' Namespace shows up there, but it's empty and has no Actions inside it. Let's remedy that. Right-click on the 'doodles' Namespace icon, and click 'Create Action Here'.</p>

<p>That should load a window, in which we'll want to input these values (really only the Namespace and Controller fields matter):</p>

<ul>
	<li><b>Controller</b> &#45; index</li>
	<li><b>Namespace</b> &#45; doodles</li>
	<li><b>Parent Controller</b> &#45; <em>(select "no action")</em></li>
</ul>


<p>Let's explain what each of these fields mean.</p>

<p><b>Controller</b>: This tells MODX where the controller file is at for this Action, relative to the Namespace path, without the .php extension. Our file is going to be at /www/doodles/core/components/doodles/index.class.php. So, minus our Namespace path, that ends up being index.class.php. We drop the .class.php, and we get "index".</p>

<p><b>Namespace</b>: The reference to the Namespace this Action is a part of. This should have automatically been filled in for you.</p>

<p><b>Parent Controller</b>: For hierarchical display, Actions can be structured in tree form. This doesn't affect their behavior at all, and doesn't really concern us, so we'll select No Action.</p>


<p>Great, we've now got ourselves an Action. Now we need to tie that Action to a Menu item, which will show up in our main menu at the top of the manager. 'Menu' objects in MODX allow you to completely rearrange (and hide) menu items in the manager interface, enabling you to completely customize navigation for your MODX installation.</p>

<p>We're going to want to create our Doodles menu item under the 'Components' menu, which is where 3rd Party Extras usually go. We could place it anywhere, but for standards-sake, let's place it under Components. Right-click on the 'Components' tree node in the right-hand tree, and click 'Place Action Here'. That will load a window, which we can fill with these values:</p>

<ul>
	<li><b>Lexicon Key</b> &#45; doodles</li>
	<li><b>Description</b> &#45; doodles.desc</li>
	<li><b>Action</b> &#45; doodles - index</li>
	<li><b>Icon</b> &#45;</li>
	<li><b>Parameters</b> &#45;</li>
	<li><b>Handler</b> &#45;</li>
	<li><b>Permissions</b> &#45;</li>
</ul>


<p>And let's explain each field:</p>

<p><b>Lexicon Key</b>: This is the lexicon key for the menu item. Since MODX allows you to view the manager in a multiple number of languages, MODX provides us the option to load a Lexicon string (in our lexicon topic we said to load for the action earlier, <em>doodles:default</em>) to translate this with. We'll put <em>doodles</em> and provide that as a Lexicon string later.</p>

<p><b>Description</b>: Similar to the first field, this allows us to provide either a straight up description, or a lexicon key to be translated. We'll provide a lexicon key, because we want that to be translated.</p>

<p><b>Action</b> &#45; This tells MODX what action to load when the Menu item is clicked.</p>

<p><b>Icon</b> &#45; Currently not used in the default manager interface, this allows menu items to have an icon. We'll skip it.</p>

<p><b>Parameters</b> &#45; This allows you to attach GET parameters to the menu item when clicked. We don't need this, so we'll skip it.</p>

<p><b>Handler</b> &#45; This allows you to run JavaScript instead of loading a page when running a menu item. It's useful for menu items that don't actually load a page but do things, such as the "Clear Cache" menu item under the Site menu. We'll skip this.</p>

<p><b>Permissions</b> &#45; Here you can specify a MODX Permission that MODX will check to see if the user has when loading the menu. If the user doesn't have this Permission, this menu item won't load. We don't want to restrict our CMP, so we'll leave this blank.</p>

<p>Great&#33; We've got an Action and Menu now. Let's go ahead and create our default Lexicon Topic.</p>

<h3><a name="DevelopinganExtrainMODXRevolution%2CPartII-Lexicons"></a>Lexicons</h3>

<p><a href="/display/revolution20/Internationalization" title="Internationalization">Lexicons</a> in MODX Revolution allow you to provide MODX with translations for your Extra (and anything, really) in any language. We want our Extra to be i18n-compatible, so we want to utilize this feature. Each string (also called an Entry) has its own key, such as 'doodles.desc' shown above. The common practice for Lexicon keys for Extras is to prefix them with the Namespace path and a dot. This prevents collisions with other Extras.</p>

<p>Lexicon strings are collected in files called 'Lexicon Topics'. This means your strings can be isolated by a specific area (similar to how the core/lexicon/ directory does it), and makes it so you don't have to load <em>all</em> the strings for your Extra when you may only want to load a few.</p>

<p>If you wanted to use your Lexicons in a Snippet, you could use $modx-&gt;lexicon-&gt;load('doodles:default'). This would load the 'default' topic from the 'doodles' Namespace. For CMPs, however, this is a little different; you load it in the Controller class via the getLanguageTopics method. This method expects an array to return that will specify the Lexicon Topics to load so we can easily access them.</p>

<p>But we haven't actually <em>made</em> that Lexicon Topic file, so let's go do this now. Lexicons on the filesystem are structured thus:</p>

<blockquote><p>{namespace_path}/lexicon/{language}/{topic}.inc.php</p></blockquote>

<p>So we'll go ahead and create our file here: /www/doodles/core/components/doodles/lexicon/en/default.inc.php and fill it with this:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">&lt;?php
$_lang['doodle'] = 'Doodle';
$_lang['doodles'] = 'Doodles';
$_lang['doodles.desc'] = 'Manage your doodles here.';
$_lang['doodles.description'] = 'Description';
$_lang['doodles.doodle_err_ae'] = 'A doodle with that name already exists.';
$_lang['doodles.doodle_err_nf'] = 'Doodle not found.';
$_lang['doodles.doodle_err_ns'] = 'Doodle not specified.';
$_lang['doodles.doodle_err_ns_name'] = 'Please specify a name <span class="code-keyword">for</span> the doodle.';
$_lang['doodles.doodle_err_remove'] = 'An error occurred <span class="code-keyword">while</span> trying to remove the doodle.';
$_lang['doodles.doodle_err_save'] = 'An error occurred <span class="code-keyword">while</span> trying to save the doodle.';
$_lang['doodles.doodle_create'] = 'Create New Doodle';
$_lang['doodles.doodle_remove'] = 'Remove Doodle';
$_lang['doodles.doodle_remove_confirm'] = 'Are you sure you want to remove <span class="code-keyword">this</span> doodle?';
$_lang['doodles.doodle_update'] = 'Update Doodle';
$_lang['doodles.downloads'] = 'Downloads';
$_lang['doodles.location'] = 'Location';
$_lang['doodles.management'] = 'Doodles Management';
$_lang['doodles.management_desc'] = 'Manage your doodles here. You can edit them by either <span class="code-object">double</span>-clicking on the grid or right-clicking on the respective row.';
$_lang['doodles.name'] = 'Name';
$_lang['doodles.search...'] = 'Search...';
$_lang['doodles.top_downloaded'] = 'Top Downloaded Doodles';</pre>
</div></div>

<p>There's quite a few strings in there&#33; We'll use them, don't worry. Note that all we're doing is filling a PHP array called $_lang. That's it; MODX will do the rest.</p>

<p>You can also see our 'doodles' and 'doodles.desc' strings we referenced earlier in here.</p>

<p>Great&#33; We're all setup to start developing our CMP.</p>

<h2><a name="DevelopinganExtrainMODXRevolution%2CPartII-SettinguptheControllerswithMODExt"></a>Setting up the Controllers with MODExt</h2>

<p>CMPs in MODX are generated with <a href="http://sencha.com/" class="external-link" rel="nofollow">ExtJS</a>, a JavaScript framework by Sencha that allows for rapid and powerful UI development. MODX adds functionality to a few of the ExtJS tools (and calls them MODExt). We're going to use those tools in our CMP. This tutorial is not meant to teach you ExtJS, as there are plenty of tutorials on that on the web, and on the <a href="http://sencha.com/" class="external-link" rel="nofollow">Sencha main site</a>. But we will go over how to use them to create a neat grid that can do CRUD actions.</p>

<p>We're going to need to setup some basic controllers first before we can proceed with development.</p>

<h3><a name="DevelopinganExtrainMODXRevolution%2CPartII-TheBaseController"></a>The Base Controller</h3>

<p>Let's create our controller at: /www/doodles/core/components/doodles/index.class.php. And put this in it:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
require_once dirname(__FILE__) . '/model/doodles/doodles.class.php';
<span class="code-keyword">abstract</span> class DoodlesManagerController <span class="code-keyword">extends</span> modExtraManagerController {
    /** @<span class="code-keyword">var</span> Doodles $doodles */
    <span class="code-keyword">public</span> $doodles;
    <span class="code-keyword">public</span> function initialize() {
        $<span class="code-keyword">this</span>-&gt;doodles = <span class="code-keyword">new</span> Doodles($<span class="code-keyword">this</span>-&gt;modx);

        $<span class="code-keyword">this</span>-&gt;addCss($<span class="code-keyword">this</span>-&gt;doodles-&gt;config['cssUrl'].'mgr.css');
        $<span class="code-keyword">this</span>-&gt;addJavascript($<span class="code-keyword">this</span>-&gt;doodles-&gt;config['jsUrl'].'mgr/doodles.js');
        $<span class="code-keyword">this</span>-&gt;addHtml('&lt;script type=<span class="code-quote">"text/javascript"</span>&gt;
        Ext.onReady(function() {
            Doodles.config = '.$<span class="code-keyword">this</span>-&gt;modx-&gt;toJSON($<span class="code-keyword">this</span>-&gt;doodles-&gt;config).';
        });
        &lt;/script&gt;');
        <span class="code-keyword">return</span> parent::initialize();
    }
    <span class="code-keyword">public</span> function getLanguageTopics() {
        <span class="code-keyword">return</span> array('doodles:<span class="code-keyword">default</span>');
    }
    <span class="code-keyword">public</span> function checkPermissions() { <span class="code-keyword">return</span> <span class="code-keyword">true</span>;}
}
class IndexManagerController <span class="code-keyword">extends</span> DoodlesManagerController {
    <span class="code-keyword">public</span> <span class="code-keyword">static</span> function getDefaultController() { <span class="code-keyword">return</span> 'home'; }
}
</pre>
</div></div>

<p>A bit of explanation here. What we're doing is creating an abstract base Controller Class (DoodlesManagerController) for our Extra that extends modExtraManagerController, a special class for developing Extras. MODX 2.2 does request routing via Controller classes, which are all sorts of powerful. But in our Controllers for our Extra, we want to make sure to always append some CSS/JS (similar to MODX 2.1 and earlier's header.php file), and also give our Controllers access to the Doodles class object.</p>

<p>So, we do that in the initialize() method, which is called when a controller is loaded. Secondly, we define the getLanguageTopics() method to tell MODX to load our lexicon file for the manager. Finally, we define checkPermissions(), which basically says if it doesn't return true, deny access to this controller page.</p>

<p>So that's our abstract class. But we have to define an actual class to use it, so we made "IndexManagerController", which since our action is "index" (remember what we put in the Action dialog above?) MODX is going to look for (nameOfAction)ManagerController: so, ergo, IndexManagerController. We then tell MODX via the fancy "getDefaultController()" static method that we actually want our home controller to be "home". We'll make that controller file here soon.</p>

<p>Note here we're also loading a common JS file, <em>mgr/doodles.js</em>, in our JS directory. Then it runs a JS method when ExtJS has loaded that loads the config vars for our $doodles-&gt;config in the 'Doodles.config' JS object (which we'll use for paths and such). In our doodles.js file (which is found at /www/doodles/assets/components/doodles/js/mgr/doodles.js), we have this:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java"><span class="code-keyword">var</span> Doodles = function(config) {
    config = config || {};
    Doodles.superclass.constructor.call(<span class="code-keyword">this</span>,config);
};
Ext.extend(Doodles,Ext.Component,{
    page:{},window:{},grid:{},tree:{},panel:{},combo:{},config: {}
});
Ext.reg('doodles',Doodles);
Doodles = <span class="code-keyword">new</span> Doodles();</pre>
</div></div>
<p>So, basically, we're loading a Doodles object which extends the Ext.Component class. This also gives us a nice JavaScript namespace of 'Doodles'. We're done with the header stuff. Let's start on our home Controller.</p>

<h2><a name="DevelopinganExtrainMODXRevolution%2CPartII-OurDoodlesCMPPage"></a>Our Doodles CMP Page</h2>

<p>Create a file at /www/doodles/core/components/doodles/controllers/home.class.php (remember in our index.class.php base controller, we had the default controller set to "home"?) and fill it with this:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
class DoodlesHomeManagerController <span class="code-keyword">extends</span> DoodlesManagerController {
    <span class="code-keyword">public</span> function process(array $scriptProperties = array()) {

    }
    <span class="code-keyword">public</span> function getPageTitle() { <span class="code-keyword">return</span> $<span class="code-keyword">this</span>-&gt;modx-&gt;lexicon('doodles'); }
    <span class="code-keyword">public</span> function loadCustomCssJs() {
        <span class="code-comment">//$<span class="code-keyword">this</span>-&gt;addJavascript($<span class="code-keyword">this</span>-&gt;doodles-&gt;config['jsUrl'].'mgr/widgets/doodles.grid.js');
</span>        $<span class="code-keyword">this</span>-&gt;addJavascript($<span class="code-keyword">this</span>-&gt;doodles-&gt;config['jsUrl'].'mgr/widgets/home.panel.js');
        $<span class="code-keyword">this</span>-&gt;addLastJavascript($<span class="code-keyword">this</span>-&gt;doodles-&gt;config['jsUrl'].'mgr/sections/index.js');
    }
    <span class="code-keyword">public</span> function getTemplateFile() { <span class="code-keyword">return</span> $<span class="code-keyword">this</span>-&gt;doodles-&gt;config['templatesPath'].'home.tpl'; }
}</pre>
</div></div>

<p>Then create your template file at /www/doodles/core/components/doodles/templates/home.tpl and fill it with this:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">&lt;div id=<span class="code-quote">"doodles-panel-home-div"</span>&gt;&lt;/div&gt;</pre>
</div></div>

<p>Great&#33; So we're doing a couple things here. We define the process() method, which is necessary to be defined for each manager controller. We're not using it for anything, so we're going to leave it empty.</p>

<p>Next we tell MODX what we want the page title to be vai the getPageTitle() method. We'll set it to our translated version of "Doodles".</p>

<p>We then define the loadCustomCssJs() method, which allows us to register whatever specific CSS/JS for this specific page we want. We're loading a few 'widgets', and then loading a 'section'. These terms are arbitrary, but we're using them here in the same way MODX uses them in MODExt to render the manager interface. Basically, a "widget" is something like a grid of objects (such as Doodles), or a tree, or a specialized panel. Putting them in separate files allows you to use them in different pages without having to duplicate code. A "section" is a piece of JS that actually <em>loads</em> the widgets onto a page. Including a widget won't load and render it - a section will render it.</p>

<p>We're going to load first the doodles.grid.js, which is a widget that displays a grid of Doodles. Secondly, we load the 'home' panel, which is our home page's main panel, that the grid will reside in. And finally, we load the 'index' section, which renders the UI.</p>

<p>We're going to leave the grid commented out for now, but we'll come back to it. Promise.</p>

<div class='panelMacro'><table class='noteMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>We could have put all these JS files in one file, which would have loaded the page faster. For illustration purposes, we put them in 3 separate files, to make explaining this tutorial easier. Feel free to do whatever you want when developing your CMP.</td></tr></table></div>

<p>Finally, we tell MODX where to find the Template file for this Controller. This is a Smarty template that MODX will use when rendering the controller.</p>

<h3><a name="DevelopinganExtrainMODXRevolution%2CPartII-TheSectionJSFile"></a>The Section JS File</h3>

<p>Let's first create the index.js file, at /www/doodles/assets/components/doodles/js/mgr/sections/index.js:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">Ext.onReady(function() {
    MODx.load({ xtype: 'doodles-page-home'});
});

Doodles.page.Home = function(config) {
    config = config || {};
    Ext.applyIf(config,{
        components: [{
            xtype: 'doodles-panel-home'
            ,renderTo: 'doodles-panel-home-div'
        }]
    });
    Doodles.page.Home.superclass.constructor.call(<span class="code-keyword">this</span>,config);
};
Ext.extend(Doodles.page.Home,MODx.Component);
Ext.reg('doodles-page-home',Doodles.page.Home);</pre>
</div></div>

<p>Okay, let's explain. The first thing that happens is that we tell ExtJS, when the page is nice and loaded, "load" the component (or widget/object/panel) with 'xtype' <em>doodles-page-home</em>. How ExtJS works is that it allows you to define components with an 'xtype', which is kind of like a unique identifier for a panel, tree, etc. Think of it like an ID for a class. MODx.load simply instantiates that object.</p>

<p>Below that, we actually define the 'doodles-page-home' object, and make it extend MODx.Component. MODx.Component is basically an abstracted JS class that renders a page in the MODX manager interface. It provides a few helper methods that make quick generation of MODX pages smoother. All we have to pass into it is the components we want to load; currently, in this case, the 'doodles-panel-home' component (which we haven't defined yet; it'll be in the home.panel.js file mentioned earlier). We also want it to render to the DOM ID of 'doodles-panel-home-div', which, as you might remember, was the "div" we returned earlier in our mgr/index.php controller.</p>

<p>Finally, we register this page to the 'doodles-page-home' xtype, which we are referencing in the MODx.load call earlier.</p>

<p>Great&#33; On to the panel.</p>

<h3><a name="DevelopinganExtrainMODXRevolution%2CPartII-ThePanelJSFile"></a>The Panel JS File</h3>

<p>We've got our page, but now we want to load a panel in it. Let's create a file at www/doodles/assets/components/doodles/js/mgr/widgets/home.panel.js and put this in it:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">Doodles.panel.Home = function(config) {
    config = config || {};
    Ext.apply(config,{
        border: <span class="code-keyword">false</span>
        ,baseCls: 'modx-formpanel'
        ,cls: 'container'
        ,items: [{
            html: '&lt;h2&gt;'+_('doodles.management')+'&lt;/h2&gt;'
            ,border: <span class="code-keyword">false</span>
            ,cls: 'modx-page-header'
        },{
            xtype: 'modx-tabs'
            ,defaults: { border: <span class="code-keyword">false</span> ,autoHeight: <span class="code-keyword">true</span> }
            ,border: <span class="code-keyword">true</span>
            ,items: [{
                title: _('doodles')
                ,defaults: { autoHeight: <span class="code-keyword">true</span> }
                ,items: [{
                    html: '&lt;p&gt;'+_('doodles.management_desc')+'&lt;/p&gt;'
                    ,border: <span class="code-keyword">false</span>
                    ,bodyCssClass: 'panel-desc'
                }/*,{
                    xtype: 'doodles-grid-doodles'
                    ,cls: 'main-wrapper'
                    ,preventRender: <span class="code-keyword">true</span>
                }*/]
            }]
            <span class="code-comment">// only to redo the grid layout after the content is rendered
</span>            <span class="code-comment">// to fix overflow components' panels, especially when scroll bar is shown up
</span>            ,listeners: {
                'afterrender': function(tabPanel) {
                    tabPanel.doLayout();
                }
            }
        }]
    });
    Doodles.panel.Home.superclass.constructor.call(<span class="code-keyword">this</span>,config);
};
Ext.extend(Doodles.panel.Home,MODx.Panel);
Ext.reg('doodles-panel-home',Doodles.panel.Home);
</pre>
</div></div>

<p>So, first, at the bottom, note how we're registering this panel to 'doodles-panel-home', which we referenced in our section. Also note that this panel extends MODx.Panel, which in turn extends Ext.Panel. Why not just extend Ext.Panel? Well, extending MODx.Panel does the same, and adds a CSS class to the panel to give it the nice manager MODX styling.</p>

<p>We're going to give this panel a baseCls of 'modx-formpanel', which lets our top part have a transparent background. And we want a class of 'container', which handles spacing. Then, we'll make sure it doesn't have a border.</p>

<p>Next, we'll define the 'items' in the panel. First, we add a header:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">{
   html: '&lt;h2&gt;'+_('doodles.management')+'&lt;/h2&gt;'
   ,border: <span class="code-keyword">false</span>
   ,bodyCssClass: 'panel-desc'
}</pre>
</div></div>

<p>Basically this just inserts some HTML into the top of the panel with a class of 'modx-page-header', and puts a nice h2 tag up there. Note the &#95;() method. This is MODX's way of doing i18n (Lexicons) in the manager JS. This tells MODX to translate this key. If you remember, we defined the 'doodles.management' string earlier with: "Doodles Management". So this will render the translation of this key in the h2 tag.</p>

<p>Next, we'll add a TabPanel. We could just load the panel straight without tabs, but what if down the line we wanted to add another tab? Let's define it:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">,{
   xtype: 'modx-tabs'
   ,defaults: { border: <span class="code-keyword">false</span> ,autoHeight: <span class="code-keyword">true</span> }
   ,border: <span class="code-keyword">true</span>
   ,items: /* ... */
}</pre>
</div></div>

<p>Note we load our tabpanel with the xtype 'modx-tabs'. This loads a MODX-specific tabpanel, which has some MODX-specific configuration options. Then we give it some padding, a border, and make sure the defaults for its tabs have no border and an automatic height. Then, we add the tab itself:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
{
   title: _('doodles')
   ,defaults: { autoHeight: <span class="code-keyword">true</span> }
   ,items: [{
      html: '&lt;p&gt;'+_('doodles.management_desc')+'&lt;/p&gt;&lt;br /&gt;'
      ,border: <span class="code-keyword">false</span>
      ,bodyCssClass: 'panel-desc'
   }]
}</pre>
</div></div>

<p>Okay, this is going to load our first tab with a tab title translated to 'Doodles'. Then, we'll put some stuff in the tab (which is an Ext.Panel, by the way). We'll first put a nice little description with our "doodles.management_desc" lexicon string.</p>

<p>Let's load the page and take a look now. You may need to refresh the Manager page to get the Doodles component loaded into the Components menu.</p>


<p><span class="image-wrap" style=""><img src="/download/attachments/33947673/doodles-panel1.png?version=1&amp;modificationDate=1295887798000" style="border: 0px solid black" /></span></p>

<p>Cool&#33; We've got a MODX-styled panel going. Unfortunately, it's pretty useless. We need to add a grid to manage our Doodles. Let's go ahead and do that now.</p>

<h2><a name="DevelopinganExtrainMODXRevolution%2CPartII-TheDoodlesGrid"></a>The Doodles Grid</h2>

<p>First off, go ahead and uncomment this line in your home.class.php controller:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">$<span class="code-keyword">this</span>-&gt;addJavascript($doodles-&gt;config['jsUrl'].'mgr/widgets/doodles.grid.js');</pre>
</div></div>

<p>This tells MODX to load the grid widget file, which we'll now create at /www/doodles/assets/components/doodles/js/mgr/widgets/doodles.grid.js:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">Doodles.grid.Doodles = function(config) {
    config = config || {};
    Ext.applyIf(config,{
        id: 'doodles-grid-doodles'
        ,url: Doodles.config.connectorUrl
        ,baseParams: { action: 'mgr/doodle/getList' }
        ,fields: ['id','name','description','menu']
        ,paging: <span class="code-keyword">true</span>
        ,remoteSort: <span class="code-keyword">true</span>
        ,anchor: '97%'
        ,autoExpandColumn: 'name'
        ,columns: [{
            header: _('id')
            ,dataIndex: 'id'
            ,sortable: <span class="code-keyword">true</span>
            ,width: 60
        },{
            header: _('doodles.name')
            ,dataIndex: 'name'
            ,sortable: <span class="code-keyword">true</span>
            ,width: 100
            ,editor: { xtype: 'textfield' }
        },{
            header: _('doodles.description')
            ,dataIndex: 'description'
            ,sortable: <span class="code-keyword">false</span>
            ,width: 350
            ,editor: { xtype: 'textfield' }
        }]
    });
    Doodles.grid.Doodles.superclass.constructor.call(<span class="code-keyword">this</span>,config)
};
Ext.extend(Doodles.grid.Doodles,MODx.grid.Grid);
Ext.reg('doodles-grid-doodles',Doodles.grid.Doodles);</pre>
</div></div>

<p>Whew, a lot in there&#33; Let's start off with the configuration parameters we're setting.</p>
<ul>
	<li><b>id</b>: We give this panel an ID of 'doodles-grid-doodles'.</li>
	<li><b>url</b>: We point it to the connector file at Doodles.config.connectorUrl (we'll get to connectors here in a second).</li>
	<li><b>baseParams</b>: We setup it's base parameters to send when getting records for the grid via REQUEST with a key of 'action' and a value of 'mgr/doodle/getList'. More on this in a second.</li>
	<li><b>fields</b>: We setup the fields we'll get from the AJAX request to populate the grid. Basically, these are the fields of our Doodle.</li>
	<li><b>paging</b>: We want pagination for our grid, so MODExt handles all of this just by setting 'paging: true' here.</li>
	<li><b>remoteSort</b>: We set this to true, and Ext will allow our grid columns to be sortable.</li>
	<li><b>anchor</b>: We want this grid to stretch the panel width, so we set it to 97% (3% less to account for padding).</li>
	<li><b>autoExpandColumn</b>: We want to stretch the 'name' column to dynamically be the biggest column on the grid.</li>
</ul>


<p>Then, we define some columns for our grid. We also allow 'name' and 'description' to be editable by attaching an editor to each column. More on this later. Note how the 'dataIndex' parameter matches the name of the Doodles field we want to display.</p>

<p>Finally, let's add the grid to our panel. Remove the comment tags in the&nbsp;home.panel.js file at lines 22 and 26 :</p>


<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
[{
   html: '&lt;p&gt;'+_('doodles.management_desc')+'&lt;/p&gt;'
   ,border: <span class="code-keyword">false</span>
},{
   xtype: 'doodles-grid-doodles'
   ,cls: 'main-wrapper'
   ,preventRender: <span class="code-keyword">true</span>
}]</pre>
</div></div>

<p>That loads our grid right below the message we posted earlier in our panel, with some nice spacing via the class. The preventRender attribute tells Ext not to render the grid until the rest of the panel loads.</p>

<p>If you tried to load the page now, the grid would show, but not load any data - we haven't made our Connector yet, and so the grid doesn't have anywhere to fetch its data. Let's do that.</p>

<h3><a name="DevelopinganExtrainMODXRevolution%2CPartII-HookingUpviaConnectors"></a>Hooking Up via Connectors</h3>

<p>What is a Connector in MODX? A Connector is, technically, a file that 'connects' to the model layer of MODX, or the Processors. Processors are form-layer files that run DB queries and other things that modify the model and/or database.</p>

<p>In laymen's terms, Processors are where you will do all your database modifying. Connectors are a 'gateway' to these processors. They restrict access, check access permissions, and 'route' requests to the appropriate processor. They also limit the access points to your model, further securing your app. Think of your model as a fortress, your DB as the palace in the center, the processors the roads in that fortress, and connectors as the gates in the walls around your fortress. You want those gates to be secure, and limited in number.</p>

<p>Back to our Extra. Our ExtJS grid needs to load its data for its rows via AJAX by our connector. But we need to <b>create</b> our connector first. Let's make it at /www/doodles/assets/components/doodles/connector.php:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
require_once dirname(dirname(dirname(dirname(__FILE__)))).'/config.core.php';
require_once MODX_CORE_PATH.'config/'.MODX_CONFIG_KEY.'.inc.php';
require_once MODX_CONNECTORS_PATH.'index.php';

$corePath = $modx-&gt;getOption('doodles.core_path',<span class="code-keyword">null</span>,$modx-&gt;getOption('core_path').'components/doodles/');
require_once $corePath.'model/doodles/doodles.class.php';
$modx-&gt;doodles = <span class="code-keyword">new</span> Doodles($modx);

$modx-&gt;lexicon-&gt;load('doodles:<span class="code-keyword">default</span>');

/* handle request */
$path = $modx-&gt;getOption('processorsPath',$modx-&gt;doodles-&gt;config,$corePath.'processors/');
$modx-&gt;request-&gt;handleRequest(array(
    'processors_path' =&gt; $path,
    'location' =&gt; '',
));
</pre>
</div></div>
<p>That's it. We first load the config.core.php file. We'll go ahead and add it here in our development environment; in standard MODX installs, this will already exist.</p>

<p>Create a file at /www/doodles/config.core.php and put this in it:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">&lt;?php
define('MODX_CORE_PATH', '/www/modx/core/');
define('MODX_CONFIG_KEY', 'config');
</pre>
</div></div>

<p>Obviously, you'll need to change those values to your MODx installation paths. And if you're using SVN or Git for your Extra, you'll want to add those to your ignore file (ie, .gitignore), since you don't want those in your source repository.</p>

<p>Next in our connector, we load the config file, and the MODX connectors/index.php file.</p>

<p>Then, we load our Doodles class (with our magic system settings&#33;), which will add our xPDO custom Doodles model into MODX, and then load our default doodles Lexicon Topic. Finally, we 'handle' the request using our custom Processors path we defined in our Doodles class, and tell MODX to load the processors.</p>

<p>This file will do nothing on its own when access. Loading it directly will give you this:</p>

<blockquote><p>{"success":false,"message":"Access denied.","total":0,"data":[],"object":[]}</p></blockquote>

<p>There's a few reasons for this. One is that the connectors are locked down and don't allow anyone without a MODX manager session to access them. Secondly, all requests to connectors <b>must</b> pass a unique-to-your-site authorization key that prevents CRSF attacks. It can either be passed in the HTTP headers as 'modAuth', or in a REQUEST var as HTTP_MODAUTH. The value will be $modx-&gt;siteId, which is set on a new install, and loaded when MODX is loaded.</p>

<div class='panelMacro'><table class='warningMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="/images/icons/emoticons/forbidden.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>Don't ever paste or share with anyone your $modx-&gt;siteId or HTTP_MODAUTH key. It keeps your site secure.</td></tr></table></div>

<p>The great thing, though, is you won't have to worry about this. MODX already handles this in MODExt - all HTTP requests made by ExtJS in MODX pass this variable in via their HTTP headers.</p>

<p>The second reason loading the connector file directly won't work is that we didn't specify a routing path - remember baseParams in the grid? Remember how we set the 'action' param in it to 'mgr/doodle/getList'? That's our routing path. That tells the connector to load the file at:</p>

<blockquote><p>/www/doodles/core/components/doodles/processors/mgr/doodle/getlist.class.php</p></blockquote>

<p>So let's go ahead and make that file to give our grid some data:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">&lt;?php
class DoodleGetListProcessor <span class="code-keyword">extends</span> modObjectGetListProcessor {
    <span class="code-keyword">public</span> $classKey = 'Doodle';
    <span class="code-keyword">public</span> $languageTopics = array('doodles:<span class="code-keyword">default</span>');
    <span class="code-keyword">public</span> $defaultSortField = 'name';
    <span class="code-keyword">public</span> $defaultSortDirection = 'ASC';
    <span class="code-keyword">public</span> $objectType = 'doodles.doodle';
}
<span class="code-keyword">return</span> 'DoodleGetListProcessor';</pre>
</div></div>

<p>Great. So a few things. You'll note that we're in a class again - MODX 2.2 has new shiny Processor classes, including an assistance class named modObjectGetListProcessor that we're extending here. This class automatically does all the basic logic for handling normal CRUD processor actions, such as this one. All we have to do is specify some class variables on the class - such as $classKey, $objectType, and more. Let's dig into those:</p>

<ul>
	<li><b>$classKey</b> &#45; This tells the Processor what MODX Class to grab. We want to grab our Doodle objects.</li>
	<li><b>$languageTopics</b> &#45; An array of language topics to load for this processor.</li>
	<li><b>$defaultSortField</b> &#45; The default sort field to use when grabbing the data.</li>
	<li><b>$defaultSortDirection</b> &#45; The default sort direction to do when grabbing the data.</li>
	<li><b>$objectType</b> &#45; This is often used to determine what error lexicon strings to load when grabbing data. Since in our lexicon file we have all the strings as $_lang<span class="error">&#91;&#39;doodles.doodle_blahblah&#39;&#93;</span> and such, we'll specify the prefix here of "doodles.doodle". MODX then will prefix standard error messages with that prefix.</li>
</ul>


<p>The assistance class handles the rest, so we don't have to worry about it&#33; All we have to do is "return" the name of the Processor class so MODX knows where to find it.</p>

<p>That's it. Now let's load up our grid:</p>

<p><span class="image-wrap" style=""><img src="/download/attachments/33947673/doodles-grid1.png?version=1&amp;modificationDate=1295890083000" style="border: 0px solid black" /></span></p>

<p>Great&#33; We've got a working grid. Now, let's add some functionality to it, since right now all it does is list Doodles.</p>

<h3><a name="DevelopinganExtrainMODXRevolution%2CPartII-AddingSearch"></a>Adding Search</h3>

<p>Add this bit of code to your grid panel in widgets/doodles.grid.js, right after the columns: definition at line 29:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">,tbar:[{
    xtype: 'textfield'
    ,id: 'doodles-search-filter'
    ,emptyText: _('doodles.search...')
    ,listeners: {
        'change': {fn:<span class="code-keyword">this</span>.search,scope:<span class="code-keyword">this</span>}
        ,'render': {fn: function(cmp) {
            <span class="code-keyword">new</span> Ext.KeyMap(cmp.getEl(), {
                key: Ext.EventObject.ENTER
                ,fn: function() {
                    <span class="code-keyword">this</span>.fireEvent('change',<span class="code-keyword">this</span>);
                    <span class="code-keyword">this</span>.blur();
                    <span class="code-keyword">return</span> <span class="code-keyword">true</span>;
                }
                ,scope: cmp
            });
        },scope:<span class="code-keyword">this</span>}
    }
}]</pre>
</div></div>

<p>We just added a textfield to the top bar of our grid, and we gave it some 'emptyText', meaning that when empty, display this text. Also, we gave it a DOM ID of 'doodles-search-filter', and told it to run the 'this.search' method when it changes. Also, the code in the 'render' listener means to fire the change event when someone hits ENTER on their keyboard when editing it.</p>

<p>So let's define the 'this.search' method - since our Panel is OOP, this means that this.search can be defined in our grid object. To do that, find this code, now at line 52:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">Ext.extend(Doodles.grid.Doodles,MODx.grid.Grid);</pre>
</div></div>

<p>And replace it with this:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
Ext.extend(Doodles.grid.Doodles,MODx.grid.Grid,{
    search: function(tf,nv,ov) {
        <span class="code-keyword">var</span> s = <span class="code-keyword">this</span>.getStore();
        s.baseParams.query = tf.getValue();
        <span class="code-keyword">this</span>.getBottomToolbar().changePage(1);
        <span class="code-keyword">this</span>.refresh();
    }
});</pre>
</div></div>
<p>What we're telling it to do here is to extend the MODx.grid.Grid class, and then add another method called 'search'. In that method, we're getting the grid's "Store", which is where the data for the grid is stored and what determines where the data comes from. Then, we are adding a 'query' parameter to our baseParams (remember that earlier?), changing the current page of the grid back to 1, and refreshing it.</p>

<p>This will pass a 'query' REQUEST parameter to our getList Processor in the getlist.class.php file. Since we're not doing anything to handle that yet, let's go open it up. Add this method to the class after line 7:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
    <span class="code-keyword">public</span> function prepareQueryBeforeCount(xPDOQuery $c) {
        $query = $<span class="code-keyword">this</span>-&gt;getProperty('query');
        <span class="code-keyword">if</span> (!empty($query)) {
            $c-&gt;where(array(
                'name:LIKE' =&gt; '%'.$query.'%',
                'OR:description:LIKE' =&gt; '%'.$query.'%',
            ));
        }
        <span class="code-keyword">return</span> $c;
    }
</pre>
</div></div>

<p>The modObjectGetListProcessor assistance class lets us extend the prepareQueryBeforeCount() method to modify the <a href="/display/xPDO20/xPDOQuery" title="xPDOQuery">xPDOQuery</a> object before it's passed to the getCount() method. All we have to do is return our modified query object. We're going to extend it here to add searchability to our grid via the "query" parameter. Note we can get whatever that parameter is via the neat &#45;&gt;getProperty() method.</p>

<p>Now load your grid, and you'll get:</p>

<p><span class="image-wrap" style=""><img src="/download/attachments/33947673/doodles-grid-search.png?version=1&amp;modificationDate=1295899384000" style="border: 0px solid black" /></span></p>

<p>And there's our searchable grid. Now let's work on updating records.</p>

<h3><a name="DevelopinganExtrainMODXRevolution%2CPartII-AddinganUpdateWindow"></a>Adding an Update Window</h3>

<p>First off, MODX grids usually have context menus when you click them. Ours doesn't, and that's because we haven't defined it yet. Let's go ahead and define it. Add a 'getMenu' method to your Doodles.grid.Grid definition, right below your search: method we just added, line 48:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">,getMenu: function() {
    <span class="code-keyword">return</span> [{
        text: _('doodles.doodle_update')
        ,handler: <span class="code-keyword">this</span>.updateDoodle
    },'-',{
        text: _('doodles.doodle_remove')
        ,handler: <span class="code-keyword">this</span>.removeDoodle
    }];
}</pre>
</div></div>

<p>MODX looks for a getMenu method on grids that extend it, and if it finds it, it runs it. It adds then any menu items you return. Here we've added 2 menu items for our context menu, one that runs a this.updateDoodle method, and the other that runs a this.removeDoodle method. We'll get to the removeDoodle method here in a bit. For now, let's add another JS method below the getMenu call, line 58, and call it updateDoodle:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">,updateDoodle: function(btn,e) {
    <span class="code-keyword">if</span> (!<span class="code-keyword">this</span>.updateDoodleWindow) {
        <span class="code-keyword">this</span>.updateDoodleWindow = MODx.load({
            xtype: 'doodles-window-doodle-update'
            ,record: <span class="code-keyword">this</span>.menu.record
            ,listeners: {
                'success': {fn:<span class="code-keyword">this</span>.refresh,scope:<span class="code-keyword">this</span>}
            }
        });
    }
    <span class="code-keyword">this</span>.updateDoodleWindow.setValues(<span class="code-keyword">this</span>.menu.record);
    <span class="code-keyword">this</span>.updateDoodleWindow.show(e.target);
}</pre>
</div></div>
<p>A few things. What this little bit of code does is checks for a class variable named 'updateDoodleWindow'. If it doesn't find it, it creates it. This prevents us from having to have ExtJS create a new window every time (it's faster and better to prevent DOM ID conflicts). Also, it passes in a few values:</p>

<ul>
	<li><b>xtype</b> &#45; This is obviously our unique xtype for the window, which is 'doodles-window-doodle-update'. We'll get to that soon.</li>
	<li><b>record</b> &#45; MODx.Window objects will automatically fill their fields with whatever is passed into the 'record' configuration param. Also, MODx.grid.Grid objects always have the current row values stored in the 'this.menu.record' object. So we'll just pass that right in to our Window.</li>
	<li><b>listeners</b> &#45; These execute on different events in the window. For now, we just want to refresh the grid (via the 'this.refresh' method for the MODx.grid.Grid) whenever the window succeeds; meaning whenever the window's form successfully submits and returns a 'success' response.</li>
</ul>


<p>After we create the window, we'll run the show() method on it to show it. The 'e.target' just tells it to animate the opening from wherever the mouse was. If we already had a window object, before that we call setValues on it, which sets the values of the Window's form to the passed in value (similar to the record: param). This allows us to re-use windows.</p>

<p>Now let's actually define the window with this code at the end of the file:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">Doodles.window.UpdateDoodle = function(config) {
    config = config || {};
    Ext.applyIf(config,{
        title: _('doodles.doodle_update')
        ,url: Doodles.config.connectorUrl
        ,baseParams: {
            action: 'mgr/doodle/update'
        }
        ,fields: [{
            xtype: 'hidden'
            ,name: 'id'
        },{
            xtype: 'textfield'
            ,fieldLabel: _('doodles.name')
            ,name: 'name'
            ,anchor: '100%'
        },{
            xtype: 'textarea'
            ,fieldLabel: _('doodles.description')
            ,name: 'description'
            ,anchor: '100%'
        }]
    });
    Doodles.window.UpdateDoodle.superclass.constructor.call(<span class="code-keyword">this</span>,config);
};
Ext.extend(Doodles.window.UpdateDoodle,MODx.Window);
Ext.reg('doodles-window-doodle-update',Doodles.window.UpdateDoodle);</pre>
</div></div>

<p>Similar to what you've seen in the grids, except this time we have 'fields' as the fields for the Window's form. We've provided some fields to edit - and remember, since this is an "Update" form, we need to provide the ID of the Doodle, passed in as a hidden field.</p>

<p>MODx.Window wraps Ext.Window, but provides a form inside that will automatically try and connect to the url: param with the baseParams: parameters, as well as the fields' values. It also automatically provides OK/Cancel buttons. Right-click on a record in the grid, and your window should look like this now:</p>

<p><span class="image-wrap" style=""><img src="/download/attachments/33947673/doodles-window-update.png?version=1&amp;modificationDate=1295900118000" style="border: 0px solid black" /></span></p>

<p>Excellent&#33; We've got a nice little update window. Now as you probably noticed in our baseParams, we're looking now for the 'mgr/doodle/update' processor. So let's create a file at: /www/doodles/core/components/doodles/processors/mgr/doodle/update.class.php:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
class DoodleUpdateProcessor <span class="code-keyword">extends</span> modObjectUpdateProcessor {
    <span class="code-keyword">public</span> $classKey = 'Doodle';
    <span class="code-keyword">public</span> $languageTopics = array('doodles:<span class="code-keyword">default</span>');
    <span class="code-keyword">public</span> $objectType = 'doodles.doodle';
}
<span class="code-keyword">return</span> 'DoodleUpdateProcessor';</pre>
</div></div>

<p>Again, we're going to create our Processor class by extending an assistance Processor class that MODX provides. This one automatically does all the dirty work for saving an object. All we have to do is specify the classKey and a few other parameters. It handles all the saving and the response automatically. Now we have a working Update form&#33;</p>

<h3><a name="DevelopinganExtrainMODXRevolution%2CPartII-AddingaRemoveContextMenuOption"></a>Adding a Remove Context Menu Option</h3>

<p>Let's finish off the remove part of our UI. We've already got the context menu showing up, so we just need to add the JS method and the processor. After our updateDoodle method in our JS grid, add this at line 70:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">,removeDoodle: function() {
    MODx.msg.confirm({
        title: _('doodles.doodle_remove')
        ,text: _('doodles.doodle_remove_confirm')
        ,url: <span class="code-keyword">this</span>.config.url
        ,params: {
            action: 'mgr/doodle/remove'
            ,id: <span class="code-keyword">this</span>.menu.record.id
        }
        ,listeners: {
            'success': {fn:<span class="code-keyword">this</span>.refresh,scope:<span class="code-keyword">this</span>}
        }
    });
}</pre>
</div></div>
<p>MODx.msg.confirm pops up a confirmation dialog, and if confirmed, runs a processor via a connector. Let's take a look at each parameter:</p>

<ul>
	<li><b>title</b> &#45; This is the title of the confirmation dialog.</li>
	<li><b>text</b> &#45; The text of the dialog. Here it basically asks if we really want to remove a Doodle.</li>
	<li><b>url</b> &#45; The URL to the connector.</li>
	<li><b>params</b> &#45; Any REQUEST parameters to send to the processor. We're going to send the processor path, and the ID of the Doodle to remove.</li>
	<li><b>listeners</b> &#45; Similar to our update form's listeners, whenever this succeeds, refresh the grid.</li>
</ul>


<p>Now let's create our remove processor at /www/doodles/core/components/doodles/processors/mgr/doodle/remove.class.php:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">&lt;?php
class DoodleRemoveProcessor <span class="code-keyword">extends</span> modObjectRemoveProcessor {
    <span class="code-keyword">public</span> $classKey = 'Doodle';
    <span class="code-keyword">public</span> $languageTopics = array('doodles:<span class="code-keyword">default</span>');
    <span class="code-keyword">public</span> $objectType = 'doodles.doodle';
}
<span class="code-keyword">return</span> 'DoodleRemoveProcessor';</pre>
</div></div>

<p>Pretty similar to the update processor, except this time, we extend modObjectRemoveProcessor, which handles deleting the Doodle from the database. That's it&#33; We can now remove Doodles.</p>

<h3><a name="DevelopinganExtrainMODXRevolution%2CPartII-CreatingtheCreateForm"></a>Creating the Create Form</h3>

<p>So we've got R, U and D of our CRUD interface. What about C? Let's work on a create form. Let's add a button to the top toolbar of the grid to load the create window. Add this to the tbar: property on the grid config in doodles.grid.js, right after our search textfield at line 48. Be careful to insert it between the closing curly bracket of the search textfield and the closing square bracket of the tbar:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">,{
   text: _('doodles.doodle_create')
   ,handler: { xtype: 'doodles-window-doodle-create' ,blankValues: <span class="code-keyword">true</span> }
}</pre>
</div></div>

<p>MODExt allows you to pass JSON objects into the handler: method on toolbars. What this does is loads the Window with the xtype 'doodles-window-doodle-create', makes sure its values are blanked on load, and runs this.success on a successful window form submit (basically shortcuts the stuff we've been doing). That's what we want, so let's now define the window at the end of our file:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">Doodles.window.CreateDoodle = function(config) {
    config = config || {};
    Ext.applyIf(config,{
        title: _('doodles.doodle_create')
        ,url: Doodles.config.connectorUrl
        ,baseParams: {
            action: 'mgr/doodle/create'
        }
        ,fields: [{
            xtype: 'textfield'
            ,fieldLabel: _('doodles.name')
            ,name: 'name'
            ,anchor: '100%'
        },{
            xtype: 'textarea'
            ,fieldLabel: _('doodles.description')
            ,name: 'description'
            ,anchor: '100%'
        }]
    });
    Doodles.window.CreateDoodle.superclass.constructor.call(<span class="code-keyword">this</span>,config);
};
Ext.extend(Doodles.window.CreateDoodle,MODx.Window);
Ext.reg('doodles-window-doodle-create',Doodles.window.CreateDoodle);</pre>
</div></div>

<p>This is <b>very</b> similar to our Update window, except this one doesn't have an ID field, and passes 'create' as the processor. So, on to the processor at: /www/doodles/core/components/doodles/processors/mgr/doodle/create.class.php:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
class DoodleCreateProcessor <span class="code-keyword">extends</span> modObjectCreateProcessor {
    <span class="code-keyword">public</span> $classKey = 'Doodle';
    <span class="code-keyword">public</span> $languageTopics = array('doodles:<span class="code-keyword">default</span>');
    <span class="code-keyword">public</span> $objectType = 'doodles.doodle';

    <span class="code-keyword">public</span> function beforeSave() {
        $name = $<span class="code-keyword">this</span>-&gt;getProperty('name');

        <span class="code-keyword">if</span> (empty($name)) {
            $<span class="code-keyword">this</span>-&gt;addFieldError('name',$<span class="code-keyword">this</span>-&gt;modx-&gt;lexicon('doodles.doodle_err_ns_name'));
        } <span class="code-keyword">else</span> <span class="code-keyword">if</span> ($<span class="code-keyword">this</span>-&gt;doesAlreadyExist(array('name' =&gt; $name))) {
            $<span class="code-keyword">this</span>-&gt;addFieldError('name',$<span class="code-keyword">this</span>-&gt;modx-&gt;lexicon('doodles.doodle_err_ae'));
        }
        <span class="code-keyword">return</span> parent::beforeSave();
    }
}
<span class="code-keyword">return</span> 'DoodleCreateProcessor';</pre>
</div></div>

<p>Similar to the update and remove methods, again, except we aren't grabbing the object, but rather creating it. We're extending the modObjectCreateProcessor assistance class now.</p>

<p>Also, we have a bit of form validation beforehand - we're going to make sure the name isn't blank, and if it is, return a custom error message on that specific field. If it's not blank, then we'll make sure there's no other Doodles with that name. Note we extended the beforeSave() method to do this, and then return the parent class's running of that same method. Then, inside of it, we do two things:</p>

<ol>
	<li>Check to see if the name is empty and if so, add a field-specific error to the "name" field saying so</li>
	<li>Otherwise, see if a Doodle already exists (using the helper doesAlreadyExist method, which takes in a criteria array to search for), and if so, return a field-specific error to the "name" field saying so</li>
</ol>


<p><span class="image-wrap" style=""><img src="/download/attachments/33947673/doodles-error-no-name.png?version=1&amp;modificationDate=1295901637000" style="border: 0px solid black" /></span></p>

<p>Pretty neat, huh? Field-specific validation, built right in. And we've got a working create form&#33;</p>

<h3><a name="DevelopinganExtrainMODXRevolution%2CPartII-AddingInlineEditing"></a>Adding Inline-Editing</h3>

<p>MODExt also has automatic inline editing built right into its grids. Simply add this to your Doodles.grid.Grid config object, right below the 'autoExpandColumn' property:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
,save_action: 'mgr/doodle/updateFromGrid'
,autosave: <span class="code-keyword">true</span>
</pre>
</div></div>

<p>That tells the grid to turn on inline editing and saving; and also to send any saves to the processor at mgr/doodle/updateFromGrid. So let's create it, at: /www/doodles/core/components/doodles/processors/mgr/doodle/updatefromgrid.class.php:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">require_once (dirname(__FILE__).'/update.class.php');
class DoodleUpdateFromGridProcessor <span class="code-keyword">extends</span> DoodleUpdateProcessor {
    <span class="code-keyword">public</span> function initialize() {
        $data = $<span class="code-keyword">this</span>-&gt;getProperty('data');
        <span class="code-keyword">if</span> (empty($data)) <span class="code-keyword">return</span> $<span class="code-keyword">this</span>-&gt;modx-&gt;lexicon('invalid_data');
        $data = $<span class="code-keyword">this</span>-&gt;modx-&gt;fromJSON($data);
        <span class="code-keyword">if</span> (empty($data)) <span class="code-keyword">return</span> $<span class="code-keyword">this</span>-&gt;modx-&gt;lexicon('invalid_data');
        $<span class="code-keyword">this</span>-&gt;setProperties($data);
        $<span class="code-keyword">this</span>-&gt;unsetProperty('data');

        <span class="code-keyword">return</span> parent::initialize();
    }
}
<span class="code-keyword">return</span> 'DoodleUpdateFromGridProcessor';</pre>
</div></div>

<p>Note how we're just extending our Update processor class (after including it), and in the initialize() method, parsing our "data" property from JSON (which our grid sends with the updated record) and setting that as the properties for the Processor. Then the Update processor handles the rest. Simple, eh?</p>

<h2><a name="DevelopinganExtrainMODXRevolution%2CPartII-Summary"></a>Summary</h2>

<p>We've got ourselves a nice CRUD user interface now, with creating, updating, removing, searching, pagination, and sorting. And all pretty easily, too.</p>

<p>Next, in Part III, we'll explore <a href="/display/revolution20/Developing+an+Extra+in+MODX+Revolution%2C+Part+III" title="Developing an Extra in MODX Revolution, Part III">creating a Transport Package</a> for our Doodles Extra so that we can distribute it on modxcms.com and via Revolution's Package Management system.</p>

<div class="panel" style="border-width: 1px;"><div class="panelContent">
<p>This tutorial is part of a Series:</p>
<ul>
	<li><a href="/display/revolution20/Developing+an+Extra+in+MODX+Revolution" title="Developing an Extra in MODX Revolution">Part I: Getting Started and Creating the Doodles Snippet</a></li>
	<li>Part II: Creating our Custom Manager Page</li>
	<li><a href="/display/revolution20/Developing+an+Extra+in+MODX+Revolution%2C+Part+III" title="Developing an Extra in MODX Revolution, Part III">Part III: Packaging Our Extra</a></li>
</ul>
</div></div>

<style type='text/css'>/*<![CDATA[*/
table.ScrollbarTable  {border: none;padding: 3px;width: 100%;padding: 3px;margin: 0px;background-color: #f0f0f0}
table.ScrollbarTable td.ScrollbarPrevIcon {text-align: center;width: 16px;border: none;}
table.ScrollbarTable td.ScrollbarPrevName {text-align: left;border: none;}
table.ScrollbarTable td.ScrollbarParent {text-align: center;border: none;}
table.ScrollbarTable td.ScrollbarNextName {text-align: right;border: none;}
table.ScrollbarTable td.ScrollbarNextIcon {text-align: center;width: 16px;border: none;}

/*]]>*/</style><div class="Scrollbar"><table class='ScrollbarTable'><tr><td width='33%' class='ScrollbarPrevName'>&nbsp;</td><td width='33%' class='ScrollbarParent'><sup><a href="/display/revolution20/Developing+an+Extra+in+MODX+Revolution"><img border='0' align='middle' src='/images/icons/up_16.gif' width='8' height='8'></a></sup><a href="/display/revolution20/Developing+an+Extra+in+MODX+Revolution">Developing an Extra in MODX Revolution</a></td><td width='33%' class='ScrollbarNextName'>&nbsp;<a href="/display/revolution20/Developing+an+Extra+in+MODX+Revolution%2C+Part+III">Developing an Extra in MODX Revolution, Part III</a></td><td class='ScrollbarNextIcon'><a href="/display/revolution20/Developing+an+Extra+in+MODX+Revolution%2C+Part+III"><img border='0' align='middle' src='/images/icons/forwd_16.gif' width='16' height='16'></a></td></tr></table></div>
        </div>

        <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://oldrtfm.modx.com/display/revolution20/Developing+an+Extra+in+MODX+Revolution%2C+Part+II"
    dc:identifier="http://oldrtfm.modx.com/display/revolution20/Developing+an+Extra+in+MODX+Revolution%2C+Part+II"
    dc:title="Developing an Extra in MODX Revolution, Part II"
    trackback:ping="http://oldrtfm.modx.com/rpc/trackback/33947673"/>
</rdf:RDF>
-->

            
    


<fieldset class="hidden parameters">
    <legend>Labels parameters</legend>
    <input type="hidden" id="editLabel" value="Edit">
    <input type="hidden" id="addLabel" value="Add Labels">
    <input type="hidden" id="domainName" value="http://oldrtfm.modx.com">
    <input type="hidden" id="pageId" value="33947673">
    <input type="hidden" id="spaceKey" value="revolution20">
</fieldset>

<div id="labels-section" class="pageSection">
    <div id="default-labels-header" class="section-header">
        <h2 id="labels-section-title" class="section-title  hidden ">Labels</h2>
            </div>

    <div class="labels-editor">
        <div id="labelsList">
                    </div>

        <span class="errorMessage error" id="errorSpan"></span>
        <form method="GET" action="" id="add-labels-form">
            <div id="labelInputSpan" class="labels-input">
                <div id="labelOperationErrorContainer" class="hidden">
                    <span class="error"><span class="errorMessage" id="labelOperationErrorMessage"></span></span>
                </div>

                <div class="caption">Enter labels to add to this page:</div>
                <div id="label-input-fields">
                    <input autocomplete="off" id="labelsString" name="labelsString" value="" size="40">
                    <input id="add-labels-editor-button" type="submit" class="add-labels" value="Add">
                    <input id="close-labels-editor-button" type="submit" class="hide-labels-editor" value="Done">
                </div>
                <div id="waitImageAndStatus">
                    <img class="waiting" alt="Please wait" src="/s/1911/69/_/images/icons/wait.gif">&nbsp;
                    <span id="labelOperationStatus" class="smalltext"></span>
                </div>
                <div id="labelsAutocompleteList" class="aui-dd-parent"></div>
                <div class="labels-tip">
                    <div id="suggestedLabelsSpan"></div>
                    Looking for a label? Just start typing.
                </div>
            </div>
        </form>
    </div>
</div>

            
            




            
    

        
<fieldset class="parameters hidden">
    <input type="hidden" id="deleteCommentConfirmMessage" value="Are you sure you want to remove the comment?">
    <input type="hidden" id="collapseTooltip" value="Click to toggle the display of this comment.">
        </fieldset>






<div id="comments-section" class="pageSection">
    
            <div class="section-header ">
            <h2 id="comments-section-title" class="section-title">
                <a name="comments">Comments (1)</a>
            </h2>
            &nbsp;
            <ul id="comment-top-links" class="global-comment-actions">
                <li id="comment-show-hide">
                    <a href="/display/revolution20/Developing+an+Extra+in+MODX+Revolution%2C+Part+II?showComments=false#comments" id="comments-hide" >Hide Comments</a>
                    <a href="/display/revolution20/Developing+an+Extra+in+MODX+Revolution%2C+Part+II?showComments=true#comments" id="comments-show"  class="hidden" >Show Comments</a>
                </li>
                <li id="comments-expand-collapse" >
                    <a href="#" id="comments-collapse">Collapse All</a>
                    <span id="collapse-wait" class="hidden">Collapsing&hellip;</span>
                    <span id="expand-wait" class="hidden">Expanding&hellip;</span>
                    <a href="#" class="hidden" id="comments-expand">Expand All</a>
                </li>
                            </ul>
        </div>
    
    
                            <ol class="comment-threads top-level " id="page-comments">
                        <li id="comment-thread-43417647" class="comment-thread">
                    <div class="comment  " id="comment-43417647">
                <p class="comment-user-logo">
                    <img class="userLogo logo anonymous" src="/s/1911/69/_/images/icons/profilepics/anonymous.png"
           alt="User icon: bertoost" title="bertoost">                </p>
                <p class="date" title="Nov 29, 2012 04:29">
                    Nov 29, 2012
                </p>
                <div class="comment-header comment-toggle">
                    <h4 class="author"><a href="/display/~bertoost"
                          class="url fn"
                   >Bert Oost</a> says:</h4>
                                        <span class="excerpt">The $objectType shown in all processors is not necessary to set.

I have made a ...</span>
                </div>
                <div class="comment-body">
                    <div class="comment-content wiki-content">
                        <p>The $objectType shown in all processors is not necessary to set.</p>

<p>I have made a couple of custom components and I have setupped a "afterSaveEvent" and "afterRemoveEvent" etc. But then there isn't a name like "object" passed to your plugin (containing your object). The name passed is based on the $objectType value. So when you have Doodles.. you will get a "doodles.doodle" passed into your plugin. With 10 components, 10 different types, this is very un-wanted.</p>

<p>So I have figured out that this $objectType is not required to let the processors work properly. When you leave that, MODX falls back on "object" so you will have $scriptProperties['object'] &nbsp;in your plugin, instead of many different type names.</p>

<p><em>Note:&nbsp;saves about 30 bytes disk space per processor :-)</em></p>
                    </div>
                    <div class="comment-actions">
                                                    <ul id="comment-actions-secondary">
                                                          <li class="first comment-permalink">
            <a title="Permanent link to this comment" href="/display/revolution20/Developing+an+Extra+in+MODX+Revolution%2C+Part+II?focusedCommentId=43417647#comment-43417647"
                id="comment-permalink-43417647"                ><span>Permalink</span></a></li>
            </ul>
                            <ul id="comment-actions-primary">
            </ul>
                    </div>
                </div>
            </div>

            <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://oldrtfm.modx.com/display/revolution20/Developing+an+Extra+in+MODX+Revolution%2C+Part+II?focusedCommentId=43417647#comment-43417647"
    dc:identifier="http://oldrtfm.modx.com/display/revolution20/Developing+an+Extra+in+MODX+Revolution%2C+Part+II?focusedCommentId=43417647#comment-43417647"
    dc:title="Developing an Extra in MODX Revolution, Part II"
    trackback:ping="http://oldrtfm.modx.com/rpc/trackback/43417647"/>
</rdf:RDF>
-->

                    
                                </li>
                </ol>
    
                                    </div>


            
</div>


    




        
        

    
    
    


<fieldset class="hidden parameters">
        <input type="hidden" id="i18n.manage.watchers.dialog.title" value="Manage Watchers">
        <input type="hidden" id="i18n.manage.watchers.unable.to.remove.error" value="Failed to remove watcher. Refresh page to see latest status.">
        <input type="hidden" id="i18n.manage.watchers.status.adding.watcher" value="Adding watcher&amp;hellip;">
</fieldset>
<script type="text/x-template" title="manage-watchers-dialog">
<div class="dialog-content">
    <div class="column page-watchers">
        <h3>Watching this page</h3>
        <p class="description">These people are notified when the page is changed. You can add or remove people from this list.</p>
        <form action="/json/addwatch.action" method="POST">
                <input type="hidden" name="atl_token" value="kK-U55C3Nx">
            <input type="hidden" name="pageId" value="33947673"/>
            <input type="hidden" id="add-watcher-username" name="username" value=""/>
            <label for="add-watcher-user">User</label>
            <input id="add-watcher-user" name="userFullName" type="search" class="has-placeholder autocomplete-user"
               value="" placeholder="Full name or username" autocomplete="off"
               data-max="10" data-target="#add-watcher-username" data-dropdown-target="#add-watcher-dropdown"
               data-template="{title}" data-none-message="No matching users found.">
            <input id="add-watcher-submit" type="submit" name="add" value="Add">
            <div id="add-watcher-dropdown" class="aui-dd-parent autocomplete"></div>
            <div class="status hidden"></div>
        </form>
        <ul class="user-list">
            <li class="loading">Loading&hellip;</li>
            <li class="no-users hidden">No page watchers</li>
        </ul>
    </div>
    <div class="column space-watchers">
        <h3>Watching this space</h3>
        <p class="description">These people are notified when any content in the space is changed. You cannot modify this list.</p>
        <ul class="user-list">
            <li class="loading">Loading&hellip;</li>
            <li class="no-users hidden">No space watchers</li>
        </ul>
    </div>
</div>
</script>
<script type="text/x-template" title="manage-watchers-user">
    <li class="watch-user">
        <img class="profile-picture confluence-userlink" src="{iconUrl}" data-username="{username}">
        <a class="confluence-userlink" href="{url}" data-username="{username}">{fullName} <span class="username">({username})</span></a>
        <span class="remove-watch" title="Remove"
            data-username="{username}">Remove</span>
    </li>
</script>
<script type="text/x-template" title="manage-watchers-help-link">
    <div class="dialog-help-link">
            <a href="http://docs.atlassian.com/confluence/docs-33/Managing+Watchers" target="_blank">Help</a>
    </div>
</script>
    <br class="clear">
</div>
  
    </div>
</div>

<div id="footer">
                                                <p class="license license-opensource">
                  Powered by a free <b>Atlassian Confluence Open Source Project License</b> granted to MODx CMS / xPDO. <a href="http://www.atlassian.com/c/conf/11461">Evaluate Confluence today</a>.<br>
                </p>
                        
    <ul id="poweredby">
        <li class="noprint">Powered by <a href="http://www.atlassian.com/software/confluence" class="hover-footer-link">Atlassian Confluence</a> 3.3, the <a href="http://www.atlassian.com/software/confluence/tour/enterprise-wiki.jsp" class="hover-footer-link">Enterprise Wiki</a></li>
        <li class="print-only">Printed by Atlassian Confluence 3.3, the Enterprise Wiki.</li>        
        <li class="noprint"> &nbsp; |&nbsp; <a href="http://jira.atlassian.com/secure/BrowseProject.jspa?id=10470" class="hover-footer-link">Report a bug</a></li>
        <li class="noprint"> &nbsp;|&nbsp; <a href="http://www.atlassian.com/about/connected.jsp?s_kwcid=Confluence-stayintouch" class="hover-footer-link">Atlassian News</a></li>
    </ul>

    

            <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-71684-1']);
  _gaq.push(['_setDomainName', 'oldrtfm.modx.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
    </div>    <!-- include system javascript resources -->
                        
    
    
    <!-- end system javascript resources -->
</div>
</body>
</html>
