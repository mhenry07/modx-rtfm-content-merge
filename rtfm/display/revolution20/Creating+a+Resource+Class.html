<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
            <title>Creating a Resource Class - MODx Revolution 2.x - MODX Documentation</title>
    
        

                        
    

            
<meta id="confluence-context-path" name="confluence-context-path" content="">
<meta id="atlassian-token" name="atlassian-token" content="TqlRFEPIGO">
<meta id="confluence-space-key" name="confluence-space-key" content="revolution20">

<script type="text/javascript">
    // Deprecated global variables. To be removed in a future version of Confluence.
    var contextPath = '';
</script>

    

<!-- include system css resources -->
<link type="text/css" rel="stylesheet" href="/s/1911/69/2/_/download/superbatch/css/batch.css" media="all">
<!--[if IE]>
<link type="text/css" rel="stylesheet" href="/s/1911/69/2/_/download/superbatch/css/batch.css?ieonly=true" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="/s/1911/69/2/_/download/superbatch/css/batch.css?media=print" media="print">
<link type="text/css" rel="stylesheet" href="/s/1911/69/1.20/_/download/batch/com.atlassian.confluence.plugins.pagetree:pagetree-resources/com.atlassian.confluence.plugins.pagetree:pagetree-resources.css" media="all">
<link type="text/css" rel="stylesheet" href="/s/1911/69/1.0/_/download/batch/confluence.web.resources:view-comment/confluence.web.resources:view-comment.css" media="all">
<!--[if IE]>
<link type="text/css" rel="stylesheet" href="/s/1911/69/1.0/_/download/batch/confluence.web.resources:view-comment/confluence.web.resources:view-comment.css?ieonly=true" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="/s/1911/69/1.9.3/_/download/batch/confluence.macros.advanced:fancy-box/confluence.macros.advanced:fancy-box.css" media="all">
<link type="text/css" rel="stylesheet" href="/s/1911/69/1.0.8/_/download/batch/com.atlassian.confluence.plugins.drag-and-drop:support/com.atlassian.confluence.plugins.drag-and-drop:support.css" media="all">
<link type="text/css" rel="stylesheet" href="/s/1911/69/1.0/_/download/resources/confluence.web.resources:aui-forms/confluence-forms.css" media="all">
<!--[if IE]>
<link type="text/css" rel="stylesheet" href="/s/1911/69/1.0/_/download/batch/confluence.web.resources:aui-forms/confluence.web.resources:aui-forms.css?ieonly=true" media="all">
<![endif]-->

<!-- end system css resources -->

    <link rel="stylesheet" href="/s/1911/69/6/_/styles/combined.css?spaceKey=revolution20" type="text/css">

    <meta name="confluence-request-time" content="1381731356511">

<meta name="loggedInUsername" content="">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="icon" type="image/png" href="/s/1911/69/_/images/logo/confluence_16.png">

<link rel="search" type="application/opensearchdescription+xml" href="/opensearch/osd.action" title="MODX Documentation"/>

        <!-- include system javascript resources -->
                        
    
    <script type="text/javascript" src="/s/1911/69/2/_/download/superbatch/js/batch.js" ></script>
<script type="text/javascript" src="/s/1911/69/1.20/_/download/batch/com.atlassian.confluence.plugins.pagetree:pagetree-resources/com.atlassian.confluence.plugins.pagetree:pagetree-resources.js" ></script>
<script type="text/javascript" src="/s/1911/69/1.9.3/_/download/batch/confluence.macros.advanced:fancy-box/confluence.macros.advanced:fancy-box.js" ></script>
<script type="text/javascript" src="/s/1911/69/1.9.3/_/download/batch/confluence.macros.advanced:thumbnail-images/confluence.macros.advanced:thumbnail-images.js" ></script>
<script type="text/javascript" src="/s/1911/69/3.3/_/download/batch/com.atlassian.confluence.plugins.fixedwidth-theme:fixedwidth-resources/com.atlassian.confluence.plugins.fixedwidth-theme:fixedwidth-resources.js" ></script>
<script type="text/javascript" src="/s/1911/69/1.0.8/_/download/batch/com.atlassian.confluence.plugins.drag-and-drop:support/com.atlassian.confluence.plugins.drag-and-drop:support.js" ></script>
<script type="text/javascript" src="/s/1911/69/1.0.8/_/download/batch/com.atlassian.confluence.plugins.drag-and-drop:drag-and-drop-for-view-content/com.atlassian.confluence.plugins.drag-and-drop:drag-and-drop-for-view-content.js" ></script>
<script type="text/javascript" src="/s/1911/69/1.2/_/download/batch/com.atlassian.confluence.plugins.doctheme:splitter/com.atlassian.confluence.plugins.doctheme:splitter.js" ></script>
<script type="text/javascript" src="/s/1911/69/1.0/_/download/batch/legacy.confluence.web.resources:prototype/legacy.confluence.web.resources:prototype.js" ></script>

    <!-- end system javascript resources -->

    <link type="text/css" rel="stylesheet" href="http://misc.modx.com/confluence/docs.css" />
<link type="text/css" rel="stylesheet" href="http://misc.modx.com/confluence/syntaxhighlighter/css/all.css" />
<!--<script type="text/javascript" src="http://misc.modx.com/js/jquery-1.3.2.min.js"></script>-->
<script type="text/javascript" src="http://misc.modx.com/confluence/syntaxhighlighter/js/all.js"></script>
<script type="text/javascript" src="http://misc.modx.com/confluence/loadcode.js"></script>
<link type="text/css" rel="stylesheet" href="http://misc.modx.com/confluence/promo/ad.css" />

    
    <link rel="canonical" href="http://oldrtfm.modx.com/display/revolution20/Creating+a+Resource+Class">
    <link rel="shortlink" href="http://oldrtfm.modx.com/x/SAEvAg">
    <meta name="wikilink" content="[revolution20:Creating a Resource Class]">

</head>

<body             onload="placeFocus()"
     id="com-atlassian-confluence" class="theme-documentation ">
<div id="full-height-container">
<!-- CODE FOR AD THAT SEEMS TO BE INSERTABLE DIRECTLY AFTER OPEN BODY TAG IN CONFLUENCE THEME ADMIN -->
<!--<a href="https://modxcloud.com/signup/lab-account.html?utm_source=rtfm&utm_medium=banner&utm_campaign=one_percent%2B" class="modx-cloud-link">
    <div class="modx-cloud-ad-wrap">
        <div class="modx-cloud-ad">
            <div class="logo-wrap">
                <img src="http://misc.modx.com/confluence/promo/modx-cloud-logo.png" alt="MODX Cloud" width="161" height="40">
            </div>
            <p>The Most Productive MODX Learning Playground Ever</p>
            <span class="faux-btn">
                Claim Free Lab Account
            </span>

        </div>
    </div>
</a>-->
<!-- END OF AD -->

<div class="editors_note" style="background-color:#ff9a91;border: 1px solid red; padding:5px;color:black;">
    <strong>Important Note:</strong> This is an archive of the official MODX Documentation. Please do not edit or make changes here.  The current documentation is located at <a href="rtfm.modx.com">rtfm.modx.com</a>.
</div>


<fieldset class="hidden parameters">
    <input type="hidden" id="statusDialogHeading" value="What are you working on?">
    <input type="hidden" id="statusDialogAccessibilityLabel" value="Enter your status (140 character limit)">
    <input type="hidden" id="statusDialogLatestLabel" value="Last update:">
    <input type="hidden" id="statusDialogUpdateButtonLabel" value="Update">
    <input type="hidden" id="statusDialogCancelButtonLabel" value="Cancel">
</fieldset>

<fieldset class="hidden parameters">
    <input type="hidden" id="globalSettingsAttachmentMaxSize" value="10485760">
    <input type="hidden" id="userLocale" value="en_GB">
    <input type="hidden" id="staticResourceUrlPrefix" value="/s/1911/69/_">
    <input type="hidden" id="contextPath" value="">
</fieldset>

    
<div id="header" class="sectionbottom ">
        <form id="quick-search" class="quick-search" method="get" action="/dosearchsite.action">
        <fieldset>
            <legend>Quick Search</legend>
            <input class="quick-search-query" id="quick-search-query" type="text" accessKey="q" autocomplete="off" name="queryString" size="25" />
            <input class="quick-search-submit" id="quick-search-submit" type="submit" value="Search" />
            <div class="aui-dd-parent quick-nav-drop-down"><!-- Quick nav appears here --></div>
        </fieldset>
        <fieldset class="hidden parameters">
            <input type="hidden" id="quickNavEnabled" value="true" />
                    </fieldset>
    </form>
    <ul id="header-menu-bar" class="ajs-menu-bar">
                    
        
            <li class="normal ajs-menu-item">
        <a id="browse-menu-link" class="browse trigger ajs-menu-title" href="#"><span><span>Browse</span></span></a>         <div class="hidden ajs-drop-down">
                        <ul  id="browse-menu-link-leading"                 class="section-leading first">
                                        <li>
    
        
    
    <a  id="space-pages-link" href="/pages/listpages.action?key=revolution20"  class=""   title="Attachments: 3">
                   <span>Pages</span></a>        </li>
                                        <li>
    
        
    
    <a  id="space-blogposts-link" href="/pages/viewrecentblogposts.action?key=revolution20"  class=""   title="Attachments: 3">
                   <span>Blog</span></a>        </li>
                                        <li>
    
        
    
    <a  id="space-labels-link" href="/labels/listlabels-heatmap.action?key=revolution20"  class=""   title="Attachments: 3">
                   <span>Labels</span></a>        </li>
                                        <li>
    
        
    
    <a  id="space-attachments-link" href="/spaces/listattachmentsforspace.action?key=revolution20"  class=""   title="Attachments: 3">
                   <span>Attachments</span></a>        </li>
                                        <li>
    
        
    
    <a  href="/spaces/space-bookmarks.action?spaceKey=revolution20"  class=""   title="Browse bookmarks in the MODx Revolution 2.x space">
                   <span>Bookmarks</span></a>        </li>
                                        <li>
    
        
    
    <a  id="space-mail-link" href="/spaces/viewmailarchive.action?key=revolution20"  class=""   title="Browse bookmarks in the MODx Revolution 2.x space">
                   <span>Mail</span></a>        </li>
                                        <li>
    
        
    
    <a  id="space-advanced-link" href="/spaces/viewspacesummary.action?key=revolution20"  class=""   title="Browse bookmarks in the MODx Revolution 2.x space">
                   <span>Advanced</span></a>        </li>
                            </ul>
                        <ul  id="browse-menu-link-global"                 class="section-global">
                                        <li>
    
            
    
    <a  id="gadget-directory-link" href="#"  class="user-item administration-link"   title="Browse gadgets provided by Confluence">
                   <span>Confluence Gadgets</span></a>        </li>
                            </ul>
                    </div>
    </li>
        
                                                         <li class="ajs-menu-item normal">
        
        
    
    <a  id="login-link" href="/login.action?os_destination=%2Fdisplay%2Frevolution20%2FCreating%2Ba%2BResource%2BClass"  class="user-item login-link"  >
                   <span>Log In</span></a>        </li>
                                <li class="normal ajs-menu-item">
            <div id="splitter-button" class="hidden" title="Sidebar"></div>
        </li>

    </ul>
    
    
    <ol id="breadcrumbs">
                    
        <li class="first" >
                                    <span><a href="/dashboard.action">Dashboard</a></span>
                </li>
                    
        <li>
                                    <span><a href="/display/revolution20">MODx Revolution 2.x</a></span>
                </li>
                                        <li id="ellipsis" title="    &#8230;
                    Home
             &gt;         Developing in MODx
             &gt;         Advanced Development
        &#8230;
"><span><strong>&#8230;</strong></span></li>
                                    
        <li class="hidden-crumb" >
                                    <span><a href="/display/revolution20/Home">Home</a></span>
                </li>
                                
        <li class="hidden-crumb" >
                                    <span><a href="/display/revolution20/Developing+in+MODx">Developing in MODx</a></span>
                </li>
                                
        <li class="hidden-crumb" >
                                    <span><a href="/display/revolution20/Advanced+Development">Advanced Development</a></span>
                </li>
                    
        <li>
                                    <span><a href="/display/revolution20/Custom+Resource+Classes">Custom Resource Classes</a></span>
                </li>
                    
        <li>
                                    <span>Creating a Resource Class</span>
                </li>
        </ol>

</div>

    <div id="splitter">
    <div id="splitter-sidebar">

        

                    
    
    

<div class="plugin_pagetree">

                <div id="pagetreesearch">
            <form method="POST" action="/plugins/pagetreesearch/pagetreesearch.action" name="pagetreesearchform">
                                    <input type="hidden" name="ancestorId" value="18678050">
                                <input type="hidden" name="spaceKey" value="revolution20">
                <input type="text"  size="20" name="queryString">
                <input type="submit" value="Search">
            </form>
        </div>
    
        
    <ul class="plugin_pagetree_children_list plugin_pagetree_children_list_noleftspace">
        <div class="plugin_pagetree_children">
        </div>
    </ul>

    <fieldset class="hidden">
        <input type="hidden" name="treeId" value="">
        <input type="hidden" name="treeRequestId" value="/plugins/pagetree/naturalchildren.action?decorator=none&amp;excerpt=false&amp;sort=position&amp;reverse=false&amp;disableLinks=false">
        <input type="hidden" name="treePageId" value="36634952">

        <input type="hidden" name="noRoot" value="false">
        <input type="hidden" name="rootPageId" value="18678050">

        <input type="hidden" name="rootPage" value="">
        <input type="hidden" name="startDepth" value="0">
        <input type="hidden" name="spaceKey" value="revolution20" >

        <input type="hidden" name="i18n-pagetree.loading" value="Loading...">
        <input type="hidden" name="i18n-pagetree.error.permission" value="Unable to load page tree. It seems that you do not have permission to view the root page.">
        <input type="hidden" name="i18n-pagetree.eeror.general" value="There was a problem retrieving the page tree. Please check the server log file for more information.">
        <input type="hidden" name="loginUrl" value="/login.action?os_destination=%2Fdisplay%2Frevolution20%2FCreating%2Ba%2BResource%2BClass">

                <fieldset class="hidden">
                                                <input type="hidden" name="ancestorId" value="36634950">
                                    <input type="hidden" name="ancestorId" value="18678466">
                                    <input type="hidden" name="ancestorId" value="18678458">
                                    <input type="hidden" name="ancestorId" value="18678050">
                                    </fieldset>
    </fieldset>
</div>



            </div>
    <div id="splitter-content">

                    <script type="text/javascript" src="/s/1911/69/2/_/download/resources/com.atlassian.confluence.plugins.doctheme:resources/doc-theme.js"></script>
    
            
    
<div id="main" >
    
    
    <div id="navigation" class="content-navigation view">
        <fieldset class="hidden parameters">
            <input type="hidden" id="pageId" value="36634952">
        </fieldset>
        <ul class="ajs-menu-bar">
                                
                        
            <li class="normal ajs-menu-item">
        <a id="action-menu-link" class="action trigger ajs-menu-title" href="#"><span><span>Tools</span></span></a>         <div class="hidden ajs-drop-down">
                        <ul  id="action-menu-link-primary"                 class="section-primary first">
                                        <li>
    
        
    
    <a  id="view-attachments-link" href="/pages/viewpageattachments.action?pageId=36634952"  class="action-view-attachments"  accessKey="a" >
                   <span><u>A</u>ttachments (3)</span></a>        </li>
                                        <li>
    
        
    
    <a  id="action-view-history-link" href="/pages/viewpreviousversions.action?pageId=36634952"  class="action-view-history"  >
                   <span>Page History</span></a>        </li>
                                        <li>
    
        
    
    <a  id="mailPageLink" href="/pages/mailpage/mailpage.action?pageId=36634952"  class=""  >
                    <span>
                <img alt="E-mail" src="/images/icons/mail_content_16.gif" height="16" width="16" title="E-mail">
                E-mail
            </span></a>        </li>
                                        <li>
    
        
    
    <a  id="action-page-permissions-link" href="/pages/viewinfo.action?pageId=36634952"  class="action-page-permissions"  >
                   <span>Restrictions</span></a>        </li>
                            </ul>
                        <ul  id="action-menu-link-secondary"                 class="section-secondary">
                                        <li>
    
        
    
    <a  id="view-page-info-link" href="/pages/viewinfo.action?pageId=36634952"  class="action-view-info"  >
                   <span>Info</span></a>        </li>
                                        <li>
    
        
    
    <a  id="link-to-page-link" href="/pages/viewinfo.action?pageId=36634952"  class=""  >
                   <span>Link to this Page&hellip;</span></a>        </li>
                                        <li>
    
        
    
    <a  id="view-in-hierarchy-link" href="/pages/listpages-dirview.action?key=revolution20&openId=36634952#selectedPageInHierarchy"  class=""  >
                   <span>View in Hierarchy</span></a>        </li>
                                        <li>
    
        
    
    <a  id="action-view-source-link" href="/pages/viewpagesrc.action?pageId=36634952"  class="action-view-source popup-link"  >
                   <span>View Wiki Markup</span></a>        </li>
                            </ul>
                    </div>
    </li>
            </ul>
    </div>

    
    <h1 id="title-heading" class="pagetitle">
                    <a href="/display/revolution20"><img class="logo global custom" src="/download/attachments/9109505/global.logo?version=2&modificationDate=1356105314000" alt=""></a>        
		<span id="title-text">
					            <a href="/display/revolution20/Creating+a+Resource+Class">Creating a Resource Class</a>
    				</span>
    </h1>

    

    
    
    
    <div id="content" class="page view">
    



<fieldset id="link-to-page-fields" class="hidden parameters">
    <input type="hidden" id="linkToThisPageHeading" value="Link to this Page">
    <input type="hidden" id="linkToThisPageLink" value="Link">
    <input type="hidden" id="linkToThisPageTinyLink" value="Tiny Link">
    <input type="hidden" id="linkToThisPageWikiMarkup" value="Wiki Markup">
    <input type="hidden" id="linkToThisPageClose" value="Close">
</fieldset>
<fieldset class="hidden parameters">
    <input type="hidden" title="movePageDialogViewPageTitle" value="Move Page &ndash; &#8216;Creating a Resource Class&#8217;">
    <input type="hidden" title="movePageDialogEditPageTitle" value="Set Page Location">
    <input type="hidden" title="movePageDialogMoveButton" value="Move">
    <input type="hidden" title="movePageDialogOkButton" value="OK">
    <input type="hidden" title="movePageDialogCancelButton" value="Cancel">
    <input type="hidden" title="movePageDialogBrowsePanelTip" value="Click to select the new parent page for this page and its children.">
    <input type="hidden" title="movePageDialogSearchPanel" value="Search">
    <input type="hidden" title="movePageDialogHistoryPanel" value="Recently Viewed">
    <input type="hidden" title="movePageDialogHistoryNoResults" value="There were no recently viewed pages found.">
    <input type="hidden" title="movePageDialogLocationPanel" value="Known Location">
    <input type="hidden" title="movePageDialogLocationNotFound" value="The specified page was not found.">
    <input type="hidden" title="movePageDialogBrowsePanel" value="Browse">
    <input type="hidden" title="movePageDialogPanelLoadErrorMsg" value="Error reading the panel content from the server.">
    <input type="hidden" title="movePageDialogPanelLoadErrorTip" value="You could try reloading the page and launching the dialog again.">
    <input type="hidden" title="movePageDialogPanelLoadErrorStatus" value="HTTP Status">
    <input type="hidden" title="movePageDialogNoSelectionErrorMsg" value="You must make a selection in the tree before you can move the page.">
    <input type="hidden" title="movePageDialogSearchError" value="Failed to retrieve search results from the server.">
    <input type="hidden" title="movePageDialogSearchNoResults" value="There were no pages found containing <b>{0}</b>.">
    <input type="hidden" title="movePageDialogSearchResultCount" value="Showing <b>{0}</b>-<b>{1}</b> of <b>{2}</b> pages containing <b>{3}</b>.">
    <input type="hidden" title="movePageDialogMoveFailed" value="Move failed. There was a problem contacting the server.">
    <input type="hidden" title="movePageDialogCannotChangeSpace" value="You cannot move this page to another space because you do not have permission to remove it from this space.">
    <input type="hidden" title="pageTitle" value="Creating a Resource Class"/>
    <input type="hidden" title="parentPageTitle" value="Custom Resource Classes"/>
    <input type="hidden" title="fromPageTitle" value=""/>
    <input type="hidden" title="spaceKey" value="revolution20"/>
    <input type="hidden" title="spaceName" value="MODx Revolution 2.x"/>
    <input type="hidden" title="movePageDialogInvalidLocation" value="You cannot move a page to be underneath itself or its children."/>
    <input type="hidden" title="movePageDialogOrderingTitle" value="Page Ordering"/>
    <input type="hidden" title="movePageDialogBackButton" value="Back"/>
    <input type="hidden" title="movePageDialogMoveAndOrderButton" value="Reorder"/>
    <input type="hidden" title="movePageDialogNextButton" value="Move"/>    
</fieldset>

<script type="text/x-template" title="movePageDialog">
    <div class="row information">
        Specify the new parent page for this page and its children by space and title.
    </div>
    <div class="form">
        <fieldset>
            

    <legend class="assistive"><span>Change the Parent Page to a Known Page</span></legend>
            <div class="row">
                <label for="new-space">New space:</label>
                <div class="value new-space-value">
                    <input id="new-space-key" name="new-space-key" type="hidden" value="revolution20">
                                            <span class="space-input">
                            <input id="new-space" name="new-space" value="MODx Revolution 2.x" disabled="disabled">
                        </span>
                        <span class="description warning">You cannot move this page to another space because you do not have permission to remove it from this space.</span>
                                        <div class="new-space-dropdown aui-dd-parent"></div>
                </div>
            </div>
            <div class="row">
                <label for="new-parent-page">New parent page:</label>
                <div class="value new-parent-page-value">
                    <span class="page-input">
                        <input id="new-parent-page" name="new-parent-page" value="Custom Resource Classes">
                    </span>
                    <span class="description">Start typing a page title to see a list of suggestions.</span>
                    <div class="new-parent-page-dropdown aui-dd-parent autocomplete"></div>
                </div>
            </div>
        </fieldset>
    </div>
    <div class="location-info">
        <div class="row">
            <label>Current location:</label>
            <div class="value breadcrumbs-container">
                <div class="breadcrumbs-line">
                    <ul id="current-parent-breadcrumbs" class="breadcrumbs">
                    </ul>
                </div>
            </div>
        </div>
        <div class="row">
            <label>New location:</label>
            <div class="value breadcrumbs-container">
                <div class="breadcrumbs-line">
                    <ul id="new-parent-breadcrumbs" class="breadcrumbs">
                    </ul>
                </div>
            </div>
        </div>
    </div>
</script>
<script type="text/x-template" title="movePageErrors">
    <div id="move-errors" class="hidden warning"></div>
</script>
<script type="text/x-template" title="movePageBreadcrumb">
    <li><a class="{2}" title="{3}" tabindex="-1"><span>{0}</span></a></li>
</script>
<script type="text/x-template" title="movePageBreadcrumbLoading">
    <li class="loading"><span>Loading breadcrumbs&hellip;</span></li>
</script>
<script type="text/x-template" title="movePageBreadcrumbError">
    <li class="warning last"><span>Error retrieving breadcrumbs.</span></li>
</script>
<script type="text/x-template" title="movePageNoMatchingPages">
    <ol><li><span class="warning">No matching pages found.</span></li></ol>
</script>
<script type="text/x-template" title="movePageNoMatchingSpaces">
    <ol><li><span class="warning">No matching spaces found.</span></li></ol>
</script>

<script type="text/x-template" title="movePageSearchPanel">
<div class="row information">
    Search for and select the new parent page for this page and its children.
</div>
<div id="move-page-search-container" class="row">
    <div class="search-form">
        <fieldset>
            

    <legend class="assistive"><span>Search for a New Parent Page</span></legend>
            

    <label  for="move-page-search-query" class="assistive">Search keywords</label>
            <input class="search-query" id="move-page-search-query">
            

    <label  for="move-page-search-space" class="assistive">Search in space</label>
                            <select id="move-page-search-space" class="search-space" disabled="disabled">
                    <option value="revolution20" selected="selected">MODx Revolution 2.x</option>
                </select>
                        <input type="button" value="Search">
                            <div class="description warning">You cannot move this page to another space because you do not have permission to remove it from this space.</div>
                    </fieldset>
    </div>
    <div class="search-results">
    </div>
</div>
</script>
<script type="text/x-template" title="movePageSearchResultsLoading">
    <div class="searching">Searching…</div>
</script>

<script type="text/x-template" title="movePageHistoryPanel">
<div class="row information">
    Select the new parent page for this page and its children from your history.
</div>
<div id="move-page-search-container" class="row">
    <div class="search-results">
    </div>
</div>
</script>
<script type="text/x-template" title="movePageHistoryLoading">
    <div class="searching">Loading…</div>
</script>
<script type="text/x-template" title="movePageBrowsePanel">
    <div class="row information">
        Click to select the new parent page for this page and its children.
    </div>
    <div class="tree"></div>
</script>
<script type="text/x-template" title="movePagePanelLoading">
    <span>Loading…</span>
</script>
<script type="text/x-template" title="movePageBrowsePanelSpace">
    <ul><li id='tree-root-node-item' class='root-node-list-item'><a class='root-node' href='#'>{0}</a></li></ul>
</script>
<script type="text/x-template" title="orderingPagePanel">
<div id="orderingPlaceHolder"></div>
</script>
<script type="text/x-template" title="reorderCheckbox">
<span id="reorderRequirement"><input id="reorderCheck" type="checkbox" name="reorderFlag" title="Choose the position of this page within the list of child pages."/><label for="reorderCheck" title="Choose the position of this page within the list of child pages.">Reorder</label></span>
</script>
<script type="text/x-template" title="move-help-link">
    <div class="dialog-help-link">
            <a href="http://docs.atlassian.com/confluence/docs-33/Moving+a+Page" target="_blank">Help</a>
    </div>
</script>
<script type="text/x-template" title="searchResultsGrid">
    <table>
        <thead>
            <tr class="header">
                <th class="search-result-title">Page Title</th>
                <th class="search-result-space">Space</th>
                <th class="search-result-date">Updated</th>
            </tr>
        </thead>
    </table>
</script>
<script type="text/x-template" title="searchResultsGridCount">
    <p class="search-result-count">{0}</p>
</script>
<script type="text/x-template" title="searchResultsGridRow">
    <tr class="search-result">
        <th class="search-result-title"><a href="{1}" class="content-type-{2}"><span>{0}</span></a></th>
        <td class="search-result-space"><a class="space" href="/display/{4}/" title="{3}">{3}</a></td>
        <td class="search-result-date"><span class="date" title="{6}">{5}</span></td>
    </tr>
</script>
<!-- Start restrictions section -->
<fieldset class="hidden parameters i18n">
        <input type="hidden" id="i18n.page.perms.error.invalid.entity.names" value="Unknown user or group:">
        <input type="hidden" id="i18n.page.perms.dialog.heading" value="Page Restrictions">
        <input type="hidden" id="i18n.page.perms.editing.restricted.to" value="Editing restricted to:">
        <input type="hidden" id="i18n.cancel.name" value="Cancel">
        <input type="hidden" id="i18n.close.name" value="Close">
        <input type="hidden" id="i18n.update.name" value="Save">
</fieldset>

<script type="text/x-template" title="page-permissions-div">
<div id="page-permissions-div">
    <div id="page-permissions-editor-form">

                <div id="page-permissions-error-div" class="hidden">
            <a href="#" id="permissions-error-div-close">Ok</a>
            <div></div>
        </div>

                <div id="page-permissions-type-radios" class="page-permissions-label-rows">
            <div>
                <input id="restrictViewRadio" type="radio" checked="checked" name="pagePermissionTypeRadio" value="view"/>
                <label for="restrictViewRadio">Restrict viewing of this page</label>
                <input id="restrictEditRadio" type="radio" name="pagePermissionTypeRadio" value="edit"/>
                <label for="restrictEditRadio">Restrict editing of this page</label>
            </div>
        </div>
        <div id="page-permissions-input" class="page-permissions-label-rows">
            <div class="page-permissions-label">To:</div>
            <div id="page-permissions-chooser-box">
                                <span id="page-permissions-choose-user" class="ajs-button">
                    



    



<a href="#" id='userpicker-popup-link-image' onClick="var picker = window.open('/spaces/openuserpicker.action?key=revolution20&amp;startIndex=0&amp;onPopupSubmit=AJS.PagePermissions.addUserPermissions', 'EntitiesPicker', 'status=yes,resizable=yes,top=100,left=200,width=700,height=680,scrollbars=yes'); picker.focus(); return false;"><img src="/s/1911/69/_/images/icons/user_16.gif" height=16 width=16 border=0 align="absmiddle"  title="Choose users" /></a>
<a href="#" id='userpicker-popup-link-text' onClick="var picker = window.open('/spaces/openuserpicker.action?key=revolution20&amp;startIndex=0&amp;onPopupSubmit=AJS.PagePermissions.addUserPermissions', 'EntitiesPicker', 'status=yes,resizable=yes,top=100,left=200,width=700,height=680,scrollbars=yes'); picker.focus(); return false;">Person...</a>


                </span>
                <span id="page-permissions-choose-group" class="ajs-button">
                    



    

 

<a href="#" id='grouppicker-popup-link-image' onClick="var picker = window.open('/spaces/opengrouppicker.action?key=revolution20&amp;startIndex=0&amp;actionName=dosearchgroups.action&amp;onPopupSubmit=AJS.PagePermissions.addGroupPermissions', 'EntitiesPicker', 'status=yes,resizable=yes,top=100,left=200,width=580,height=550,scrollbars=yes'); picker.focus(); return false;"><img src="/s/1911/69/_/images/icons/group_16.gif" height=16 width=16 border=0 align="absmiddle"  title="Choose groups" /></a>
<a href="#" id='grouppicker-popup-link-text' onClick="var picker = window.open('/spaces/opengrouppicker.action?key=revolution20&amp;startIndex=0&amp;actionName=dosearchgroups.action&amp;onPopupSubmit=AJS.PagePermissions.addGroupPermissions', 'EntitiesPicker', 'status=yes,resizable=yes,top=100,left=200,width=580,height=550,scrollbars=yes'); picker.focus(); return false;">Group...</a>


                </span>
            </div>
            <div id="page-permissions-input-box">
                                <span>
                    <input type="text" id="page-permissions-names-input" class="input-placeholder" value="Enter user or group name" name="permissionNames" size="30" autocomplete="off"/>
                </span>
                <input
    type="hidden"
                            id="page-permissions-names-hidden"           />                <img height="16px" width="1px" src="/s/1911/69/_/images/border/spacer.gif"/>
                <input type="button" id="add-typed-names" value="Restrict">
            </div>
        </div>
    </div>
    <div id="page-permissions-tables">
        <div id="page-permissions-table-div">
                        <table id="page-permissions-table" class="page-permissions-table">
                <tr id="page-permissions-no-views" class="marker-row">
                    <td colspan="3" class="page-permissions-marker-cell"><span>No view restrictions are defined for this page</span></td>
                </tr>
                <tr id="page-permissions-no-edits" class="marker-row">
                    <td colspan="3" class="page-permissions-marker-cell"><span>No edit restrictions are defined for this page</span></td>
                </tr>
            </table>
        </div>
        <div id="page-inherited-permissions-table-div" class="hidden">
            <span id="page-inherited-permissions-table-desc">
                <a class="icon twisty-closed">Show/Hide</a>
                <a id="toggle-inherited-permissions" title="Click to see inherited restrictions">This page has restricted parent pages. It can only be seen by users who can see those parent pages.</a>
            </span>
            <div id="page-inherited-permissions-tables" class="hidden page-inheritance-togglable"></div>
        </div>
    </div>
</div>
</script>

<script type="text/x-template" title="permissions-row-template">
    <tr class="permission-row">
                                
                <td class="page-permissions-marker-cell" width="20%">
            <span>Viewing restricted to:</span>
        </td>
                <td class="permission-entity" nowrap="true" width="40%">
            <span class="entity-container">
                <img class="permission-entity-picture"/>
                <span class="permission-entity-display-name"></span>
                <span class="permission-entity-name-wrap">&nbsp;(<span class="permission-entity-name"></span>)</span>
            </span>
        </td>
        <td class="permission-detail-column">
            <div class="permission-remove-div">
                <a href="#" class="remove-permission-link">Remove restriction</a>
            </div>
        </td>
    </tr>
</script>
<script type="text/x-template" title="permissions-username-no-suggestion-template">
    <ol>
        <li><a href="#" class="message"><span>No matches</span></a></li>
    </ol>
</script>
<script type="text/x-template" title="page-inherited-permissions-table-div-template">
        <div class="page-inherited-permissions-owner-div">
        <div class="page-inherited-permissions-table-desc">Viewing restrictions apply to “<a></a>”. In order to see “<span></span>”, a user must be in the following list of users and groups:</div>
        <table class="page-permissions-table"></table>
    </div>
</script>
<script type="text/x-template" title="page-restrictions-help-link">
    <div class="dialog-help-link">
            <a href="http://docs.atlassian.com/confluence/docs-33/Page+Restrictions" target="_blank">Help</a>
    </div>
</script>
<!-- End restrictions section -->

        
    
    
        <fieldset class="hidden parameters">
            <input type="hidden" title="parentPageId" value="36634950">
        </fieldset>

        
                            
    

                    

        
        <a href="#page-metadata-end" class="assistive">Skip to end of metadata</a>
<div id="page-metadata-start" class="assistive"></div>

    <div class="page-metadata">
        <ul>
                            <li class="page-metadata-item noprint">
    
            
    
    <a  id="content-metadata-page-restrictions" href="#"  class="page-metadata-icon page-restrictions hidden"   title="Page restrictions apply. Click the lock icon to view or edit the restriction.">
                   <span>Page restrictions apply</span></a>        </li>
                            <li class="page-metadata-item noprint">
    
        
    
    <a  id="content-metadata-attachments" href="/pages/viewpageattachments.action?pageId=36634952&metadataLink=true"  class="page-metadata-icon action-view-attachments"  accessKey="a"  title="Attachments: 3">
                   <span><span class="page-metadata-attachments-text">Attachments:</span><span class="page-metadata-attachments-count">3</span></span></a>        </li>
                        <li class="page-metadata-modification-info">
                                    Added by <a href="/display/~splittingred"
                          class="url fn"
                   >Shaun McCormick</a>, last edited by <a href="/display/~everettg_99"
                          class="url fn"
                   >Everett Griffiths</a> on Jun 01, 2013
                                                                <span class="noprint">&nbsp;(<a id="view-change-link" href="/pages/diffpages.action?pageId=36634952&originalId=46137353">view change</a>)</span>
                                                </li>
                    </ul>
          <div id="version-comment" class="noteMacro" style="display: none;">
      <strong>Comment:</strong>
      <br />
  </div>
    </div>


<a href="#page-metadata-start" class="assistive">Go to start of metadata</a>
<div id="page-metadata-end" class="assistive"></div>
        
        <fieldset class="hidden parameters">
                        <input type="hidden" title="browsePageTreeMode" value="view">
        </fieldset>

        <div class="wiki-content">
           <!-- wiki content -->
            <div class="panel" style="border-width: 1px;"><div class="panelContent">
<p>This tutorial is part of a Series:</p>
<ul>
	<li>Part I: Creating a Custom Resource Class</li>
	<li><a href="/display/revolution20/Creating+a+Resource+Class+-+Step+2" title="Creating a Resource Class - Step 2">Part II: Handling our CRC Behavior</a></li>
	<li><a href="/display/revolution20/Creating+a+Resource+Class+-+Step+3" title="Creating a Resource Class - Step 3">Part III: Customizing the Controllers</a></li>
	<li><a href="/display/revolution20/Creating+a+Resource+Class+-+Step+4" title="Creating a Resource Class - Step 4">Part IV: Customizing the Processors</a></li>
</ul>
</div></div>

<p>We're going to create a sample Custom Resource Class (CRC) that does a very simple task - it outputs a copyright on the bottom of a page with the current date. Yes, something this trivial should be done by placing a <a href="/display/revolution20/Snippets" title="Snippets">Snippet</a> in your <a href="/display/revolution20/Templates" title="Templates">Template</a>, but we want to illustrate the concept of CRCs using something very, very simple, so bear with us. <img class="emoticon" src="/images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<p>This page deals with Part I - creating the actual Custom Resource Class itself. <a href="/display/revolution20/Creating+a+Resource+Class+-+Step+2" title="Creating a Resource Class - Step 2">Part II</a> will actually implement the behavior of appending the copyright. <a href="/display/revolution20/Creating+a+Resource+Class+-+Step+3" title="Creating a Resource Class - Step 3">Part III</a> will deal with overriding the Controllers, and <a href="/display/revolution20/Creating+a+Resource+Class+-+Step+4" title="Creating a Resource Class - Step 4">Part IV</a> will deal with overriding the Processors. The files used in this tutorial can be found on GitHub for reference: <a href="https://github.com/modxcms/CopyrightedResource" class="external-link" rel="nofollow">https://github.com/modxcms/CopyrightedResource</a></p>

<h2><a name="CreatingaResourceClass-CreateyourXMLSchema"></a>Create your XML Schema</h2>

<p>First, we are going to create a xPDO package using a schema (if you're not familiar on how to do this, please review the page on <a href="/display/revolution20/Developing+an+Extra+in+MODX+Revolution" title="Developing an Extra in MODX Revolution">Developing an Extra in MODX Revolution</a> tutorial and/or the <a href="/display/xPDO20/Defining+a+Schema" title="Defining a Schema">xPDO Defining a Schema</a> tutorial).</p>

<p>If you are planning on versioning this code in Git, your paths may be different, but ultimately you want your files to end up inside the <tt>core/components/your_component/</tt> directory.  So for this tutorial our package is named "copyrightedresource", so we will create the schema file <tt>core/components/copyrightedresource/model/schema/copyrightedresource.mysql.schema.xml</tt>:</p>


<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">&lt;?xml version=<span class="code-quote">"1.0"</span> encoding=<span class="code-quote">"UTF-8"</span>?&gt;
&lt;model <span class="code-keyword">package</span>=<span class="code-quote">"copyrightedresource"</span> version=<span class="code-quote">"1.0"</span> baseClass=<span class="code-quote">"xPDOObject"</span> platform=<span class="code-quote">"mysql"</span> defaultEngine=<span class="code-quote">"MyISAM"</span>&gt;
    &lt;object class=<span class="code-quote">"CopyrightedResource"</span> <span class="code-keyword">extends</span>=<span class="code-quote">"modResource"</span> /&gt;
&lt;/model&gt;</pre>
</div></div>

<p>Note that the "package" attribute in the XML should reflect the exact name of our package: "copyrightedresource".</p>

<h2><a name="CreatingaResourceClass-GeneratingyourClassFiles"></a>Generating your Class Files</h2>

<p>The next step is to generate the maps and classes for the model. You can do this using your own script, you'll just want to refer to the docs on <a href="/display/xPDO20/Generating+the+Model+Code" title="Generating the Model Code">Generating the Model Code</a> and xPDO's <a href="/display/xPDO20/xPDOGenerator.parseSchema" title="xPDOGenerator.parseSchema">parseSchema()</a> function.  We've provided a sample script below. It's a modified version of the script used when <a href="/display/revolution20/Reverse+Engineer+xPDO+Classes+from+Existing+Database+Table" title="Reverse Engineer xPDO Classes from Existing Database Table">Reverse Engineering xPDO classes from an existing Database Table</a>.</p>

<p>Create the script at the web root of your MODX site, then execute it by hitting that page in a browser.</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
/**
 * Parses a MODX XML schema file in order to create the corresponding PHP classes
 * and (optionally) database tables.  Use <span class="code-keyword">this</span> script when you are editing a MODX XML
 * schema file and you are using it as your basis <span class="code-keyword">for</span> creating PHP classes.  Do not
 * use <span class="code-keyword">this</span> script <span class="code-keyword">if</span> you are trying to reverse-engineer existing database tables!
 *
 * See http:<span class="code-comment">//rtfm.modx.com/display/revolution20/Creating+a+Resource+<span class="code-object">Class</span>
</span> * 
 * USAGE:
 * 1. Create <span class="code-keyword">this</span> file in the docroot (webroot) of your MODX installation.
 * 2. Execute the file by visiting it in a browser, e.g. http:<span class="code-comment">//yoursite.com/parse_schema.php
</span> */
<span class="code-comment">//------------------------------------------------------------------------------
</span><span class="code-comment">//! CONFIGURATION
</span><span class="code-comment">//------------------------------------------------------------------------------
</span><span class="code-comment">// Your <span class="code-keyword">package</span> shortname:
</span>$package_name = 'copyrightedresource';

<span class="code-comment">// Set <span class="code-keyword">this</span> to <span class="code-keyword">false</span> <span class="code-keyword">if</span> you've started to customize the PHP classes, otherwise
</span><span class="code-comment">// your changes will be overwritten!
</span>$regenerate_classes = <span class="code-keyword">true</span>;


<span class="code-comment">//------------------------------------------------------------------------------
</span><span class="code-comment">//  DO NOT TOUCH BELOW THIS LINE
</span><span class="code-comment">//------------------------------------------------------------------------------
</span>require_once 'config.core.php';

<span class="code-keyword">if</span> (!defined('MODX_CORE_PATH')) {
    print_msg('&lt;h1&gt;Parsing Error&lt;/h1&gt;
        &lt;p&gt;MODX_CORE_PATH not defined! Did you include the correct config file?&lt;/p&gt;');
    exit;
}
require_once MODX_CORE_PATH . 'config/config.inc.php';
$xpdo_path = strtr(MODX_CORE_PATH . 'xpdo/xpdo.class.php', '\\', '/');
include_once ( $xpdo_path );
 
<span class="code-comment">// A few definitions of files/folders:
</span>$package_dir = MODX_CORE_PATH . <span class="code-quote">"components/$package_name/"</span>;
$model_dir = MODX_CORE_PATH . <span class="code-quote">"components/$package_name/model/"</span>;
$class_dir = MODX_CORE_PATH . <span class="code-quote">"components/$package_name/model/$package_name"</span>;
$schema_dir = MODX_CORE_PATH . <span class="code-quote">"components/$package_name/model/schema"</span>;
$mysql_class_dir = MODX_CORE_PATH . <span class="code-quote">"components/$package_name/model/$package_name/mysql"</span>;
$xml_schema_file = MODX_CORE_PATH . <span class="code-quote">"components/$package_name/model/schema/$package_name.mysql.schema.xml"</span>;
 
<span class="code-comment">// A few variables used to track execution times.
</span>$mtime= microtime();
$mtime= explode(' ', $mtime);
$mtime= $mtime[1] + $mtime[0];
$tstart= $mtime;
 
<span class="code-comment">// Validations
</span><span class="code-keyword">if</span> ( empty($package_name) ) {
    print_msg('&lt;h1&gt;Parsing Error&lt;/h1&gt;
        &lt;p&gt;The $package_name cannot be empty!  Please adjust the configuration and <span class="code-keyword">try</span> again.&lt;/p&gt;');
    exit;
}
 
<span class="code-comment">// Create directories <span class="code-keyword">if</span> necessary
</span>$dirs = array($package_dir, $schema_dir ,$mysql_class_dir, $class_dir);
 
foreach ($dirs as $d) {
    <span class="code-keyword">if</span> ( !file_exists($d) ) {
        <span class="code-keyword">if</span> ( !mkdir($d, 0777, <span class="code-keyword">true</span>) ) {
            print_msg( sprintf('&lt;h1&gt;Parsing Error&lt;/h1&gt;
                &lt;p&gt;Error creating &lt;code&gt;%s&lt;/code&gt;&lt;/p&gt;
                &lt;p&gt;Create the directory (and its parents) and <span class="code-keyword">try</span> again.&lt;/p&gt;'
                , $d
            ));
            exit;
        }
    }
    <span class="code-keyword">if</span> ( !is_writable($d) ) {
        print_msg( sprintf('&lt;h1&gt;Parsing Error&lt;/h1&gt;
            &lt;p&gt;The &lt;code&gt;%s&lt;/code&gt; directory is not writable by PHP.&lt;/p&gt;
            &lt;p&gt;Adjust the permissions and <span class="code-keyword">try</span> again.&lt;/p&gt;'
        , $d));
        exit;
    }
}
 

print_msg( sprintf('&lt;br/&gt;&lt;strong&gt;Ok:&lt;/strong&gt; The necessary directories exist and have the correct permissions inside of &lt;br/&gt;
        &lt;code&gt;%s&lt;/code&gt;', $package_dir));
 
<span class="code-keyword">if</span> (file_exists($xml_schema_file)) {
    print_msg( sprintf('&lt;br/&gt;&lt;strong&gt;Ok:&lt;/strong&gt; Using existing XML schema file:&lt;br/&gt;&lt;code&gt;%s&lt;/code&gt;',$xml_schema_file));
}

$xpdo = <span class="code-keyword">new</span> xPDO(<span class="code-quote">"mysql:host=$database_server;dbname=$dbase"</span>, $database_user, $database_password, $table_prefix);
$xpdo-&gt;setLogLevel(xPDO::LOG_LEVEL_INFO);
$xpdo-&gt;setLogTarget(XPDO_CLI_MODE ? 'ECHO' : 'HTML');

$manager = $xpdo-&gt;getManager();
$generator = $manager-&gt;getGenerator();

<span class="code-comment">// Use <span class="code-keyword">this</span> to generate classes and maps from your schema
</span><span class="code-keyword">if</span> ($regenerate_classes) { 
    print_msg('&lt;br/&gt;Attempting to remove/regenerate class files...');
    delete_class_files($class_dir);
    delete_class_files($mysql_class_dir);
}

$generator-&gt;parseSchema($xml_schema_file,$model_dir);


$mtime= microtime();
$mtime= explode(<span class="code-quote">" "</span>, $mtime);
$mtime= $mtime[1] + $mtime[0];
$tend= $mtime;
$totalTime= ($tend - $tstart);
$totalTime= sprintf(<span class="code-quote">"%2.4f s"</span>, $totalTime);

print_msg(<span class="code-quote">"&lt;br/&gt;&lt;br/&gt;&lt;strong&gt;Finished!&lt;/strong&gt; Execution time: {$totalTime}&lt;br/&gt;"</span>);
print_msg(<span class="code-quote">"&lt;br/&gt;Check &lt;code&gt;$class_dir&lt;/code&gt; <span class="code-keyword">for</span> your newly generated class files!"</span>); 
exit();

<span class="code-comment">//------------------------------------------------------------------------------
</span><span class="code-comment">//! FUNCTIONS
</span><span class="code-comment">//------------------------------------------------------------------------------
</span>/**
 * Deletes the MODX class files in a given directory.
 *
 * @param string $dir: full path to directory containing class files you wish to delete.
 * @<span class="code-keyword">return</span> void
 */
function delete_class_files($dir) {
    global $verbose;
 
    $all_files = scandir($dir);
    foreach ( $all_files as $f ) {
        <span class="code-keyword">if</span> ( preg_match('#\.class\.php$#i', $f) || preg_match('#\.map\.inc\.php$#i', $f)) {
            <span class="code-keyword">if</span> ( unlink(<span class="code-quote">"$dir/$f"</span>) ) {
                <span class="code-keyword">if</span> ($verbose) {
                    print_msg( sprintf('&lt;br/&gt;Deleted file: &lt;code&gt;%s/%s&lt;/code&gt;',$dir,$f) );
                }
            }
            <span class="code-keyword">else</span> {
                print_msg( sprintf('&lt;br/&gt;Failed to delete file: &lt;code&gt;%s/%s&lt;/code&gt;',$dir,$f) );
            }
        }
    }
}

/**
 * Formats/prints messages. HTML is stripped <span class="code-keyword">if</span> <span class="code-keyword">this</span> is run via the command line.
 *
 * @param string $msg to be printed
 * @<span class="code-keyword">return</span> void <span class="code-keyword">this</span> actually prints data to stdout
 */
function print_msg($msg) {
    <span class="code-keyword">if</span> ( php_sapi_name() == 'cli' ) {
        $msg = preg_replace('#&lt;br\s*/&gt;#i', <span class="code-quote">"\n"</span>, $msg);
        $msg = preg_replace('#&lt;h1&gt;#i', '== ', $msg);
        $msg = preg_replace('#&lt;/h1&gt;#i', ' ==', $msg);
        $msg = preg_replace('#&lt;h2&gt;#i', '=== ', $msg);
        $msg = preg_replace('#&lt;/h2&gt;#i', ' ===', $msg);
        $msg = strip_tags($msg) . <span class="code-quote">"\n"</span>;
    }
    print $msg;
}
?&gt;
</pre>
</div></div>

<p>After this script runs, a handful of PHP files should have been created inside your <tt>core/components/copyrightedresource/model/</tt> directory. See the image below.</p>

<p><span class="image-wrap" style=""><img src="/download/attachments/36634952/copyrightedresource_class_files.png?version=1&amp;modificationDate=1360972022000" style="border: 1px solid black" /></span></p>

<p>The <tt>copyrightedresource.class.php</tt> file should look like this:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
class CopyrightedResource <span class="code-keyword">extends</span> modResource {
}
</pre>
</div></div>

<p>If the class files did not get created, the sample script should help you identify errors (usually permissions).</p>

<h2><a name="CreatingaResourceClass-CustomizingyourPHPclass"></a>Customizing your PHP class</h2>

<p>Once we have the basic PHP classes generated, we need to customize them.  </p>

<div class='panelMacro'><table class='noteMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Be Careful!</b><br />Once you've got your PHP classes generated, do not re-run the Parsing Script!  Doing so will destroy the changes that you're going to be making.</td></tr></table></div>

<p>Now we want to force the class_key of the resource, and ensure that it shows up in the Resource Create context menu (which we'll configure later on):</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
class CopyrightedResource <span class="code-keyword">extends</span> modResource {
    <span class="code-keyword">public</span> $showInContextMenu = <span class="code-keyword">true</span>;
    function __construct(xPDO &amp; $xpdo) {
        parent :: __construct($xpdo);
        $<span class="code-keyword">this</span>-&gt;set('class_key','CopyrightedResource');
    }
}
</pre>
</div></div>

<p>This forces the class_key to "CopyrightedResource", which is our class, and ensures our Resource class shows up in the left-hand tree's context menu.  This is how we govern the value set in the modx_site_content "class_key" column.</p>

<div class='panelMacro'><table class='warningMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="/images/icons/emoticons/forbidden.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>You should <b>never</b> add fields to the modResource table (yes, some Extras have done this, but it's not the proper way). Rather, create a separate related table to join into, or use Revolution 2.2.1+'s new properties field to store extra data.</td></tr></table></div>

<h3><a name="CreatingaResourceClass-GettingFamiliarwiththemodResourceInterfaceInterfaceclass"></a>Getting Familiar with the modResourceInterface Interface class</h3>

<p>For those of you geeks who want to code responsibly, it's a very good idea to look at the parent class here, so have a look inside the <tt>core/model/modx/modresource.class.php</tt>.</p>

<div class='panelMacro'><table class='tipMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Code Responsibly</b><br />Any time you extend a PHP class, you should look at the parent class, otherwise you won't know what you are implementing!</td></tr></table></div>

<p>If you look in the modResource class file, you'll see at the top a PHP Interface that defines what methods <b>must</b> be defined for a CRC to work:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
<span class="code-keyword">interface</span> modResourceInterface {
    <span class="code-keyword">public</span> <span class="code-keyword">static</span> function getControllerPath(xPDO &amp;$modx);
    <span class="code-keyword">public</span> function getContextMenuText();
    <span class="code-keyword">public</span> function getResourceTypeName();
}
</pre>
</div></div>

<p>We'll now go into detail on each of these methods and how they implement our CRC.</p>

<h3><a name="CreatingaResourceClass-CreateaNamespace"></a>Create a Namespace</h3>

<p>Before we go any further, create a <a href="/display/revolution20/Namespaces" title="Namespaces">Namespace</a> for your component.  For the sake of clarity, the name should match the name of your package: "copyrightedresource".</p>

<p>Log into the MODX manager and head to <b>System &#45;&gt; Namespaces</b>.  </p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
Namespace: copyrightedresource
Core Path: {core_path}components/copyrightedresource/
Assets Path: {assets_path}components/copyrightedresource/
</pre>
</div></div>


<p><span class="image-wrap" style=""><img src="/download/attachments/36634952/create_namespace.png?version=1&amp;modificationDate=1360974139000" style="border: 1px solid black" /></span></p>

<p>Note the special placeholders you can use to refer to your directories.</p>

<h3><a name="CreatingaResourceClass-AddingthegetControllerPathMethod"></a>Adding the getControllerPath Method</h3>

<p>Once you've added a namespace, we're going to add the getControllerPath method to our class by adding this to your <tt>copyrightedresource.class.php</tt> class:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java"><span class="code-keyword">public</span> <span class="code-keyword">static</span> function getControllerPath(xPDO &amp;$modx) {
    <span class="code-keyword">return</span> $modx-&gt;getOption('copyrightedresource.core_path',<span class="code-keyword">null</span>,$modx-&gt;getOption('core_path').'components/copyrightedresource/').'controllers/';
}</pre>
</div></div>

<p>This method tells MODX to look for our manager controllers in our custom directory, thereby overriding the standard default controllers. The line first checks for a custom System Setting that shows where our CRC core directory path is (we add this setting to make our life easier when we are developing the code so we can keep it in a location that is non-standard so that we may version it more easily).  If the System Setting has not been set, the code will look for our CRC path in 'core/components/copyrightedresource/'. It looks in the "controllers/" subdirectory.</p>

<p>Great! MODX will now look for our controllers in that directory. We'll get into creating those in Step 2 of the tutorial.</p>

<h3><a name="CreatingaResourceClass-AddingthegetContextMenuTextMethod"></a>Adding the getContextMenuText Method</h3>

<p>Go ahead and add this method to your class:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java"><span class="code-keyword">public</span> function getContextMenuText() {
  $<span class="code-keyword">this</span>-&gt;xpdo-&gt;lexicon-&gt;load('copyrightedresource:<span class="code-keyword">default</span>');
  <span class="code-keyword">return</span> array(
    'text_create' =&gt; $<span class="code-keyword">this</span>-&gt;xpdo-&gt;lexicon('copyrightedresource'),
    'text_create_here' =&gt; $<span class="code-keyword">this</span>-&gt;xpdo-&gt;lexicon('copyrightedresource_create_here'),
  );
}</pre>
</div></div>

<p>This returns two translated strings that MODX will insert into the "Create" context menu when right-clicking on a node in the Resource tab on the left-hand tree.</p>

<p>Just to be clear, you don't necessarily <em>need</em> to use the MODX lexicon here. You could simply return the text like so:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java"><span class="code-keyword">public</span> function getContextMenuText() {
  <span class="code-keyword">return</span> array(
    'text_create' =&gt; 'Copyrighted Page',
    'text_create_here' =&gt; 'Create a Copyrighted Page Here',
  );
}</pre>
</div></div>

<p>And that'd work fine. But MODX allows you to load a Lexicon Topic so that you can translate the strings for your worldwide users.</p>

<h3><a name="CreatingaResourceClass-AddingthegetResourceTypeNameMethod"></a>Adding the getResourceTypeName Method</h3>

<p>This final method tells MODX what the translated "name" of your CRC is. We probably don't want to call it "CopyrightedResource", so we're going to plop in this method:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
<span class="code-keyword">public</span> function getResourceTypeName() {
  $<span class="code-keyword">this</span>-&gt;xpdo-&gt;lexicon-&gt;load('copyrightedresource:<span class="code-keyword">default</span>');
  <span class="code-keyword">return</span> $<span class="code-keyword">this</span>-&gt;xpdo-&gt;lexicon('copyrightedresource');
}</pre>
</div></div>

<p>Again, this could just return a string:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java"><span class="code-keyword">public</span> function getResourceTypeName() {
  <span class="code-keyword">return</span> 'Copyrighted Page';
}</pre>
</div></div>

<p>This tells MODX to call it a "Copyrighted Page", rather than its class name, when dealing with it in the manager.</p>

<h2><a name="CreatingaResourceClass-AddingtheClasstoExtensionPackages"></a>Adding the Class to Extension Packages</h2>

<p>To load the CRC properly, you'll need to add it to the Extension Packages. Why? Well, MODX needs to load your CRC when it loads, so that it has a "library" of sorts of all the loaded Resource Classes available to it. MODX 2.2 provides you with an assistance method to add your package to the Extension Packages dataset: </p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">$modx-&gt;addExtensionPackage('copyrightedresource','/path/to/copyrightedresource/model/');</pre>
</div></div>

<p>Simply run this code once and MODX will automatically add it to the Extension Packages. Here is another sample script for helping you to do this:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
&lt;?php
/**
 * Use <span class="code-keyword">this</span> script to add your extension <span class="code-keyword">package</span> to MODX's <span class="code-quote">"radar"</span>.
 * This should only need to be done once.
 * Note that we have to instantiate MODX: xPDO is not sufficient
 * because we're running functions that exist only in MODX, not in the 
 * underlying xPDO framework.
 *
 * USAGE:
 * 1. Copy <span class="code-keyword">this</span> file into the docroot (web root) of your MODX installation.
 * 2. Execute the file by visiting it in a browser, e.g. http:<span class="code-comment">//yoursite.com/add_extension.php
</span> */
<span class="code-comment">//------------------------------------------------------------------------------
</span><span class="code-comment">//! CONFIGURATION
</span><span class="code-comment">//------------------------------------------------------------------------------
</span><span class="code-comment">// Your <span class="code-keyword">package</span> shortname:
</span>$package_name = 'copyrightedresource';

<span class="code-comment">//------------------------------------------------------------------------------
</span><span class="code-comment">//  DO NOT TOUCH BELOW THIS LINE
</span><span class="code-comment">//------------------------------------------------------------------------------
</span>define('MODX_API_MODE', <span class="code-keyword">true</span>);
require_once('index.php');
<span class="code-keyword">if</span> (!defined('MODX_CORE_PATH')) {
    print '&lt;p&gt;MODX_CORE_PATH not defined! Did you put <span class="code-keyword">this</span> script in the web root of your MODX installation?&lt;/p&gt;';
    exit;
}

$modx= <span class="code-keyword">new</span> modX();
$modx-&gt;initialize('mgr');

$modx-&gt;setLogLevel(xPDO::LOG_LEVEL_INFO);
$modx-&gt;setLogTarget(XPDO_CLI_MODE ? 'ECHO' : 'HTML');

$modx-&gt;addExtensionPackage($package_name,<span class="code-quote">"[[++core_path]]components/$package_name/model/"</span>);

print 'Success!';
?&gt;
</pre>
</div></div>

<p>To test whether or not this worked, log into the MODX manager and search the System Settings for the "extension_packages" key.  You should see something like this:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
[{<span class="code-quote">"copyrightedresource"</span>:{<span class="code-quote">"path"</span>:<span class="code-quote">"[[++core_path]]components/copyrightedresource/model/"</span>}}]
</pre>
</div></div>

<p>Note that you can use core_path placeholder in this path: this offers way to ensure that your path will work should you ever migrate your MODX site to a different server.</p>

<p>There's also a removeExtensionPackage as well for removing the package from MODX.</p>

<div class='panelMacro'><table class='tipMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>addExtensionPackage and removeExtensionPackage are very useful methods to add to a Resolver if you're building an Extra for your CRC so that this happens on install and uninstall.</td></tr></table></div>

<h2><a name="CreatingaResourceClass-Conclusion"></a>Conclusion</h2>

<p>Now, if you reload the page and right-click on a Resource in the tree, then move over "Create", you should see this:</p>

<p><span class="image-wrap" style=""><img src="/download/attachments/36634952/context-menu.png?version=1&amp;modificationDate=1322512993000" style="border: 0px solid black" /></span></p>

<p>Fantastic! Now we've got our Custom Resource Class loaded, and we're ready to start actually getting into the nitty-gritty. <a href="/display/revolution20/Creating+a+Resource+Class+-+Step+2" title="Creating a Resource Class - Step 2">Proceed onto Step 2</a>!</p>

<style type='text/css'>/*<![CDATA[*/
table.ScrollbarTable  {border: none;padding: 3px;width: 100%;padding: 3px;margin: 0px;background-color: #f0f0f0}
table.ScrollbarTable td.ScrollbarPrevIcon {text-align: center;width: 16px;border: none;}
table.ScrollbarTable td.ScrollbarPrevName {text-align: left;border: none;}
table.ScrollbarTable td.ScrollbarParent {text-align: center;border: none;}
table.ScrollbarTable td.ScrollbarNextName {text-align: right;border: none;}
table.ScrollbarTable td.ScrollbarNextIcon {text-align: center;width: 16px;border: none;}

/*]]>*/</style><div class="Scrollbar"><table class='ScrollbarTable'><tr><td width='33%' class='ScrollbarPrevName'>&nbsp;</td><td width='33%' class='ScrollbarParent'><sup><a href="/display/revolution20/Custom+Resource+Classes"><img border='0' align='middle' src='/images/icons/up_16.gif' width='8' height='8'></a></sup><a href="/display/revolution20/Custom+Resource+Classes">Custom Resource Classes</a></td><td width='33%' class='ScrollbarNextName'>&nbsp;<a href="/display/revolution20/Adding+a+Custom+Resource+Type+in+2.1+and+earlier">Adding a Custom Resource Type in 2.1 and earlier</a></td><td class='ScrollbarNextIcon'><a href="/display/revolution20/Adding+a+Custom+Resource+Type+in+2.1+and+earlier"><img border='0' align='middle' src='/images/icons/forwd_16.gif' width='16' height='16'></a></td></tr></table></div>
        </div>

        <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="http://oldrtfm.modx.com/display/revolution20/Creating+a+Resource+Class"
    dc:identifier="http://oldrtfm.modx.com/display/revolution20/Creating+a+Resource+Class"
    dc:title="Creating a Resource Class"
    trackback:ping="http://oldrtfm.modx.com/rpc/trackback/36634952"/>
</rdf:RDF>
-->

            
    


<fieldset class="hidden parameters">
    <legend>Labels parameters</legend>
    <input type="hidden" id="editLabel" value="Edit">
    <input type="hidden" id="addLabel" value="Add Labels">
    <input type="hidden" id="domainName" value="http://oldrtfm.modx.com">
    <input type="hidden" id="pageId" value="36634952">
    <input type="hidden" id="spaceKey" value="revolution20">
</fieldset>

<div id="labels-section" class="pageSection">
    <div id="default-labels-header" class="section-header">
        <h2 id="labels-section-title" class="section-title  hidden ">Labels</h2>
            </div>

    <div class="labels-editor">
        <div id="labelsList">
                    </div>

        <span class="errorMessage error" id="errorSpan"></span>
        <form method="GET" action="" id="add-labels-form">
            <div id="labelInputSpan" class="labels-input">
                <div id="labelOperationErrorContainer" class="hidden">
                    <span class="error"><span class="errorMessage" id="labelOperationErrorMessage"></span></span>
                </div>

                <div class="caption">Enter labels to add to this page:</div>
                <div id="label-input-fields">
                    <input autocomplete="off" id="labelsString" name="labelsString" value="" size="40">
                    <input id="add-labels-editor-button" type="submit" class="add-labels" value="Add">
                    <input id="close-labels-editor-button" type="submit" class="hide-labels-editor" value="Done">
                </div>
                <div id="waitImageAndStatus">
                    <img class="waiting" alt="Please wait" src="/s/1911/69/_/images/icons/wait.gif">&nbsp;
                    <span id="labelOperationStatus" class="smalltext"></span>
                </div>
                <div id="labelsAutocompleteList" class="aui-dd-parent"></div>
                <div class="labels-tip">
                    <div id="suggestedLabelsSpan"></div>
                    Looking for a label? Just start typing.
                </div>
            </div>
        </form>
    </div>
</div>

                    <div id="children-section" class="pageSection">
        
        <div class="section-header ">
            <h2 id="children-section-title" class="section-title">
                <a name="children">Child Pages (3)    </a>
            </h2>
            <span class="noprint">
                &nbsp;
                                    <a id="hide-children-link" class="grey" href="/display/revolution20/Creating+a+Resource+Class?showChildren=false&#0035;children">Hide Child Pages</a>
                
                &nbsp;|&nbsp; <a class="grey" href="/pages/listpages-dirview.action?key=revolution20&amp;openId=36634952#selectedPageInHierarchy">Reorder Pages</a>
                            </span>
        </div>
                    <div id="page-children" class="pageSectionBody">
                                                     <span class="icon icon-page">Page:</span>
                         <a href="/display/revolution20/Creating+a+Resource+Class+-+Step+2">Creating a Resource Class - Step 2</a>
                             <br>
                                                     <span class="icon icon-page">Page:</span>
                         <a href="/display/revolution20/Creating+a+Resource+Class+-+Step+3">Creating a Resource Class - Step 3</a>
                             <br>
                                                     <span class="icon icon-page">Page:</span>
                         <a href="/display/revolution20/Creating+a+Resource+Class+-+Step+4">Creating a Resource Class - Step 4</a>
                             <br>
                            </div>
                </div>
    
            




            
    

        
<fieldset class="parameters hidden">
    <input type="hidden" id="deleteCommentConfirmMessage" value="Are you sure you want to remove the comment?">
    <input type="hidden" id="collapseTooltip" value="Click to toggle the display of this comment.">
        </fieldset>






<div id="comments-section" class="pageSection">
    
    
    
    
                                    </div>


            
</div>


    




        
        

    
    
    


<fieldset class="hidden parameters">
        <input type="hidden" id="i18n.manage.watchers.dialog.title" value="Manage Watchers">
        <input type="hidden" id="i18n.manage.watchers.unable.to.remove.error" value="Failed to remove watcher. Refresh page to see latest status.">
        <input type="hidden" id="i18n.manage.watchers.status.adding.watcher" value="Adding watcher&amp;hellip;">
</fieldset>
<script type="text/x-template" title="manage-watchers-dialog">
<div class="dialog-content">
    <div class="column page-watchers">
        <h3>Watching this page</h3>
        <p class="description">These people are notified when the page is changed. You can add or remove people from this list.</p>
        <form action="/json/addwatch.action" method="POST">
                <input type="hidden" name="atl_token" value="TqlRFEPIGO">
            <input type="hidden" name="pageId" value="36634952"/>
            <input type="hidden" id="add-watcher-username" name="username" value=""/>
            <label for="add-watcher-user">User</label>
            <input id="add-watcher-user" name="userFullName" type="search" class="has-placeholder autocomplete-user"
               value="" placeholder="Full name or username" autocomplete="off"
               data-max="10" data-target="#add-watcher-username" data-dropdown-target="#add-watcher-dropdown"
               data-template="{title}" data-none-message="No matching users found.">
            <input id="add-watcher-submit" type="submit" name="add" value="Add">
            <div id="add-watcher-dropdown" class="aui-dd-parent autocomplete"></div>
            <div class="status hidden"></div>
        </form>
        <ul class="user-list">
            <li class="loading">Loading&hellip;</li>
            <li class="no-users hidden">No page watchers</li>
        </ul>
    </div>
    <div class="column space-watchers">
        <h3>Watching this space</h3>
        <p class="description">These people are notified when any content in the space is changed. You cannot modify this list.</p>
        <ul class="user-list">
            <li class="loading">Loading&hellip;</li>
            <li class="no-users hidden">No space watchers</li>
        </ul>
    </div>
</div>
</script>
<script type="text/x-template" title="manage-watchers-user">
    <li class="watch-user">
        <img class="profile-picture confluence-userlink" src="{iconUrl}" data-username="{username}">
        <a class="confluence-userlink" href="{url}" data-username="{username}">{fullName} <span class="username">({username})</span></a>
        <span class="remove-watch" title="Remove"
            data-username="{username}">Remove</span>
    </li>
</script>
<script type="text/x-template" title="manage-watchers-help-link">
    <div class="dialog-help-link">
            <a href="http://docs.atlassian.com/confluence/docs-33/Managing+Watchers" target="_blank">Help</a>
    </div>
</script>
    <br class="clear">
</div>
  
    </div>
</div>

<div id="footer">
                                                <p class="license license-opensource">
                  Powered by a free <b>Atlassian Confluence Open Source Project License</b> granted to MODx CMS / xPDO. <a href="http://www.atlassian.com/c/conf/11461">Evaluate Confluence today</a>.<br>
                </p>
                        
    <ul id="poweredby">
        <li class="noprint">Powered by <a href="http://www.atlassian.com/software/confluence" class="hover-footer-link">Atlassian Confluence</a> 3.3, the <a href="http://www.atlassian.com/software/confluence/tour/enterprise-wiki.jsp" class="hover-footer-link">Enterprise Wiki</a></li>
        <li class="print-only">Printed by Atlassian Confluence 3.3, the Enterprise Wiki.</li>        
        <li class="noprint"> &nbsp; |&nbsp; <a href="http://jira.atlassian.com/secure/BrowseProject.jspa?id=10470" class="hover-footer-link">Report a bug</a></li>
        <li class="noprint"> &nbsp;|&nbsp; <a href="http://www.atlassian.com/about/connected.jsp?s_kwcid=Confluence-stayintouch" class="hover-footer-link">Atlassian News</a></li>
    </ul>

    

            <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-71684-1']);
  _gaq.push(['_setDomainName', 'oldrtfm.modx.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
    </div>    <!-- include system javascript resources -->
                        
    
    
    <!-- end system javascript resources -->
</div>
</body>
</html>
