<p>
There are a variety of ways to retrieve Objects via xPDO. The two basic approaches here allow us to retrieve either a single object or a collection of objects. An Object is a single xPDOObject. It is retrieved via xPDO::getObject(). A Collection is an array of xPDOObjects. They are retrieved via xPDO::getCollection.
</p>

<h3>
<a name="RetrievingObjects-xPDO%3A%3AgetObjectxPDO.getObject"></a><a href="display/XPDO10/xPDO.getObject" title="xPDO.getObject">xPDO::getObject</a>
</h3>

<p>
getObject takes 3 arguments: $className, $criteria, and $cacheFlag. The first argument is the class name you'd like to retrieve; the second is the criteria by which you'd like to search for it; and the final argument is the caching option for the object.
</p>

<p>
If an integer value is provided for the $cacheFlag argument, then it specifies the time to live in the object cache; if cacheFlag === false, caching is ignored for the object and if cacheFlag === true, the object will live in the cache indefinitely.
</p>

<p>
Back to $criteria. This can be one of 3 things:
</p>

<ul>
<li>A primary key value
</li>

<li>An array of field(s)
</li>

<li>An xPDOCriteria object or derivative.
</li>
</ul>

<p>
We'll get back to the third option later. First, an example of the first option:
</p>

<pre class="brush: php">
    
// GroupUser is a table with 2 PKs - 'user' and 'group'
$gu = $xpdo-&gt;getObject('GroupUser',array(
   'user' =&gt; 12,
   'group' =&gt; 4,
));

    
</pre>
<p>
Or, let's say we wanted to grab the first Box object we find with a width of 150:
</p>

<pre class="brush: php">
    
// assume we have 3 boxes
$boxes = $xpdo-&gt;getCollection('Box',array(
  'width' =&gt; 14,
));
foreach ($boxes as $box) {
   echo $box-&gt;get('color')."\n";
}
// If our 3 boxes had a color of 'red','blue' and 'yellow', this would print:
// red
// blue
// yellow

    
</pre>
<h3>
<a name="RetrievingObjects-xPDO%3A%3AnewQueryxPDO.newQuery"></a><a href="display/XPDO10/xPDO.newQuery" title="xPDO.newQuery">xPDO::newQuery</a>
</h3>

<p>
One of the most powerful parts of xPDO is its ability to create complex queries in a simple fashion using the <a href="display/XPDO10/xPDOQuery" title="xPDOQuery">xPDOQuery</a> wrapper. This class lets you build SQL queries using OOP methods that extend the xPDOCriteria class – you can pass its instance right into getObject or getCollection calls. The newQuery function creates an <a href="display/XPDO10/xPDOQuery" title="xPDOQuery">xPDOQuery</a> object, and takes 3 parameters:
</p>

<ul>
<li>
<b>$class</b> - The class name to create the query for.
</li>

<li>
<b>$criteria</b> - This is optional; but you can specify criteria here.
</li>

<li>
<b>$cacheFlag</b> - Similar to getObject's cacheFlag, you can specify the caching behavior for this query.
</li>
</ul>

<p>
First, let's just show how you might use newQuery to define the criteria we used before: width = 14. We'll just add a sorting option to sort the results.
</p>

<pre class="brush: php">
    
$c = $xpdo-&gt;newQuery('Box');
$c-&gt;innerJoin('BoxOwner','Owner'); // arguments are className, alias
$c-&gt;where(array(
   'width' =&gt; 5,
   'Owner.user' =&gt; 2,
));
$c-&gt;sortby('name','ASC');
$c-&gt;limit(5);
$boxes = $xpdo-&gt;getCollection('Box',$c);

    
</pre>
<p>
We can join on 3rd table ("Owner") by using another call to <a href="display/XPDO10/xPDOQuery.innerJoin" title="xPDOQuery.innerJoin">xPDOQuery.innerJoin</a>. Let's also grab the 2nd 5 Boxes by specifying an offset – it's a 2nd argument to the limit() function:
</p>

<pre class="brush: php">
    
$boxTable = $xpdo-&gt;getTableName('Box');
$query= new xPDOCriteria($xpdo,'
    SELECT * FROM '.$boxTable.'
    WHERE `width` &gt; :width
    LIMIT 10
',array(
  ':width' =&gt; 4,
));
$boxes = $xpdo-&gt;getCollection('Box',$query);

    
</pre>
<h2>
<a name="RetrievingObjects-Graphs" id="RetrievingObjects-Graphs"></a>Graphs
</h2>

<div class="note">
A graph extends the idea of an object (or objects in collections). Instead of a simple object, a graph includes references to related objects. Graphs are a useful alternative to JOINs.
</div>

<h3>
<a name="RetrievingObjects-xPDO%3A%3AgetObjectGraph"></a>xPDO::getObjectGraph
</h3>

<p>
This is the same as getCollectionGraph, but it returns a single object. See getCollectionGraph below for info.
</p>

<h3>
<a name="RetrievingObjects-xPDO%3A%3AgetCollectionGraph"></a>xPDO::getCollectionGraph
</h3>

<pre class="brush: php">
    
$criteria = $modx-&gt;newQuery('Zip');
$criteria-&gt;where(array('ST.statename' =&gt; 'CA'));
$collection= $xpdo-&gt;getCollectionGraph('Zip', '{"TZ":{},"ST":{},"CT":{}}', $criteria);
if ($collection) {
        foreach ($collection as $obj) {
                $out = $obj-&gt;toArray();
                $out['timezone'] = $obj-&gt;TZ-&gt;get('tzname');
                $out['state'] = $obj-&gt;ST-&gt;get('statename');
                $out['county'] = $obj-&gt;CT-&gt;get('countyname');
                print_r($out);
        }
}

    
</pre>
<div class="tip">
<b>Aliases in Criteria</b>
<br />
The table names you specify in your criteria must use the <em>aliases</em>, not the class names (just like the JSON hashes).
</div>

<p>
Let's show one more example, this time using MODX tables. This is only an example: filtering on Template Variables is a bit dangerous because the values stored in the database are not always the verbatim values you experience in the manager or in your templates. But this example should help demonstrate the usage of aliases and that you must be aware of the relationships between the objects (some related objects are singular, some are arrays).
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
$criteria = array();
$criteria['modResource.id:IN'] = array(1,2,3);
$criteria['TemplateVarResources.tmplvarid'] = 5;
$criteria = $modx-&gt;newQuery('modResource', $criteria);
$pages = $modx-&gt;getCollectionGraph('modResource', '{<span class="code-quote">"TemplateVarResources"</span>:{<span class="code-quote">"TemplateVar"</span>:{}}}', $criteria);
<span class="code-keyword">if</span> ($pages) {
    foreach ($pages as $p) {
        print $p-&gt;get('pagetitle');
        foreach ($p-&gt;TemplateVarResources as $tvr) {
            $name = $tvr-&gt;TemplateVar-&gt;get('name');
            print $name . ' is '. $tvr-&gt;get('value');
        }
    }
}
</pre>
</div>
</div>

<h2>
<a name="RetrievingObjects-SeeAlso" id="RetrievingObjects-SeeAlso"></a>See Also
</h2>

<ul>
<li>
<a href="display/XPDO10/xPDO.getObject" title="xPDO.getObject">xPDO.getObject</a>
</li>

<li>
<a href="display/XPDO10/xPDO.getCollection" title="xPDO.getCollection">xPDO.getCollection</a>
</li>

<li>
<a href="display/XPDO10/xPDOQuery" title="xPDOQuery">xPDOQuery</a>
</li>

<li>
<a href="display/XPDO10/xPDO.newQuery" title="xPDO.newQuery">xPDO.newQuery</a>
</li>
</ul>