<div class='panelMacro'>
<table class='infoMacro'>
<colgroup>
<col width='24' />
<col />
</colgroup>

<tr>
<td valign='top'>
<img src="/images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0" />
</td>
<td>
<b>API Function Definition</b>
<br />

<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<td class='confluenceTd'>
Name
</td>
<td class='confluenceTd'>
runSnippet
</td>
</tr>

<tr>
<td class='confluenceTd'>
Versions
</td>
<td class='confluenceTd'>
&gt; 0.9.2
</td>
</tr>

<tr>
<td class='confluenceTd'>
Parameters
</td>
<td class='confluenceTd'>
string $snippetName [, array $params]
</td>
</tr>

<tr>
<td class='confluenceTd'>
Return success
</td>
<td class='confluenceTd'>
Output of a given snippet
</td>
</tr>

<tr>
<td class='confluenceTd'>
Return failure
</td>
<td class='confluenceTd'>
empty string (or false?)
</td>
</tr>

<tr>
<td class='confluenceTd'>
Return type
</td>
<td class='confluenceTd'>
string
</td>
</tr>

<tr>
<td class='confluenceTd'>
Object hierarchy
</td>
<td class='confluenceTd'>
<a href="/display/Evo1/DocumentParser+Object" title="DocumentParser Object">DocumentParser</a>
</td>
</tr>
</tbody>
</table>
</div>
</td>
</tr>
</table>
</div>

<p>
Retrieves a snippet from the database (or cache) given the name of the snippet. Extra parameters may also be sent to the snippet via it's optional second parameter. This function is usually used to run a snippet from within other <a href="/display/Evo1/Snippets" title="Snippets">Snippets</a> or even <a href="/display/Evo1/Modules" title="Modules">Modules</a>.
</p>

<h2>
<a name="runSnippet-Examples"></a>Examples
</h2>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
$dittoOutput = $modx-&gt;runSnippet(
        <span class="code-quote">"Ditto"</span>,
        array(
            <span class="code-quote">"tpl"</span> =&gt; <span class="code-quote">"&lt;post&gt;&lt;title&gt;[+title+]&lt;/title&gt;&lt;summary&gt;[+summary+]&lt;/summary&gt;&lt;/post&gt;"</span>
        )
);
</pre>
</div>
</div>

<h2>
<a name="runSnippet-Relatedfunctions"></a>Related functions
</h2>

<ul>
<li>
<span class="error">[getChunk]</span>
</li>

<li>
<span class="error">[evalSnippet]</span>
</li>
</ul>

<h2>
<a name="runSnippet-Functionsource"></a>Function source
</h2>

<div class='panelMacro'>
<table class='infoMacro'>
<colgroup>
<col width='24' />
<col />
</colgroup>

<tr>
<td valign='top'>
<img src="/images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0" />
</td>
<td>
<b>API Source File - manager/includes/document.parser.class.inc.php - 1689</b>
<br />
</td>
</tr>
</table>
</div>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
function runSnippet($snippetName, $params= array ()) {
  <span class="code-keyword">if</span> (isset ($<span class="code-keyword">this</span>-&gt;snippetCache[$snippetName])) {
      $snippet= $<span class="code-keyword">this</span>-&gt;snippetCache[$snippetName];
      $properties= $<span class="code-keyword">this</span>-&gt;snippetCache[$snippetName . <span class="code-quote">"Props"</span>];
  } <span class="code-keyword">else</span> { <span class="code-comment">// not in cache so let's check the db
</span>      $sql= <span class="code-quote">"SELECT * FROM "</span> . $<span class="code-keyword">this</span>-&gt;getFullTableName(<span class="code-quote">"site_snippets"</span>) . <span class="code-quote">" WHERE "</span> . $<span class="code-keyword">this</span>-&gt;getFullTableName(<span class="code-quote">"site_snippets"</span>) . <span class="code-quote">".name='"</span> . mysql_escape_string($snippetName) . <span class="code-quote">"';"</span>;
      $result= $<span class="code-keyword">this</span>-&gt;dbQuery($sql);
      <span class="code-keyword">if</span> ($<span class="code-keyword">this</span>-&gt;recordCount($result) == 1) {
          $row= $<span class="code-keyword">this</span>-&gt;fetchRow($result);
          $snippet= $<span class="code-keyword">this</span>-&gt;snippetCache[$row['name']]= $row['snippet'];
          $properties= $<span class="code-keyword">this</span>-&gt;snippetCache[$row['name'] . <span class="code-quote">"Props"</span>]= $row['properties'];
      } <span class="code-keyword">else</span> {
          $snippet= $<span class="code-keyword">this</span>-&gt;snippetCache[$snippetName]= <span class="code-quote">"<span class="code-keyword">return</span> <span class="code-keyword">false</span>;"</span>;
          $properties= '';
      }
  }
  <span class="code-comment">// load <span class="code-keyword">default</span> params/properties
</span>  $parameters= $<span class="code-keyword">this</span>-&gt;parseProperties($properties);
  $parameters= array_merge($parameters, $params);
  <span class="code-comment">// run snippet
</span>  <span class="code-keyword">return</span> $<span class="code-keyword">this</span>-&gt;evalSnippet($snippet, $parameters);
}
</pre>
</div>
</div>

<h2>
<a name="runSnippet-Notes"></a>Notes
</h2>

<p>
The paramaters array passed to this function should be of the form 'paramater' =&gt; 'value'; If you prefer a more readable function call, create an array first, such as:
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
$params['param1'] = 'value1';
$params['param2'] = 'value2';

$html = $modx-&gt;runSnippet('mysnippet', $params);
</pre>
</div>
</div>