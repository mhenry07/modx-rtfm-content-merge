<h2>
<a name="FriendlyURLSolutions-Apachemodrewrite.htaccessSolutionsforMODx"></a>Apache mod_rewrite .htaccess Solutions for MODx
</h2>

<div>
<ul>
<li>
<a href="evolution/1.0/administration/friendly-url-solutions#FriendlyURLSolutions-Apachemodrewrite.htaccessSolutionsforMODx">Apache mod_rewrite .htaccess Solutions for MODx</a>
</li>

<li style="list-style: none; display: inline">
<ul>
<li>
<a href="evolution/1.0/administration/friendly-url-solutions#FriendlyURLSolutions-CommonEditstotheDefault.htaccesFile">Common Edits to the Default .htacces File</a>
</li>

<li>
<a href="evolution/1.0/administration/friendly-url-solutions#FriendlyURLSolutions-ManagerProtection">Manager Protection</a>
</li>

<li>
<a href="evolution/1.0/administration/friendly-url-solutions#FriendlyURLSolutions-SessionHandling">Session Handling</a>
</li>

<li>
<a href="evolution/1.0/administration/friendly-url-solutions#FriendlyURLSolutions-CSSorJSfilesasMODxdocuments">CSS or JS files as MODx documents</a>
</li>

<li>
<a href="evolution/1.0/administration/friendly-url-solutions#FriendlyURLSolutions-Timezone">Timezone</a>
</li>

<li>
<a href="evolution/1.0/administration/friendly-url-solutions#FriendlyURLSolutions-DefaultCharacterSets">Default Character Sets</a>
</li>

<li>
<a href="evolution/1.0/administration/friendly-url-solutions#FriendlyURLSolutions-RegisterGlobals">Register Globals</a>
</li>

<li>
<a href="evolution/1.0/administration/friendly-url-solutions#FriendlyURLSolutions-SolvingInternetExplorerWoes">Solving Internet Explorer Woes</a>
</li>
</ul>
</li>
</ul>
</div>
MODx supports Friendly URLs via this .htaccess file. You must serve web pages via Apache with mod_rewrite to use this functionality, and you must change the file name from ht.access to .htaccess. Additional tweaks and environment specific additions follow the default template below:

<pre class="brush: php">
    RewriteBase /modx

    
</pre>
<p>
Note in the last block of directives the gzip compression was left commented out since this can potentially cause issues in some environemnts. For a faster webserver experience, ucomment the last two lines as follows:
</p>

<pre class="brush: php">
    RewriteRule ^(.*)$ index.php?q=$1 [L,QSA,NC]

    
</pre>
<p>
If you prefer your website to always add the "www." part to always show "www.example.com" URLs, then the section below should be changed as follows:
</p>

<pre class="brush: php">
    RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /~myacct/index.php?q=$1 [L,QSA]

    
</pre>
<h2>
<a name="FriendlyURLSolutions-ManagerProtection"></a>Manager Protection
</h2>

<p>
If you would like to limit the manager to being accessed by only a specific IP address, but need access to some things on the public site like the captcha, use the following. Make sure this goes inside the Manager directory:
</p>

<pre class="brush: php">
    php_value session.save_path /path/to/your/web/content/sessions/
php_value session.gc_maxlifetime 28800

    
</pre>
<h2>
<a name="FriendlyURLSolutions-CSSorJSfilesasMODxdocuments"></a>CSS or JS files as MODx documents
</h2>

<p>
By default, MODx Evolution's htaccess template file excludes the /assets and /manager directories from rewrite rules. If you are using a MODx document as a CSS file, you'll need to adjust the one line to allow rewrites in the /assets directory if that's where you store your CSS file.
</p>

<pre class="brush: php">
    RewriteRule ^manager - [L]

    
</pre>
<div class="tip">
<b>Tip</b>
<br />
If you still wish to maintain some subdirectories in the exclusions, you could disable /assets/images and /assets/snippets for example with the following rule:

<pre class="brush: php">
    php_value date.timezone Europe/Moscow

    
</pre>
<p>
or
</p>

<pre class="brush: php">
    AddDefaultCharset utf-8

    
</pre>
<h2>
<a name="FriendlyURLSolutions-RegisterGlobals"></a>Register Globals
</h2>

<div class='panelMacro'>
<p>
Your site is almost 99.99999% absolutely destined to be hacked at some point by script kiddies with register_globals on, ESPECIALLY in shared hosting environemnts. This is an inherrent security risk, equivalent to letting a baby play with a loaded gun and hoping they don't pull the trigger. If you're paying under $15/month, you're on a shared host. For more information: <a href="http://php.net/register_globals" class="external-link" rel="nofollow">http://php.net/register_globals</a>
</p>

<p>
To verify that this option has been set to OFF, open the Manager and choose Reports -&gt; System Info and then click the phpinfo() link. Do a Find on Page for "register_globals". The Local Value should be OFF. If the Master Value is OFF then you do not need this directive here.
</p>

<p>
IF REGISTER_GLOBALS DIRECTIVE CAUSES 500 INTERNAL SERVER ERRORS:
</p>

<p>
Your server does not allow PHP directives to be set via .htaccess. In that case you must make this change in your php.ini file instead. If you are using a commercial web host, contact the administrators for assistance in doing this. Not all servers allow local php.ini files, and they should include all PHP configurations (not just this one), or you will effectively reset everything to PHP defaults. Consult www.php.net for more detailed information about setting PHP directives.
</p>

<pre class="brush: php">
    # Fix .htc mime type for Internet Explorer
AddType text/x-component .htc

    
</pre>
<p>
The following directives stop screen flicker in IE on CSS rollovers. When they're in place, you may have to do a force-refresh in order to see changes in your designs.
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
# Fix screen flicker <span class="code-keyword">for</span> images in Internet Explorer
ExpiresActive On
ExpiresByType image/gif A2592000
ExpiresByType image/jpeg A2592000
ExpiresByType image/png A2592000
BrowserMatch <span class="code-quote">"MSIE"</span> brokenvary=1
BrowserMatch <span class="code-quote">"Mozilla/4.[0-9]{2}"</span> brokenvary=1
BrowserMatch <span class="code-quote">"Opera"</span> !brokenvary
SetEnvIf brokenvary 1 force-no-vary
</pre>
</div>
</div>

<div class="note">
.htaccess directives provide directory-level configuration overrides when you cannot access the main Apache httpd.conf file. The main configuration file should be used for server directives whenever possible because .htaccess rules result in increased page processing times.
</div>

<table class='warningMacro'>
<colgroup>
<col width='24' />
<col />
</colgroup>

<tr>
<td valign='top'>
<img src="images/icons/emoticons/forbidden.gif" width="16" height="16" align="absmiddle" alt="" border="0" />
</td>
<td>
<b>Warning</b>
<br />
If your server has register_globals enabled (and it's not possible to disable), run as fast as possible to a new webhost. Seriously.
</td>
</tr>
</table>
</div>
</div>