<h2>
<a name="update-API%3ADB%3Aupdate"></a>API:DB:update
</h2>

<div class="info">
<b>API Quick reference</b>
<br />

<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<td class='confluenceTd'>
Variable name:
</td>
<td class='confluenceTd'>
update
</td>
</tr>

<tr>
<td class='confluenceTd'>
Modx versions:
</td>
<td class='confluenceTd'>
0.9.x + Evolution
</td>
</tr>

<tr>
<td class='confluenceTd'>
Input parameters:
</td>
<td class='confluenceTd'>
(String $fields, String $table, String $where)
</td>
</tr>

<tr>
<td class='confluenceTd'>
Return if successful:
</td>
<td class='confluenceTd'>
true
</td>
</tr>

<tr>
<td class='confluenceTd'>
Return type:
</td>
<td class='confluenceTd'>
bool
</td>
</tr>

<tr>
<td class='confluenceTd'>
Return on failure:
</td>
<td class='confluenceTd'>
false
</td>
</tr>

<tr>
<td class='confluenceTd'>
Object parent:
</td>
<td class='confluenceTd'>
<a href="display/Evo1/DocumentParser+Object" title="DocumentParser Object">DocumentParser</a> -&gt; <a href="display/Evo1/DBAPI" title="DBAPI">DBAPI</a>
</td>
</tr>
</tbody>
</table>
</div>
</div>

<h2>
<a name="update-Description" id="update-Description"></a>Description
</h2>

<pre class="brush: php">
    $rows_affected = $modx-&gt;db-&gt;update("fields", "table_name" [, "where value"]);
    
</pre>
<p>
<b>The "fields" argument</b>
</p>

<p>
The "fields" argument can be an (associative) array if more than one field is to be updated. ie:
</p>

<pre class="brush: php">
    $rows_affected = $modx-&gt;db-&gt;update("field=value" "table_name", "where value");
    
</pre>
<p>
<b>The "table" argument</b>
</p>

<p>
The "table" argument is the table to update. You can use the MODx function to return the full tablename; this is probably the best way, since you won't have to remember to include the prefix of the table names for your site:
</p>

<pre class="brush: php">
    function update_username( $id, $username ) {
        global $modx;
        $table = $modx-&gt;getFullTableName( 'user_table' );
        
        $result = $modx-&gt;db-&gt;update( 'username = "' . $username . '"', $table, 'userid = "' . $id . '"' );
        return $result;         // Returns 'true' on success, 'false' on failure.
}
    
</pre>
<p>
This snippet uses an array to update multiple fields in a database:
</p>

<pre class="brush: php">
    $table = $modx-&gt;getFullTableName("site_content");
$fields = array(
     "pagetitle" =&gt; "New Title",
     "alias" =&gt; "new-alias",
     "menuindex" =&gt; 2,
     "published" =&gt; 1
     )
$rows_affected = $modx-&gt;db-&gt;update($fields, $table, "id = 45");
    
</pre>
<p>
will change document 45's title to "New Title", its alias to "new-alias", make it the second item in the menu, and publish it.
</p>

<p>
<b>Example 4</b>
</p>

<pre class="brush: php">
    function update($fields, $table, $where = "") {
      if (!$table)
         return false;
      else {
         if (!is_array($fields))
            $flds = $fields;
         else {
            $flds = '';
            foreach ($fields as $key =&gt; $value) {
               if (!empty ($flds))
                  $flds .= ",";
               $flds .= $key . "=";
               $flds .= "'" . $value . "'";
            }
         }
         $where = ($where != "") ? "WHERE $where" : "";
         return $this-&gt;query("UPDATE $table SET $flds $where");
      }
   }
    
</pre>