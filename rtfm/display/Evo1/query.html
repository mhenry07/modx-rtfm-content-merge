<h1>
<a name="query-API%3ADB%3Aquery"></a>API:DB:query
</h1>

<div class="info">
<b>API Quick reference</b>
<br />

<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<td class='confluenceTd'>
Variable name:
</td>
<td class='confluenceTd'>
query
</td>
</tr>

<tr>
<td class='confluenceTd'>
Modx versions:
</td>
<td class='confluenceTd'>
0.9.x + Evolution
</td>
</tr>

<tr>
<td class='confluenceTd'>
Input parameters:
</td>
<td class='confluenceTd'>
(String $sql)
</td>
</tr>

<tr>
<td class='confluenceTd'>
Return if successful:
</td>
<td class='confluenceTd'>
result_resource
</td>
</tr>

<tr>
<td class='confluenceTd'>
Return type:
</td>
<td class='confluenceTd'>
mixed
</td>
</tr>

<tr>
<td class='confluenceTd'>
Return on failure:
</td>
<td class='confluenceTd'>
error
</td>
</tr>

<tr>
<td class='confluenceTd'>
Object parent:
</td>
<td class='confluenceTd'>
<a href="display/Evo1/DocumentParser+Object" title="DocumentParser Object">DocumentParser</a> -&gt; <a href="display/Evo1/DBAPI" title="DBAPI">DBAPI</a>
</td>
</tr>
</tbody>
</table>
</div>
</div>

<h2>
<a name="query-Description" id="query-Description"></a>Description
</h2>

<pre class="brush: php">
    function login($username, $password)
The following function will SELECT data from a users table and output it to the page:

$output = '';
$result = $modx-&gt;db-&gt;query( 'SELECT id, name, joined FROM `user_table` GROUP BY `member_type` ORDER BY name ASC' );
 
while( $row = $modx-&gt;db-&gt;getRow( $result ) ) {
        $output .= '&lt;br /&gt; ID: ' . $row['id'] . '&lt;br /&gt; Name: ' . $row['name'] . '&lt;br /&gt; Joined: ' . $row['joined']
        . '&lt;br /&gt;---------&lt;br /&gt;';
}
echo $output;
    
</pre>
<p>
Example2:
</p>

<pre class="brush: php">
    function query($sql) {
      global $modx;
      if (empty ($this-&gt;conn) || !is_resource($this-&gt;conn)) {
         $this-&gt;connect();
      }
      $tstart = $modx-&gt;getMicroTime();
      if (!$result = @ mysql_query($sql, $this-&gt;conn)) {
         $modx-&gt;messageQuit("Execution of a query to the database failed - " . $this-&gt;getLastError(), $sql);
      } else {
         $tend = $modx-&gt;getMicroTime();
         $totaltime = $tend - $tstart;
         $modx-&gt;queryTime = $modx-&gt;queryTime + $totaltime;
         if ($modx-&gt;dumpSQL) {
            $modx-&gt;queryCode .= "&lt;fieldset style='text-align:left'&gt;&lt;legend&gt;Query " . ($this-&gt;executedQueries + 1) . " - " . sprintf("%2.4f s", $totaltime) . "&lt;/legend&gt;" . $sql . "&lt;/fieldset&gt;&lt;br /&gt;";
         }
         $modx-&gt;executedQueries = $modx-&gt;executedQueries + 1;
         return $result;
      }
   }
    
</pre>