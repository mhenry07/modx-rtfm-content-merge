<h2>
<a name="escape-API%3ADB%3Aescape"></a>API:DB:escape
</h2>

<div class="info">
<b>API Quick reference</b>
<br />

<div class='table-wrap'>
<table class='confluenceTable'>
<tbody>
<tr>
<td class='confluenceTd'>
Variable name:
</td>
<td class='confluenceTd'>
escape
</td>
</tr>

<tr>
<td class='confluenceTd'>
Modx versions:
</td>
<td class='confluenceTd'>
0.9.x + Evolution
</td>
</tr>

<tr>
<td class='confluenceTd'>
Input parameters:
</td>
<td class='confluenceTd'>
(string $s)
</td>
</tr>

<tr>
<td class='confluenceTd'>
Return if successful:
</td>
<td class='confluenceTd'>
MySQL escaped string $s
</td>
</tr>

<tr>
<td class='confluenceTd'>
Return type:
</td>
<td class='confluenceTd'>
string
</td>
</tr>

<tr>
<td class='confluenceTd'>
Return on failure:
</td>
<td class='confluenceTd'>
string $s
</td>
</tr>

<tr>
<td class='confluenceTd'>
Object parent:
</td>
<td class='confluenceTd'>
<a href="display/Evo1/DocumentParser+Object" title="DocumentParser Object">DocumentParser</a> -&gt; <a href="display/Evo1/DBAPI" title="DBAPI">DBAPI</a>
</td>
</tr>
</tbody>
</table>
</div>
</div>

<h2>
<a name="escape-Description" id="escape-Description"></a>Description
</h2>

<pre class="brush: php">
    function login($username, $password)
{
   global $modx, $table_prefix;
   $username = $modx-&gt;db-&gt;escape($username);
   $password = $modx-&gt;db-&gt;escape($password);
 
   $res = $modx-&gt;db-&gt;select("id", $table_prefix.".modx_web_users", 
      "username='$username' AND password='".md5($password)."'");
   if($modx-&gt;db-&gt;getRecordCount($res))
   {
      $_SESSION['userid'] = $id;
      //other log in things...
   }
   else
   {
      //incorrect login
   }
}
    
</pre>

<pre class="brush: php">
    function escape($s) {
   if (function_exists('mysql_real_escape_string') &amp;&amp; $this-&gt;conn) {
      $s = mysql_real_escape_string($s, $this-&gt;conn);
   } else {
      $s = mysql_escape_string($s);
   }
   return $s;
}
    
</pre>