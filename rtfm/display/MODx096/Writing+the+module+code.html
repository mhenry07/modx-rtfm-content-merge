<p>
There are many ways to roll your own code but for this tutorial we are going to code our module so that it can make use of the MODx APIs.
</p>

<p>
When a module is first executed the code stored inside the PHP field is evaluated or called from within the execute_module.inc.php file. This means that our module can reference the $modx variable when it's executed.
</p>

<p>
For example:
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
$doc = $modx-&gt;getDocument(1);
echo $doc['pagetitle'];
</pre>
</div>
</div>

<p>
In the above example we can either use the echo keyword or the return keyword to render text on the screen.
</p>

<p>
If you where to paste the above code inside the phone book module you would see the page title of document 1 been displayed. In my case you would display the following:
</p>

<p>
Introduction
</p>

<p>
We would also rewrite the above as:
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
$doc = $modx-&gt;getDocument(1);
<span class="code-keyword">return</span> $doc['pagetitle'];
</pre>
</div>
</div>

<p>
This time we are using the return keyword to render text on the screen.
</p>

<p>
Using the echo keyword might be more convenient for your specific need.
</p>

<p>
For example:
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
echo '&lt;h1&gt;Phone book&lt;/h1&gt;';
echo '&lt;h3&gt;Manage your contacts with ease&lt;/h3&gt;';
echo '&lt;hr /&gt;';
</pre>
</div>
</div>

<p>
Now that you have gotten the basic idea of how a module works you can proceed to write your module the same way you would any PHP app with exception that your app will be running inside a frame and will have access to the MODx APIs.
</p>

<p>
Another thing to bear in mind is that the content manager will execute your module for every postback, providing that you send your postbacks to the page where the module was first executed.
</p>

<p>
In other words if you load or link to an external page after the module have been executed then the MODx APIs will not be available for those pages.
</p>

<p>
In order to use the MODx APIs you should postback to the initial page. To do this you could just simply wrap my pages inside a single
</p>

<p>
and use the following postForm function posting form data or calling another page from the module:
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;script language=<span class="code-quote">"JavaScript"</span> type=<span class="code-quote">"text/javascript"</span>&gt;

   function postForm(opcode){

        document.module.opcode.value=opcode;

        document.module.submit();

   }

&lt;/script&gt;



&lt;form name=<span class="code-quote">"module"</span> method=<span class="code-quote">"post"</span>&gt;

&lt;input name=<span class="code-quote">"opcode"</span> type=<span class="code-quote">"hidden"</span> value="" /&gt;

&lt;!-- content goes here --&gt;

&lt;/form&gt;
</pre>
</div>
</div>

<p>
<b>Note:</b> The opcode field can be used as a function directive for calling an action from within the module.
</p>

<p>
When sending information back to the server you can use:
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
&lt;a href=<span class="code-quote">"javascript:;"</span> onclick=<span class="code-quote">"postForm('save')"</span>&gt;Save&lt;/a&gt;

&lt;a href=<span class="code-quote">"javascript:;"</span> onclick=<span class="code-quote">"postForm('delete')"</span>&gt;Delete&lt;/a&gt;

&lt;a href=<span class="code-quote">"javascript:;"</span> onclick=<span class="code-quote">"postForm('search')"</span>&gt;Search List&lt;/a&gt;
</pre>
</div>
</div>

<p>
Here's what the final module code might look like.
</p>

<div class="code panel" style="border-width: 1px;">
<div class="codeContent panelContent">
<pre class="code-java">
/* A simple module */



$opcode = isset($_POST['opcode']) ? $_POST['opcode']:'';



<span class="code-comment">// action directive
</span>
<span class="code-keyword">switch</span>($opcode) {

        <span class="code-keyword">case</span> 'save':

                <span class="code-comment">// save code here
</span>
                echo 'Save action';

        <span class="code-keyword">break</span>;



        <span class="code-keyword">case</span> 'delete':

                <span class="code-comment">// delete code here
</span>
                echo 'Delete action';

        <span class="code-keyword">break</span>;



        <span class="code-keyword">case</span> 'search':

                <span class="code-comment">// search code here
</span>
                echo 'Search action';

        <span class="code-keyword">break</span>;



        <span class="code-keyword">default</span>: <span class="code-comment">// display module page
</span>
                echo '&lt;html&gt;';

                echo '&lt;head&gt;&lt;/head&gt;';

                echo '&lt;body&gt;';

                echo '&lt;script language=<span class="code-quote">"JavaScript"</span> type=<span class="code-quote">"text/javascript"</span>&gt;';

                echo '   function postForm(opcode){';

                echo '        document.module.opcode.value=opcode;';

                echo '        document.module.submit();';

                echo '   }';

                echo '&lt;/script&gt;';

                echo '&lt;form name=<span class="code-quote">"module"</span> method=<span class="code-quote">"post"</span>&gt;';

                echo '&lt;input name=<span class="code-quote">"opcode"</span> type=<span class="code-quote">"hidden"</span> value="" /&gt;';

                echo '&lt;h1&gt;Phone book&lt;/h1&gt;';

                echo '&lt;h3&gt;Manage your contacts with ease&lt;/h3&gt;';

                echo '&lt;hr /&gt;';

                echo '&lt;a href=<span class="code-quote">"javascript:;"</span> onclick="postForm(\'save\');<span class="code-keyword">return</span>
<span class="code-keyword">false</span>;"&gt;Save&lt;/a&gt; | ';
                echo '&lt;a href=<span class="code-quote">"javascript:;"</span> onclick="postForm(\'delete\');<span class="code-keyword">return</span>
<span class="code-keyword">false</span>;"&gt;Delete&lt;/a&gt; | ';
                echo '&lt;a href=<span class="code-quote">"javascript:;"</span> onclick="postForm(\'search\');<span class="code-keyword">return</span>
<span class="code-keyword">false</span>;"&gt;Search List&lt;/a&gt; | ';
                echo '&lt;a href=<span class="code-quote">"javascript:;"</span> onclick="postForm(\'\');<span class="code-keyword">return</span>
<span class="code-keyword">false</span>;"&gt;Main&lt;/a&gt;';
                echo '&lt;/form&gt;';

                echo '&lt;/body&gt;';

                echo '&lt;/html&gt;';

        <span class="code-keyword">break</span>;


}


</pre>
</div>
</div>